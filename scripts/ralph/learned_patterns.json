{
  "version": "1.0",
  "last_updated": "2026-01-14T08:27:11.906505",
  "patterns": [
    {
      "type": "bad_pattern",
      "description": "Do not group Pinterest OAuth with Facebook OAuth in same story",
      "example": "They use different services (tack vs zuck)",
      "discovered_at": "2026-01-13T21:11:48.132107",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Pinterest token refresh and OAuth issues can be grouped together",
      "example": "Both handled in tack service",
      "discovered_at": "2026-01-13T21:11:48.132135",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep OAuth flow for a single platform in one story",
      "example": "This story covers Pinterest OAuth only (tack service), not mixing with Facebook/Instagram OAuth (zuck service)",
      "discovered_at": "2026-01-13T21:33:54.436502",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include all related edge cases for the same flow in one story",
      "example": "Story includes expired token handling (AC #2), multiple accounts (AC #3), and API unavailability (AC #4) - all variations of the same OAuth reconnection flow",
      "discovered_at": "2026-01-13T21:33:54.436586",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bundle UI feedback and error handling with the core fix when they share code paths",
      "example": "AC #5 (invalid token error) and AC #6 (visual feedback) are bundled because they're implemented in the same aero callback route and error handling logic",
      "discovered_at": "2026-01-13T21:33:54.436607",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Limit service involvement to those directly in the dependency chain",
      "example": "Story involves only aero (UI) and tack (Pinterest OAuth) - correctly excludes gandalf since tack handles Pinterest token validation internally via base.ts",
      "discovered_at": "2026-01-13T21:33:54.436630",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Bundling a missing feature (brand voice in chat) with an intentional design behavior (token-based context windowing) as if they share a root cause",
      "example": "Story treats 'generic responses' (missing personalization) and 'context lost' (token limit) as related issues, but they require completely different fixes: adding injectPersonalization() vs. increasing token limits or implementing persistent context",
      "discovered_at": "2026-01-13T21:33:54.436663",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "The story correctly identifies aero and ghostwriter as the service chain and correctly locates the chat.ts file",
      "example": "Technical context identifies aero/packages/core/src/ghostwriter-labs/generations/chat.ts as the file to examine - this is accurate",
      "discovered_at": "2026-01-13T21:33:54.436698",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Story references non-existent file path in its code paths (generators/chat.ts vs generations/chat.ts)",
      "example": "Story mentions 'aero/packages/core/src/ghostwriter-labs/generators/chat.ts' but the actual path is 'generations/chat.ts' - this typo could waste developer investigation time",
      "discovered_at": "2026-01-13T21:33:54.436733",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Bundling a simple missing-call fix with an architectural change",
      "example": "Adding injectPersonalization() is a ~5 line change, but improving context retention requires deciding on summarization strategy, token limit increases, or model migration - fundamentally different scope.",
      "discovered_at": "2026-01-13T21:33:54.436767",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Identifying the wrong primary service",
      "example": "Story says 'Primary Service: tailwind/ghostwriter' but the actual code path uses ChatbotGeneratorFactory in aero, not the ghostwriter service's /prompt/chat endpoint.",
      "discovered_at": "2026-01-13T21:33:54.436800",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep feature additions separate from architectural changes",
      "example": "Brand voice injection (add preprocessing step) should be one story; context retention improvement (architectural decision on memory management) should be a separate story with design discussion.",
      "discovered_at": "2026-01-13T21:33:54.436839",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Verify the actual code path before scoping",
      "example": "The aero chat route imports ChatbotGeneratorFactory from '@tailwind-aero/core/ghostwriter/server', not from the ghostwriter service - understanding this prevents wrong service attribution.",
      "discovered_at": "2026-01-13T21:33:54.436879",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single feature enhancement with related acceptance criteria - all ACs relate to timezone clarity",
      "example": "AC#1 (display timezone), AC#2 (prompt if missing), AC#3 (DST handling), AC#4-6 (feedback) all serve the same user goal",
      "discovered_at": "2026-01-13T21:33:54.436929",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Respect service boundaries - enhancement stays within logical service ownership",
      "example": "Story correctly identifies aero for UI changes and tack for Pinterest-specific backend, not mixing in unrelated services like zuck or gandalf",
      "discovered_at": "2026-01-13T21:33:54.436978",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Referenced file paths may not exist - story specifies scheduler-handler.ts in tack but this file structure doesn't match actual codebase",
      "example": "Story references 'tack/service/lib/handlers/api/scheduler/scheduler-handler.ts' but tack has no scheduler handler - scheduling logic lives in aero/packages/core/src/scheduler/",
      "discovered_at": "2026-01-13T21:33:54.437049",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice - UI + logic + data layer addressed cohesively",
      "example": "Story covers UI display (aero components), user settings (timezone in user profile), and scheduling flow (timeslot pickers)",
      "discovered_at": "2026-01-13T21:33:54.437107",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly scopes to single platform OAuth (Pinterest only), not mixing with Facebook/Instagram OAuth which lives in zuck service",
      "example": "All code paths examined are Pinterest-specific in tack (pinterestv5 client) and aero (pinterest oauth routes)",
      "discovered_at": "2026-01-13T21:46:16.322969",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story follows proper vertical slice - UI layer (aero routes) through business logic (TailwindPinterestOauthCompleter) to data layer (tack token storage)",
      "example": "Flow: aero/connect \u2192 aero/callback \u2192 core/pinterest-oauth-completer \u2192 tack/oauth-finalize \u2192 DynamoDB TokenV5Facet",
      "discovered_at": "2026-01-13T21:46:16.323142",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Related concerns (token expiration, reconnection, error messaging) are grouped because they share the same code path in oauth-finalize-handler.ts lines 40-118",
      "example": "Token validation, Pinterest API call, and error handling all happen in the same handler function",
      "discovered_at": "2026-01-13T21:46:16.323262",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies both services needed (aero + tack) without adding unrelated services like gandalf (which handles Google OAuth, not Pinterest)",
      "example": "gandalf has no Pinterest OAuth code - confirmed by searching for 'pinterest' pattern which returned no relevant results",
      "discovered_at": "2026-01-13T21:46:16.323387",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Bundling a bug fix with a feature enhancement because they affect the same user flow",
      "example": "This story combines 'missing injectPersonalization call' (bug, 1 line fix) with 'implement message summarization' (feature, requires design) because both cause 'poor chat experience'",
      "discovered_at": "2026-01-13T21:46:16.323514",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Grouping issues by user symptom rather than technical root cause",
      "example": "User reports 'generic responses' AND 'forgets context' - these are different technical problems requiring different solutions",
      "discovered_at": "2026-01-13T21:46:16.323622",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single service, single code path for brand voice fix",
      "example": "The brand voice issue is cleanly isolated to aero/packages/core/src/ghostwriter-labs/generations/chat.ts - matches pattern of 39 other files",
      "discovered_at": "2026-01-13T21:46:16.323741",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Duplicate logic across services complicates scope",
      "example": "Token limit handling exists in both aero (chat.ts:14-32) and ghostwriter (get-messages-within-limit.ts) - fixing context retention requires coordinated changes",
      "discovered_at": "2026-01-13T21:46:16.323854",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "All reported symptoms (robotic output, ignored brand preferences, generic responses) trace to a single missing function call",
      "example": "User feedback 'It writes like a robot' and 'I set up my brand preferences but it ignores them' both stem from the missing injectPersonalization() call in chat.ts",
      "discovered_at": "2026-01-13T21:46:16.323989",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies the dependency chain (aero \u2192 brandy2) and stays within that boundary",
      "example": "The fix only touches aero's chat.ts - it doesn't require changes to brandy2 or ghostwriter services since the personalization infrastructure already exists and works for all other generation types",
      "discovered_at": "2026-01-13T21:46:16.324320",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story is a complete vertical slice: one code change enables brand data fetching \u2192 prompt enrichment \u2192 personalized output",
      "example": "Adding injectPersonalization() to chat.ts automatically leverages existing flows: getBrandForOrg() \u2192 listBrands() \u2192 getPersonalizationPrompt() \u2192 enriched LLM prompt",
      "discovered_at": "2026-01-13T21:46:16.324608",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "All acceptance criteria relate to a single UX concern (timezone clarity) and would be addressed by UI changes in one service",
      "example": "AC #1-6 all focus on displaying timezone information or handling timezone-related errors, which can be fixed with changes to aero UI components like TimeslotPicker and scheduling confirmation messages",
      "discovered_at": "2026-01-13T21:46:16.324796",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Clean vertical slice: UI changes only, no backend API or database schema changes required",
      "example": "Timezone data already exists on user profile (accessed via useTimezone hook). The enhancement only requires displaying existing data more prominently.",
      "discovered_at": "2026-01-13T21:46:16.324952",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Technical Context section references non-existent file paths, indicating insufficient code exploration before story creation",
      "example": "Story lists 'tack/service/lib/handlers/api/scheduler/scheduler-handler.ts' as existing file to examine, but this file does not exist. The actual scheduler code is in aero/packages/bachv2/service/account/clients/scheduler/pin-scheduler.ts",
      "discovered_at": "2026-01-13T21:46:16.325115",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Primary service incorrectly identified - story claims tack is primary but timezone handling is entirely in aero",
      "example": "Story states 'Primary Service: tailwind/tack' but grep for 'timezone' in tack returns zero results. All timezone utilities, hooks, and UI components live in aero.",
      "discovered_at": "2026-01-13T21:46:16.325285",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bundle OAuth initiation, token exchange, and callback handling together when they share the same platform",
      "example": "This story correctly bundles aero connect/callback routes with tack oauth-finalize handler since they all serve Pinterest OAuth flow",
      "discovered_at": "2026-01-13T21:56:17.465371",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include token refresh logic when fixing OAuth reconnection issues, as they often share failure modes",
      "example": "The investigation subtasks correctly include access-token-refresh-handler.ts since invalid_grant errors during refresh could cause the same user-facing symptoms",
      "discovered_at": "2026-01-13T21:56:17.465608",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep error handling improvements in the same story as the bug fix when they share the same code path",
      "example": "AC #4-5 (error handling) and AC #1 (happy path) both exercise the same oauth-finalize-handler.ts \u2192 callback/route.ts code path",
      "discovered_at": "2026-01-13T21:56:17.465807",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Scope to a single platform when OAuth issues are platform-specific",
      "example": "This story correctly focuses only on Pinterest/tack and does not bundle Facebook/zuck OAuth issues even though they might have similar symptoms",
      "discovered_at": "2026-01-13T21:56:17.465980",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies a single missing function call as root cause and stays within one service boundary (aero)",
      "example": "All investigation points to chat.ts:21 needing .preprocess((input) => injectPersonalization(input)) - a one-line fix",
      "discovered_at": "2026-01-13T21:56:17.466185",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly traces the dependency chain: aero (generation config) \u2192 brandy2 (brand data) \u2192 aero (prompt building)",
      "example": "Technical context accurately describes: 'aero calls brandy2 to get brand settings, then calls ghostwriter with a personalized prompt'",
      "discovered_at": "2026-01-13T21:56:17.466428",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice - covers UI signal, processing logic, and data fetching in one coherent story",
      "example": "Acceptance criteria cover happy path (brand voice applied), edge cases (emojis, empty input), and error states (fetch failures)",
      "discovered_at": "2026-01-13T21:56:17.466637",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bug fix story identifies a single missing code pattern that exists elsewhere in the codebase",
      "example": "This story correctly identifies that chat.ts lacks injectPersonalization() while 38+ other generation files have it - a clear pattern omission bug",
      "discovered_at": "2026-01-13T21:56:17.466849",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies the service boundary - personalization lives in aero, not ghostwriter",
      "example": "The story notes 'aero \u2192 ghostwriter' chain but correctly focuses fixes on aero where getBrandForOrg and injectPersonalization live",
      "discovered_at": "2026-01-13T21:56:17.467060",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice: one user flow, one fix location, clear acceptance criteria",
      "example": "User types in chat \u2192 chat.ts processes \u2192 personalization injected \u2192 brand voice appears in response",
      "discovered_at": "2026-01-13T21:56:17.467275",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bundle timezone display and error handling for the same UI flow together",
      "example": "AC #1-4 all relate to what the user sees when scheduling: confirmation message with timezone, and error state when timezone can't be determined",
      "discovered_at": "2026-01-13T21:56:17.467487",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep platform-specific scheduling changes isolated to that platform",
      "example": "Story correctly focuses only on Pinterest scheduler, not mixing in Instagram/Facebook scheduling",
      "discovered_at": "2026-01-13T21:56:17.467681",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Don't mix scheduling validation features (time conflicts) with display/UX features (timezone clarity)",
      "example": "AC #6 'time conflicts with another scheduled pin' is a scheduling validation feature unrelated to timezone confusion - this should be its own story",
      "discovered_at": "2026-01-13T21:56:17.467897",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Don't reference non-existent code paths in investigation subtasks",
      "example": "Story references 'timezone-selector.tsx' and 'tack/service/lib/handlers/api/schedule-handler.ts' which don't exist in the codebase",
      "discovered_at": "2026-01-13T21:56:17.468102",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Focus on single platform OAuth flow without mixing other platforms",
      "example": "Story focuses only on Pinterest OAuth (tack service), not bundling Facebook OAuth (zuck service) or Instagram auth together",
      "discovered_at": "2026-01-13T22:05:50.284720",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice covering UI, business logic, and data layer",
      "example": "Story covers: UI error pages and reconnect buttons (aero) \u2192 OAuth completion logic (aero core + tack handlers) \u2192 Token storage (tack TokenRepository/TokenV5Facet)",
      "discovered_at": "2026-01-13T22:05:50.285100",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "All acceptance criteria relate to the same user journey",
      "example": "All 6 ACs cover the Pinterest reconnection flow: happy path, expired token edge case, already connected edge case, Pinterest 503 error, invalid token error, and feedback timing",
      "discovered_at": "2026-01-13T22:05:50.285324",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Document service dependencies accurately - story mentioned gandalf but it's not in the code path",
      "example": "Story states 'Dependency Chain: aero UI \u2192 tack (Pinterest OAuth handlers) \u2192 Pinterest API' but also mentions gandalf in service architecture which isn't involved in this specific flow",
      "discovered_at": "2026-01-13T22:05:50.285587",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Reference working implementations in the same codebase when describing bug fixes",
      "example": "Story correctly references pinterest-title-and-description.ts as a working example of the same functionality",
      "discovered_at": "2026-01-13T22:05:50.285826",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Scope bug fixes to the exact file and function where the issue exists",
      "example": "Story pinpoints chat.ts as the file missing injectPersonalization() - verified by code examination showing it's the only generation config without this call",
      "discovered_at": "2026-01-13T22:05:50.286078",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Avoid mentioning unrelated issues in the problem statement even if reported together",
      "example": "Story mentions 'context loss during the same session' but this is unrelated to brand voice and not covered by ACs - should be a separate story or removed",
      "discovered_at": "2026-01-13T22:05:50.286333",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies a single missing function call as root cause with clear code path evidence",
      "example": "The story pinpoints line 21 in chat.ts and correctly identifies that injectPersonalization() is missing from the preprocessing chain",
      "discovered_at": "2026-01-13T22:05:50.286607",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story respects the established aero \u2192 brandy2 \u2192 ghostwriter communication pattern rather than proposing changes across multiple services",
      "example": "The fix is entirely within aero's ghostwriter-labs module, using existing injectPersonalization infrastructure that works for 35+ other generation types",
      "discovered_at": "2026-01-13T22:05:50.286962",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story is a clean vertical slice: touches one generation config file to enable complete brand voice functionality end-to-end",
      "example": "Adding one preprocess line in chat.ts enables: brand fetch (brandy2) \u2192 personalization prompt building (aero) \u2192 enhanced chat response (ghostwriter)",
      "discovered_at": "2026-01-13T22:05:50.287295",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single root cause with cohesive solution - all acceptance criteria address the same underlying issue (timezone display clarity)",
      "example": "All acceptance criteria (happy path, edge cases, error states) revolve around showing timezone in confirmation messages, which can be solved by modifying the format string in use-scheduler-toasts.ts and adding a timezone indicator component",
      "discovered_at": "2026-01-13T22:05:50.287599",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Respects service boundaries - changes confined to aero UI layer without requiring backend modifications",
      "example": "Story correctly identifies that tack handles scheduling logic but the issue is purely presentation - the timezone data is already being passed through the pipeline (date-time-field.tsx:89 passes timezone to DateTimePickerWithTimeslotsProvider)",
      "discovered_at": "2026-01-13T22:05:50.287888",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice within single domain - scheduler domain owns all affected components",
      "example": "All files to modify are within aero/packages/tailwindapp/client/domains/scheduler/ making the change self-contained and reviewable",
      "discovered_at": "2026-01-13T22:05:50.288173",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story leverages existing infrastructure rather than requiring new systems",
      "example": "TimezoneDate class and useTimezone hook already exist and work correctly - the enhancement only needs to add display elements using these existing utilities",
      "discovered_at": "2026-01-13T22:05:50.288438",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single platform OAuth flow contained within one platform-specific service",
      "example": "Pinterest OAuth is entirely in tack service, with aero only handling UI orchestration. The story correctly identifies tack/service/lib/handlers/api/oauth-finalize/oauth-finalize-handler.ts as the primary investigation target.",
      "discovered_at": "2026-01-13T22:14:47.268815",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice from UI through to external API",
      "example": "Story traces full path: aero UI (pinterestv5o-auth-button.tsx) \u2192 aero API routes (/connect, /callback, /finisher) \u2192 core oauth completer \u2192 tack finalize handler \u2192 Pinterest API. All components are related to the same user action.",
      "discovered_at": "2026-01-13T22:14:47.269207",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Focus on single error scenario with clear reproduction path",
      "example": "Story focuses specifically on reconnection failure ('Authorization failed') rather than bundling unrelated OAuth issues like initial connection or token refresh cron jobs.",
      "discovered_at": "2026-01-13T22:14:47.269479",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria aligned with single code change scope",
      "example": "All ACs (happy path connection, expired token redirect, already connected check, 503 error, invalid token error, feedback timing) relate to the same oauth-finalize flow and its error handling.",
      "discovered_at": "2026-01-13T22:14:47.269752",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies a single missing code path (missing function call) as the root cause with high specificity",
      "example": "Pinpointed exact file (chat.ts) and exact missing call (injectPersonalization) with line numbers",
      "discovered_at": "2026-01-13T22:14:47.270106",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within a single service boundary (aero) even though the feature chain involves multiple services",
      "example": "While brandy2 provides brand data and ghostwriter executes LLM calls, the bug is purely in aero's prompt construction - no changes needed in other services",
      "discovered_at": "2026-01-13T22:14:47.270451",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story provides comparison to working implementations for validation",
      "example": "References pinterest-title-and-description.ts as a working example to compare against, making the missing code obvious",
      "discovered_at": "2026-01-13T22:14:47.270739",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice - story covers the full user flow from input to output",
      "example": "Acceptance criteria cover happy path (brand voice applied), edge cases (special chars, empty settings), and error handling (service failures)",
      "discovered_at": "2026-01-13T22:14:47.271066",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within a single service boundary (aero) even though it mentions downstream dependencies",
      "example": "While the story mentions aero \u2192 brandy2 \u2192 ghostwriter flow, the actual fix is entirely within aero/packages/core/src/ghostwriter-labs/generations/chat.ts",
      "discovered_at": "2026-01-13T22:14:47.271688",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice: covers the single code change needed with appropriate UI feedback and error handling acceptance criteria",
      "example": "Acceptance criteria cover happy path, edge cases (casual vs professional tone), and error states - all for the same feature",
      "discovered_at": "2026-01-13T22:14:47.272054",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single service focus: All changes are confined to aero's scheduler UI components",
      "example": "Story targets date-time-field.tsx, timeslot-radio-group.tsx, and related UI components - all in aero/packages/tailwindapp/client/domains/scheduler/",
      "discovered_at": "2026-01-13T22:14:47.272382",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice: Story addresses UI display, confirmation feedback, error states, and success feedback within the same user flow",
      "example": "AC covers: (1) timezone display on schedule, (2) DST handling, (3) multi-timezone pins, (4) error when timezone fails to load, (5) mismatch error, (6) visual feedback timing",
      "discovered_at": "2026-01-13T22:14:47.272785",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Shared root cause across all acceptance criteria: All ACs relate to making timezone explicit in the scheduling UI",
      "example": "ACs 1-3 are about displaying timezone correctly, ACs 4-5 handle error cases for the same timezone display feature, AC 6 ensures feedback timing",
      "discovered_at": "2026-01-13T22:14:47.273161",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Leverages existing infrastructure: Story enhances existing timezone utilities rather than requiring new backend work",
      "example": "useTimezone hook, TimezoneDate class, and getLocalTime utility already exist and handle timezone conversions correctly",
      "discovered_at": "2026-01-13T22:14:47.273521",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group all variations of the same user journey into one story",
      "example": "This story combines the happy path (successful reconnection), expired token scenario, and error states - all part of the same 'reconnect Pinterest account' user journey",
      "discovered_at": "2026-01-13T22:24:44.246945",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep platform-specific OAuth in its respective service",
      "example": "Story correctly identifies tack as the primary service for Pinterest OAuth, not bundling with Facebook OAuth (zuck) or internal auth (gandalf)",
      "discovered_at": "2026-01-13T22:24:44.247339",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include UI feedback requirements with the backend fix",
      "example": "AC #6 (visual feedback within 3s) is properly included since it's part of the same vertical slice - the user needs to see the result of the fix",
      "discovered_at": "2026-01-13T22:24:44.247671",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Identify the exact code path and line number where the fix is needed",
      "example": "Story correctly identified chat.ts:21 as the specific location missing injectPersonalization()",
      "discovered_at": "2026-01-13T22:24:44.248051",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Compare broken implementation to working implementation for clear fix guidance",
      "example": "Story compared chat.ts to pinterest-title-and-description.ts to show the exact pattern that should be followed",
      "discovered_at": "2026-01-13T22:24:44.248407",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep all acceptance criteria focused on the single root cause",
      "example": "All 6 acceptance criteria relate specifically to brand voice in chat generation - no scope creep into other features",
      "discovered_at": "2026-01-13T22:24:44.248767",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "When a fix is in aero but uses brandy2 data, keep the story in aero since brandy2 requires no changes",
      "example": "Story correctly identifies aero as primary service while noting brandy2 is a read-only dependency via getBrandForOrg()",
      "discovered_at": "2026-01-13T22:24:44.249196",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single missing function call across a consistent pattern is ideal scoping - one root cause, one fix location",
      "example": "chat.ts is the only file out of 40 generation files missing injectPersonalization - this is a clear, atomic fix",
      "discovered_at": "2026-01-13T22:24:44.249618",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies the dependency chain (aero \u2192 brandy2 \u2192 ghostwriter) but scopes work to the single service where the bug exists",
      "example": "Though brandy2 is involved in fetching brand data, the fix is entirely in aero/chat.ts - no cross-service changes needed",
      "discovered_at": "2026-01-13T22:24:44.250209",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Pre-investigation analysis with specific code path and HIGH confidence verified by comparing to other files",
      "example": "Story cites chat.ts:21 and compares to other generation files that successfully implement brand voice - this hypothesis was confirmed by code review",
      "discovered_at": "2026-01-13T22:24:44.250640",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group all timezone display issues together since they share the same root cause (missing/inconsistent timezone visibility) and would be fixed by the same type of change (adding timezone format specifiers to display strings)",
      "example": "This story correctly bundles time picker display, confirmation toast, and error handling for timezone - all solved by enhancing display formatting in a few aero files",
      "discovered_at": "2026-01-13T22:24:44.251237",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep enhancement stories focused on a single user journey vertical slice (schedule a pin \u2192 understand the timezone)",
      "example": "All acceptance criteria follow the same user flow: user schedules pin, sees time with timezone, handles edge cases within that same flow",
      "discovered_at": "2026-01-13T22:24:44.251772",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Identify where the actual code changes will occur - this story correctly identifies aero as primary service since timezone display is frontend-only",
      "example": "Tack is mentioned in dependency chain but code evidence shows tack uses Unix timestamps and needs no changes - this avoids false cross-service complexity",
      "discovered_at": "2026-01-13T22:24:44.252316",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story focuses on a single OAuth reconnection flow with clear service boundaries (aero \u2192 tack \u2192 Pinterest API)",
      "example": "The story correctly identifies tack as the primary service and aero as the UI layer, without mixing in unrelated services like zuck (Facebook) or gandalf",
      "discovered_at": "2026-01-13T22:34:48.990545",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "All acceptance criteria relate to the same user journey: Pinterest reconnection",
      "example": "AC covers happy path (connection succeeds), edge cases (expired token, invalid token), and error states (503, network error) - all within the same reconnection flow",
      "discovered_at": "2026-01-13T22:34:48.991207",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Investigation subtasks are focused on the correct code paths identified in the dependency chain",
      "example": "Code audit targets oauth-finalize-handler.ts, log analysis for invalid_grant errors, and tracing from aero click \u2192 tack response - all aligned with the actual codebase structure",
      "discovered_at": "2026-01-13T22:34:48.991754",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Technical context correctly identifies the continuous_refresh token migration as relevant context",
      "example": "Code in oauth.ts shows Pinterest's continuous_refresh parameter and comments about the deprecation of legacy refresh tokens - story's hypothesis about token refresh issues is grounded in actual implementation",
      "discovered_at": "2026-01-13T22:34:48.992255",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single missing feature/call in one file with clear pattern to follow from existing code",
      "example": "chat.ts missing injectPersonalization that exists in 39 other generation files - easy to identify and fix by following the established pattern",
      "discovered_at": "2026-01-13T22:34:48.992782",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bug fix contained entirely within one service despite downstream dependencies",
      "example": "While ghostwriter consumes the output, the fix is 100% in aero - no cross-service coordination needed",
      "discovered_at": "2026-01-13T22:34:48.993275",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Pre-investigation analysis correctly identified the exact line number and code path",
      "example": "Story pinpointed chat.ts:21 as the location, which was verified by reading the actual code",
      "discovered_at": "2026-01-13T22:34:48.993775",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story identifies a single missing function call with clear evidence by comparing to working implementations",
      "example": "Comparing chat.ts to instagram-caption.ts reveals the exact missing .preprocess() call - this is well-scoped root cause identification",
      "discovered_at": "2026-01-13T22:34:48.994328",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Service boundary is properly contained - the fix is entirely within aero using existing brandy2 integration",
      "example": "The injectPersonalization() function already exists in aero/packages/core/src/ghostwriter-labs/processors/personalization.ts and already calls brandy2 - no new service integration required",
      "discovered_at": "2026-01-13T22:34:48.994892",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "The 'session context retention' mentioned in the problem statement is a separate concern from brand voice injection",
      "example": "The problem statement mentions 'AI does not retain context during the session' but the technical solution only addresses brand voice. Context retention would involve chat history management, which is a different code path. This could cause scope creep if developers address both issues.",
      "discovered_at": "2026-01-13T22:34:48.995472",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "The story correctly identifies the specific file and line number where the fix should be applied",
      "example": "Pre-Investigation Analysis points to chat.ts:21 as the location for adding the preprocess call - verified by code examination",
      "discovered_at": "2026-01-13T22:34:48.996043",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "All UI changes concentrated in a single service (aero) with backend using timezone-agnostic Unix timestamps",
      "example": "Timezone display is purely frontend in aero; tack stores sendAt as Unix timestamp with no timezone logic",
      "discovered_at": "2026-01-13T22:34:48.996614",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "All acceptance criteria relate to the same user problem (timezone confusion) and would be tested together",
      "example": "Happy path (clear timezone display), edge cases (DST, travel), and error handling (service down) all test timezone clarity",
      "discovered_at": "2026-01-13T22:34:48.997187",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Enhancement builds on existing infrastructure rather than requiring new service dependencies",
      "example": "Story leverages existing useTimezone hook and TimezoneDate class; only needs new UI components",
      "discovered_at": "2026-01-13T22:34:48.997715",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Story references non-existent files without clarifying they need to be created",
      "example": "Story mentions 'timezone-display.tsx' which does not exist in the codebase - should clarify this is a new component",
      "discovered_at": "2026-01-13T22:34:48.998358",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies a single vertical slice: Pinterest OAuth reconnection flow from UI through backend to external API",
      "example": "The dependency chain 'aero UI \u2192 tack (Pinterest OAuth handlers) \u2192 Pinterest API' is accurate and the code paths listed (get-oauth-response-handler.ts, oauth-finalize-handler.ts, pinterestv5/*.ts) are all within the same functional domain",
      "discovered_at": "2026-01-13T22:45:43.320638",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Service boundaries are respected - Pinterest OAuth lives in tack, UI/session management in aero",
      "example": "The story correctly identifies tack as the primary service and doesn't bundle unrelated services like zuck (Facebook) or unrelated functionality",
      "discovered_at": "2026-01-13T22:45:43.321199",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Investigation subtasks trace a single code path rather than multiple unrelated areas",
      "example": "Subtask 3 correctly traces from aero callback route \u2192 tack oauth-finalize-handler, which matches the actual code dependency (aero's TailwindPinterestOauthCompleter calls tack.finalizeOauth())",
      "discovered_at": "2026-01-13T22:45:43.321950",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single root cause with surgical fix: Story correctly identifies one missing function call as the root cause, verified by code comparison with working implementations.",
      "example": "chat.ts is missing `.preprocess((input) => injectPersonalization(input))` that exists in pinterest-title-and-description.ts and 38 other files.",
      "discovered_at": "2026-01-13T22:45:43.322618",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Stays within single service boundary: The fix is entirely within aero's ghostwriter-labs module. Even though brandy2 is called for brand data, that integration already exists and works correctly - no changes needed there.",
      "example": "Fix requires editing only aero/packages/core/src/ghostwriter-labs/generations/chat.ts - no cross-service changes.",
      "discovered_at": "2026-01-13T22:45:43.323366",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice: Story covers the full path from user input (chat prompt) through processing (personalization injection) to output (brand-voice-aware response).",
      "example": "Acceptance criteria cover happy path (brand voice applied), edge cases (different voice types), and error handling (brandy2 failures, ghostwriter unavailability).",
      "discovered_at": "2026-01-13T22:45:43.324004",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Pre-investigation with code evidence: Story includes specific file paths, line numbers, and comparison to working implementations - reducing investigation time.",
      "example": "Hypothesis points to chat.ts:21 missing injectPersonalization call, verified by comparing to pinterest-title-and-description.ts:30.",
      "discovered_at": "2026-01-13T22:45:43.324626",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story targets a single missing function call that exists in peer files but was omitted from one specific file",
      "example": "The story correctly identifies that injectPersonalization() is missing ONLY from chat.ts while present in 39+ other generation files in the same directory",
      "discovered_at": "2026-01-13T22:45:43.326217",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within the aero service boundary - no changes needed to downstream services",
      "example": "The fix is entirely in aero's chat.ts file. The ghostwriter service already supports personalization via the prompt content - aero just needs to inject it",
      "discovered_at": "2026-01-13T22:45:43.326815",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story provides complete vertical slice - single code change fixes the entire user-facing problem",
      "example": "Adding .preprocess((input) => injectPersonalization(input)) to chat.ts will automatically fetch brand data from brandy2 and include it in the prompt",
      "discovered_at": "2026-01-13T22:45:43.327371",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Clear code path tracing with specific line numbers that can be verified",
      "example": "Story correctly identifies chat.ts:21 as the location where the fix would go (between checkAvailableCredits and .prompt())",
      "discovered_at": "2026-01-13T22:45:43.327887",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group UI display consistency changes together when they address the same user confusion point",
      "example": "All timezone clarity improvements (timeslot display, confirmation toast, custom picker) are in aero UI layer and relate to the same user experience gap",
      "discovered_at": "2026-01-13T22:45:43.328443",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep backend out of scope when timestamps are already timezone-agnostic",
      "example": "tack stores sendAt as Unix timestamp (seconds since epoch) which is inherently timezone-independent. Only UI formatting in aero needs to change, not tack's scheduling logic.",
      "discovered_at": "2026-01-13T22:45:43.328949",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Avoid referencing non-existent files in story documentation - verify paths before writing",
      "example": "Story references 'timezone-display.tsx' which doesn't exist. The actual components are timeslot-radio-group.tsx, date-time-picker-with-timeslots-provider.tsx, and use-scheduler-toasts.ts",
      "discovered_at": "2026-01-13T22:45:43.329477",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Don't overstate baseline metrics without data - '20% timezone failures' is likely inflated since tack uses timezone-agnostic Unix timestamps",
      "example": "Success metrics claim '20% of scheduled pins fail due to timezone errors' but tack's Post.sendAt is UnixTimestamp type - timezone conversion happens in UI only",
      "discovered_at": "2026-01-13T22:45:43.330149",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story focuses on a single platform OAuth flow (Pinterest only) without mixing in Facebook/Instagram OAuth from zuck service",
      "example": "All code paths mentioned are in tack (Pinterest OAuth) and aero (frontend), not mixing with zuck (Facebook/Instagram OAuth)",
      "discovered_at": "2026-01-13T22:54:21.063209",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies the vertical slice: UI (aero) \u2192 OAuth handlers (tack) \u2192 Pinterest API, without bundling unrelated services",
      "example": "Dependency chain correctly identifies aero UI \u2192 tack (OAuth handlers) \u2192 Pinterest API, with appropriate files like oauth-finalize-handler.ts and pinterest-oauth-completer.ts",
      "discovered_at": "2026-01-13T22:54:21.064266",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria cover a complete user journey: happy path, edge cases (expired token, API down), and error handling - all within the same OAuth reconnection flow",
      "example": "Criteria range from successful connection to token expiry handling to Pinterest API unavailability - all scenarios occur in the same code path",
      "discovered_at": "2026-01-13T22:54:21.065101",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Investigation subtasks are properly scoped to examine only relevant code paths in tack's OAuth finalization and aero's OAuth completion",
      "example": "Code audit targets oauth-finalize-handler.ts; trace follows aero UI to tack handlers - no unnecessary exploration of unrelated services",
      "discovered_at": "2026-01-13T22:54:21.065770",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single service, single file change with clearly identified root cause",
      "example": "This story correctly identifies that the fix is isolated to aero/packages/core/src/ghostwriter-labs/generations/chat.ts - adding one preprocessor call",
      "discovered_at": "2026-01-13T22:54:21.066317",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story hypothesis was verified against actual code structure",
      "example": "The Pre-Investigation Analysis correctly identified the missing injectPersonalization() call and the exact code path. Comparing chat.ts to pinterest-title-and-description.ts confirms the pattern.",
      "discovered_at": "2026-01-13T22:54:21.066847",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice - from user action to data layer",
      "example": "The story covers the full flow: User inputs prompt \u2192 chat.ts \u2192 injectPersonalization \u2192 brandy2 \u2192 brand settings \u2192 personalized prompt \u2192 LLM \u2192 response",
      "discovered_at": "2026-01-13T22:54:21.067407",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria align with the single root cause",
      "example": "All acceptance criteria relate to brand voice being applied to chat responses - no scope creep into unrelated features",
      "discovered_at": "2026-01-13T22:54:21.067951",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story identifies a single, verifiable root cause with code path evidence",
      "example": "Story correctly pinpoints chat.ts:21 as missing the injectPersonalization call, with comparison to other files as evidence",
      "discovered_at": "2026-01-13T22:54:21.068539",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Enhancement uses existing proven infrastructure rather than building new",
      "example": "The fix leverages existing personalization.ts processor and brandy2 integration that already works for 39 other generation types",
      "discovered_at": "2026-01-13T22:54:21.069100",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single service boundary with clear dependency chain",
      "example": "All changes are in aero/packages/core/src/ghostwriter-labs/; brandy2 integration is already working",
      "discovered_at": "2026-01-13T22:54:21.069685",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Focus on a single user pain point with clear vertical slice through UI components",
      "example": "Story focuses on 'timezone confusion' which manifests in multiple related UI locations (date picker, timeslots, confirmation toast) - all fixable with consistent timezone display additions in the same aero UI layer",
      "discovered_at": "2026-01-13T22:54:21.070384",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include related error scenarios that would be addressed as part of the same change",
      "example": "Timezone unavailable error and invalid timezone error are both natural edge cases that would be handled when adding timezone display logic - they share the same code path",
      "discovered_at": "2026-01-13T22:54:21.071022",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Correctly scope to a single service when changes are UI-only",
      "example": "Story correctly identifies aero as primary service and does NOT include tack backend changes - the timezone display is purely a frontend concern since TimezoneDate already handles conversions correctly",
      "discovered_at": "2026-01-13T22:54:21.071598",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include DST edge case when timezone handling is the core issue",
      "example": "The DST spring-forward acceptance criterion (AC #3) is directly related to timezone display clarity - users need to understand that times are in THEIR timezone even during DST transitions. This is the same TimezoneDate code path.",
      "discovered_at": "2026-01-13T22:54:21.072220",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group all error handling scenarios for the same flow in one story",
      "example": "This story includes happy path, edge cases (expired token, API down), and error cases (invalid grant, timeout) - all for Pinterest OAuth reconnection. These share the same code path through oauth-finalize-handler.ts",
      "discovered_at": "2026-01-13T23:02:32.313669",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep OAuth flows service-specific - Pinterest OAuth stays in tack, not mixed with Facebook/Instagram in zuck",
      "example": "Story correctly focuses on tack for Pinterest OAuth without bundling unrelated Facebook OAuth issues from zuck",
      "discovered_at": "2026-01-13T23:02:32.314519",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include the minimal necessary services in the dependency chain",
      "example": "Story includes aero (UI) and tack (Pinterest handler) which are both required for this flow, but doesn't unnecessarily include gandalf since tack handles Pinterest token validation directly",
      "discovered_at": "2026-01-13T23:02:32.315120",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Identify specific code paths rather than broad service areas",
      "example": "Story pinpoints oauth-finalize-handler.ts lines and specific Pinterest client files rather than saying 'fix something in tack'",
      "discovered_at": "2026-01-13T23:02:32.315730",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single root cause with clear code path identified. The story correctly identifies that the fix is localized to one file in one service.",
      "example": "The missing injectPersonalization call in chat.ts:21 is the only change needed. The story doesn't bundle unrelated issues.",
      "discovered_at": "2026-01-13T23:02:32.316579",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Proper vertical slice - the fix touches the preprocessing layer in aero's generation config, which is a complete functional unit.",
      "example": "The story correctly identifies aero as the primary service. The ghostwriter service receives prompts from aero and doesn't need modification.",
      "discovered_at": "2026-01-13T23:02:32.317376",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Accurate dependency chain documentation. The story correctly maps aero \u2192 brandy2 for brand data and aero \u2192 ghostwriter for generation.",
      "example": "Technical context states 'aero fetches brand settings from brandy2, builds a personalized prompt, and sends it to ghostwriter' - this matches the code in personalization.ts which calls getBrandForOrg.",
      "discovered_at": "2026-01-13T23:02:32.318302",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Specific code path with line numbers matches actual code structure.",
      "example": "The story references chat.ts:21 - the actual file shows line 21 is indeed where .prompt() is called, and the injectPersonalization preprocess should be added before it.",
      "discovered_at": "2026-01-13T23:02:32.318936",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single root cause with clear, localized fix - ideal story scoping",
      "example": "This story identifies one missing function call (.preprocess((input) => injectPersonalization(input))) in one file (chat.ts) that causes the entire reported issue. The fix is a 1-line addition.",
      "discovered_at": "2026-01-13T23:02:32.319594",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within single service boundary - no cross-service complexity",
      "example": "All changes are confined to aero/packages/core/src/ghostwriter-labs/. The brandy2 integration already works correctly (used by 39 other generation files). No changes needed to brandy2 or ghostwriter services.",
      "discovered_at": "2026-01-13T23:02:32.320234",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Pre-investigation hypothesis was verified against actual code",
      "example": "Story hypothesized missing injectPersonalization() at chat.ts:21 with HIGH confidence. Code examination confirmed this exactly - the call exists at line 30 in instagram-caption.ts, line 22 in facebook-post.ts, etc., but is absent from chat.ts.",
      "discovered_at": "2026-01-13T23:02:32.320835",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Clean vertical slice - complete feature path from input to output",
      "example": "The story covers the complete path: user input \u2192 chat.ts preprocessing \u2192 personalization injection \u2192 LLM prompt \u2192 output. No horizontal layer isolation.",
      "discovered_at": "2026-01-13T23:02:32.321494",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "All changes are within a single service (aero) and address the same UX inconsistency",
      "example": "Timezone display improvements needed in timeslot-radio-group.tsx, use-scheduler-toasts.ts, and date-time-picker.tsx are all in aero's scheduler domain",
      "discovered_at": "2026-01-13T23:02:32.322222",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies a vertical slice from user action to confirmation feedback",
      "example": "The story traces the complete flow: user selects time \u2192 views in picker \u2192 sees confirmation toast, ensuring end-to-end consistency",
      "discovered_at": "2026-01-13T23:02:32.322910",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly notes tack dependency but scope is limited to aero UI changes",
      "example": "While tack handles the actual scheduling, this story correctly focuses on aero UI clarity - no tack code changes needed since the backend already stores and handles timezone correctly",
      "discovered_at": "2026-01-13T23:02:32.323614",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story focuses on a single platform's OAuth flow (Pinterest only) rather than bundling multiple platform reconnection issues",
      "example": "Story is scoped to tack (Pinterest) service only, not mixing with zuck (Facebook) or gandalf (Google) OAuth flows",
      "discovered_at": "2026-01-13T23:10:38.855973",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice from UI to backend - includes error messaging improvements AND backend token validation fixes",
      "example": "Covers aero UI error pages (error.tsx), aero OAuth completer (pinterest-oauth-completer.ts), and tack token handlers (oauth-finalize-handler.ts, access-token-refresh-handler.ts)",
      "discovered_at": "2026-01-13T23:10:38.856768",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Investigation subtasks correctly point to the actual code paths where the issue likely exists",
      "example": "Story correctly identifies tack/service/lib/handlers/api/oauth-finalize/oauth-finalize-handler.ts and mentions examining Pinterest API clients",
      "discovered_at": "2026-01-13T23:10:38.857510",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story identifies specific error patterns to search for that align with actual code error handling",
      "example": "Story mentions 'invalid_grant' and 'Authorization failed' which maps to base.ts:59 case 3 handling and test fixtures",
      "discovered_at": "2026-01-13T23:10:38.858271",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story targets a single missing function call with clear before/after code comparison",
      "example": "Comparing chat.ts (missing injectPersonalization) with pinterest-title-and-description.ts (has injectPersonalization) makes the fix obvious",
      "discovered_at": "2026-01-13T23:10:38.858986",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies that the fix is in aero, not in the ghostwriter service - personalization is injected before sending to ghostwriter",
      "example": "The dependency chain aero \u2192 ghostwriter is read-only from ghostwriter's perspective; no changes needed there",
      "discovered_at": "2026-01-13T23:10:38.859838",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single root cause with single fix location - ideal vertical slice",
      "example": "All 39 other generation files have the pattern, only chat.ts is missing it - this is a consistency bug, not a feature request",
      "discovered_at": "2026-01-13T23:10:38.860544",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story provides exact line number and code path for verification",
      "example": "Pre-investigation hypothesis points to chat.ts:21 - verified that .prompt() is at line 21 and personalization should be added at line 20",
      "discovered_at": "2026-01-13T23:10:38.861228",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single root cause with code-level verification: The story correctly identifies that one missing function call causes all reported symptoms",
      "example": "Story pinpoints chat.ts:21 as missing injectPersonalization(), and code examination confirms 39/40 files have it, only chat.ts is missing it",
      "discovered_at": "2026-01-13T23:10:38.862094",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Minimal blast radius: Fix is contained to a single file in a single service with no ripple effects",
      "example": "Adding .preprocess((input) => injectPersonalization(input)) to chat.ts requires no changes to brandy2, ghostwriter service, or other aero files",
      "discovered_at": "2026-01-13T23:10:38.862889",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Existing infrastructure reuse: The fix uses an already-working pattern from peer files rather than inventing new architecture",
      "example": "The injectPersonalization() function already exists in personalization.ts and works correctly in 39 other generation files - this is a copy-paste pattern fix",
      "discovered_at": "2026-01-13T23:10:38.863695",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Clear acceptance criteria tied to the single change: All 6 acceptance criteria directly relate to brand voice appearing in chat output",
      "example": "AC1 tests brand voice in output, AC2 tests brand switching, AC3 tests special chars, AC4-5 test error handling for brand data - all unified around the personalization feature",
      "discovered_at": "2026-01-13T23:10:38.864542",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group all timezone display enhancements together since they share the same UI layer (aero) and address the same user confusion",
      "example": "Combining SmartSchedule timezone display, custom date picker timezone display, and confirmation messaging in one story - all modify aero scheduler components",
      "discovered_at": "2026-01-13T23:10:38.865407",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep backend-agnostic UI enhancements in a single story when they don't require backend changes",
      "example": "The timezone display enhancement doesn't require tack changes - tack already handles Unix timestamps correctly. The story correctly identifies this as aero-only work",
      "discovered_at": "2026-01-13T23:10:38.866191",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include error handling for the specific feature being enhanced, not general error handling",
      "example": "Including 'timezone data fails to load' error case is appropriate since it directly relates to the timezone display enhancement being added",
      "discovered_at": "2026-01-13T23:10:38.866952",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies a single OAuth flow failure without bundling unrelated platform issues",
      "example": "Story focuses on Pinterest OAuth reconnection in tack/aero without mixing in Facebook/Instagram OAuth (which would be in zuck service)",
      "discovered_at": "2026-01-13T23:18:17.381363",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria align with the identified code paths",
      "example": "AC mentions oauth-finalize-handler.ts for token handling, which is exactly where the finalize logic lives (lines 29-118)",
      "discovered_at": "2026-01-13T23:18:17.382522",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Error scenarios are realistic based on actual code structure",
      "example": "The 'invalid_grant' error pattern matches what would happen in oauth.ts if Pinterest rejects a stale refresh token during reconnection",
      "discovered_at": "2026-01-13T23:18:17.383261",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single root cause with surgical fix: One missing function call in one file that causes one specific user-facing problem.",
      "example": "This story identifies that chat.ts is missing injectPersonalization() while all 39 other generation files have it. The fix is adding one line: `.preprocess((input) => injectPersonalization(input))`",
      "discovered_at": "2026-01-13T23:18:17.384174",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Stays within service boundaries: The entire fix is contained within aero, even though the story involves brand data from brandy2.",
      "example": "The getBrandForOrg() function in aero/packages/core/src/brands/server.ts already handles the brandy2 integration. No changes to brandy2 or ghostwriter services are needed.",
      "discovered_at": "2026-01-13T23:18:17.385100",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Clean vertical slice: The story follows a complete vertical from user input \u2192 preprocessing \u2192 prompt generation \u2192 AI response.",
      "example": "User input in chat \u2192 injectPersonalization fetches brand settings \u2192 personalization info added to prompt \u2192 ghostwriter generates personalized response",
      "discovered_at": "2026-01-13T23:18:17.386191",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Leverages existing patterns: The fix reuses existing infrastructure rather than requiring new code.",
      "example": "The injectPersonalization function, getBrandForOrg, and the entire preprocessing chain already exist and work correctly for 39 other generation types.",
      "discovered_at": "2026-01-13T23:18:17.387008",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single file, single fix - all acceptance criteria test variations of the same atomic change",
      "example": "Adding one line (.preprocess((input) => injectPersonalization(input))) to chat.ts addresses all stated issues: robotic content, ignored brand preferences, and lack of personalization",
      "discovered_at": "2026-01-13T23:18:17.387868",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Read-only dependencies don't require service bundling - when a service only consumes data from another service (no writes), they shouldn't be bundled",
      "example": "brandy2 is correctly listed as a dependency (provides brand data), but no changes are required there. The story stays focused on aero where the fix lives.",
      "discovered_at": "2026-01-13T23:18:17.388846",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Precise code location hypothesis with verifiable evidence - story identifies exact file:line and provides comparison evidence",
      "example": "Hypothesis correctly identified chat.ts:21 as missing personalization. Verified by comparing with 39 other files that all have the call.",
      "discovered_at": "2026-01-13T23:18:17.389729",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Error handling criteria for the same code path - edge cases and error states all relate to the single feature being added",
      "example": "AC4 (brand data unavailable) and AC5 (brand settings not configured) are error scenarios for the personalization injection, not separate features",
      "discovered_at": "2026-01-13T23:18:17.390730",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story focuses on a single vertical slice: UI clarity for timezone display in the Pinterest scheduler",
      "example": "All acceptance criteria relate to displaying/confirming timezone in the scheduler UI components within aero",
      "discovered_at": "2026-01-13T23:18:17.391623",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies that changes are isolated to frontend (aero) with no backend changes needed",
      "example": "Story identifies exact file paths and confirms tack scheduling logic doesn't need modification - verified by code inspection showing tack has no timezone handling",
      "discovered_at": "2026-01-13T23:18:17.392560",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Edge cases (DST, travel timezone change) are appropriate scope expansions of the same root cause",
      "example": "DST handling and browser timezone detection both relate to ensuring displayed timezone accurately reflects when the pin will publish - same UX problem",
      "discovered_at": "2026-01-13T23:18:17.393454",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bundle all layers of a single user journey into one story",
      "example": "This story includes UI (error.tsx, connect button), API routes (connect/callback/finisher), and backend handler (oauth-finalize-handler.ts) for the complete Pinterest reconnection flow",
      "discovered_at": "2026-01-13T23:28:49.594615",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Scope to platform-specific service when fixing platform OAuth issues",
      "example": "Story correctly focuses on tack (Pinterest service) and aero (UI), not involving zuck (Facebook) or gandalf (general auth) services",
      "discovered_at": "2026-01-13T23:28:49.595476",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include specific error patterns and log queries that point to the same root cause",
      "example": "Story specifies 'invalid_grant' in tack logs and 'ECONNREFUSED' as related error patterns, both indicating token validation issues in the same code path",
      "discovered_at": "2026-01-13T23:28:49.596358",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include code paths that share a dependency chain",
      "example": "All code paths share the dependency: aero UI \u2192 tack (oauth handlers) \u2192 Pinterest API, making them part of a single vertical slice",
      "discovered_at": "2026-01-13T23:28:49.597119",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single root cause identified through code comparison - finding a missing function call that exists in all sibling files",
      "example": "Story correctly identified that chat.ts is missing injectPersonalization() while 39 other generation files have it",
      "discovered_at": "2026-01-13T23:28:49.598122",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Stay within service boundaries when the fix is isolated to a single service",
      "example": "Story correctly scopes to aero only, even though brandy2 is called - the integration point (personalization.ts) already exists and works",
      "discovered_at": "2026-01-13T23:28:49.598993",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Provide exact file paths and line numbers for surgical bug fixes",
      "example": "Story pinpoints chat.ts:21 as the exact location where the preprocessor should be added",
      "discovered_at": "2026-01-13T23:28:49.599813",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Reference working implementations as the pattern to follow",
      "example": "Story uses pinterest-title-and-description.ts as the reference implementation showing the correct preprocessor chain",
      "discovered_at": "2026-01-13T23:28:49.600577",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story identifies a single missing feature (personalization call) with clear code path evidence and specific line numbers",
      "example": "chat.ts:21 is missing .preprocess((input) => injectPersonalization(input)) - verified by comparing to 39 other generation files",
      "discovered_at": "2026-01-13T23:28:49.601529",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within a single service boundary (aero) for the code change while documenting existing cross-service dependencies",
      "example": "Fix is entirely in aero; brandy2 is already called by other generation paths and requires no changes",
      "discovered_at": "2026-01-13T23:28:49.602771",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group UI clarity improvements that share the same root cause and code paths",
      "example": "ACs 1-4 all address 'timezone ambiguity' in aero scheduler components - these belong together",
      "discovered_at": "2026-01-13T23:28:49.603660",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Do not bundle external API error handling with unrelated UI clarity enhancements",
      "example": "AC#5 (Pinterest API 503 handling) is about error resilience in tack\u2192Pinterest flow, not timezone display - it should be a separate story",
      "discovered_at": "2026-01-13T23:28:49.604522",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep stories within a single service when the feature is self-contained",
      "example": "Timezone display is entirely in aero's scheduler domain - no need to involve tack for ACs 1-4",
      "discovered_at": "2026-01-13T23:28:49.605368",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Avoid mixing 'happy path enhancements' with 'error path handling' in the same story",
      "example": "ACs 1-4 improve the happy path (clearer scheduling), while AC#5 handles failure scenarios - different testing strategies, different code paths",
      "discovered_at": "2026-01-13T23:28:49.606270",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story follows the natural service dependency chain without introducing unrelated services",
      "example": "Story stays within aero \u2192 tack \u2192 Pinterest API chain. Does not bundle Facebook/zuck OAuth or Instagram auth issues.",
      "discovered_at": "2026-01-13T23:39:12.823411",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "All acceptance criteria trace to the same code path",
      "example": "AC #1 (happy path), AC #2 (expired token), AC #4-5 (error handling) all flow through the same oauth.ts \u2192 base.ts \u2192 callback/route.ts pipeline.",
      "discovered_at": "2026-01-13T23:39:12.824468",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Technical context accurately identifies the affected files and services",
      "example": "Story correctly identifies tack/service/lib/handlers/api/oauth/pinterest/ path (though actual file is oauth-finalize-handler.ts, not callback-handler.ts) and the Pinterest API client interactions.",
      "discovered_at": "2026-01-13T23:39:12.825903",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story is a complete vertical slice from UI to data layer",
      "example": "Covers UI (reconnect button, error display), API routes (connect/callback), business logic (TailwindPinterestOauthCompleter), and external service integration (Pinterest API via tack).",
      "discovered_at": "2026-01-13T23:39:12.826824",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story focuses on a single missing function call in one file with clear before/after comparison",
      "example": "chat.ts is missing injectPersonalization() that all other 36 generation files have - this is a clean, isolated bug",
      "discovered_at": "2026-01-13T23:39:12.827839",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Correctly identified that personalization lives in aero, not ghostwriter, keeping the scope to one service",
      "example": "The story correctly scopes to aero/packages/core/src/ghostwriter-labs/ and does not require ghostwriter service changes",
      "discovered_at": "2026-01-13T23:39:12.828872",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Provided exact code path with line number for quick verification",
      "example": "Pre-Investigation Analysis correctly identified chat.ts:21 as the location where injectPersonalization should be added (actually between lines 20-21 in current code)",
      "discovered_at": "2026-01-13T23:39:12.829747",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Included comparison file for reference on correct implementation",
      "example": "Referenced pinterest-title-and-description.ts which correctly includes injectPersonalization at line 30",
      "discovered_at": "2026-01-13T23:39:12.830569",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story identifies a specific code location with a clear pattern violation that can be verified by comparing to working implementations",
      "example": "Story compares chat.ts (missing injectPersonalization) to instagram-caption.ts, facebook-post.ts (which have it), making the fix obvious",
      "discovered_at": "2026-01-13T23:39:12.831676",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single service scope with existing infrastructure - no new integrations needed",
      "example": "personalization.ts already exists and handles brandy2 communication; only need to wire it into chat.ts",
      "discovered_at": "2026-01-13T23:39:12.832584",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group all aspects of a single UX clarity improvement together - timezone display, validation, error handling, and feedback all serve the same user goal",
      "example": "This story bundles timezone confirmation, DST handling, and error states because they all address 'when will my pin publish' clarity",
      "discovered_at": "2026-01-13T23:39:12.834655",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep UI enhancement stories within the frontend service when no backend logic changes are needed",
      "example": "Story correctly scopes to aero only since timezone data flow already works - only display enhancement needed",
      "discovered_at": "2026-01-13T23:39:12.835661",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include edge cases (DST, timezone travel) in the same story when they affect the same component code paths",
      "example": "DST spring-forward handling uses the same getLocalTime() and format() utilities as normal timezone display",
      "discovered_at": "2026-01-13T23:39:12.837306",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story focuses on a single user journey (reconnect Pinterest account) spanning multiple services that legitimately need to collaborate",
      "example": "aero (UI/routing) \u2192 tack (Pinterest OAuth handlers) \u2192 Pinterest API is the correct architectural separation for this OAuth flow",
      "discovered_at": "2026-01-13T23:49:36.965175",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within Pinterest OAuth scope and doesn't bundle unrelated OAuth providers",
      "example": "Only tack (Pinterest) is involved, not zuck (Facebook) or other social services - this is correct since they have different OAuth implementations",
      "discovered_at": "2026-01-13T23:49:36.966280",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Story references file paths that don't exist in the actual codebase, which could mislead developers",
      "example": "References 'tack/service/lib/handlers/api/oauth/pinterest/callback/oauth-callback-handler.ts' but this file doesn't exist - actual handlers are in get-oauth-response/ and oauth-finalize/ directories",
      "discovered_at": "2026-01-13T23:49:36.967309",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "All acceptance criteria relate to the same user flow and would be fixed by resolving the OAuth callback issue",
      "example": "Happy path (successful connect), edge cases (expired token, already connected), and error cases (503, invalid_grant) all trace to the same code path in tack's OAuth handlers",
      "discovered_at": "2026-01-13T23:49:36.968405",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single missing function call across consistent codebase pattern makes for an ideal vertical slice",
      "example": "chat.ts is the only file missing injectPersonalization() - comparing it to 34 sibling files that have it makes the bug obvious and the fix trivial",
      "discovered_at": "2026-01-13T23:49:36.969420",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within a single service boundary even when multiple services are involved in the data flow",
      "example": "Although brand data comes from brandy2, the bug and fix are entirely in aero. The story correctly identifies aero as the primary service without unnecessarily pulling in brandy2 changes",
      "discovered_at": "2026-01-13T23:49:36.970450",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Pre-investigation analysis with specific code path hypothesis reduces investigation time",
      "example": "Story correctly identified chat.ts:21 as the location where injectPersonalization should be added, which was verified by code examination",
      "discovered_at": "2026-01-13T23:49:36.971326",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story focuses on a single missing function call that affects a single feature (chat personalization)",
      "example": "The story correctly identifies chat.ts:21 as the specific location where injectPersonalization() needs to be added",
      "discovered_at": "2026-01-13T23:49:36.972263",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within a single service boundary (aero) even though brandy2 is involved downstream",
      "example": "The brand data fetching from brandy2 is already implemented in brands/server.ts - no changes needed there",
      "discovered_at": "2026-01-13T23:49:36.973179",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice: the fix addresses UI \u2192 logic \u2192 data flow entirely within existing infrastructure",
      "example": "User enters prompt \u2192 chat.ts processes it \u2192 injectPersonalization() fetches brand from brandy2 \u2192 personalized prompt sent to LLM",
      "discovered_at": "2026-01-13T23:49:36.974303",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Hypothesis is verifiable by code comparison with working implementations",
      "example": "Comparing chat.ts with instagram-caption.ts, facebook-post.ts, and text.ts clearly shows the missing preprocessor",
      "discovered_at": "2026-01-13T23:49:36.975095",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Bundling unrelated features with the main theme. Conflict detection for scheduling collisions has nothing to do with timezone clarity.",
      "example": "Acceptance criteria #5 'Given a user schedules a pin for a time that conflicts with another scheduled pin' is a separate scheduling feature, not a timezone clarity improvement.",
      "discovered_at": "2026-01-13T23:49:36.976043",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Mixing frontend UI concerns with backend scheduling logic when story claims single service ownership.",
      "example": "Story claims 'Primary Service: aero' but acceptance criteria #3 (DST handling with Unix epoch verification) requires tack backend changes.",
      "discovered_at": "2026-01-13T23:49:36.976912",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Clear identification of related UI components that share the same root cause (missing timezone labels).",
      "example": "The core timezone display improvements (confirmation message, success toast, custom picker) all need the same type of fix: adding timezone labels to existing UI elements.",
      "discovered_at": "2026-01-13T23:49:36.977800",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Referencing files that don't exist in stated paths. The story lists 'select-time-zone-section.tsx' as being in scheduler domain but it's in smart-schedule domain.",
      "example": "Story says file is at 'aero/packages/tailwindapp/client/domains/scheduler/components/select-time-zone-section.tsx' but it's actually at 'aero/packages/tailwindapp/client/domains/smart-schedule/components/select-time-zone-section.tsx'",
      "discovered_at": "2026-01-13T23:49:36.978841",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep all OAuth-related issues for a single platform (Pinterest) in one story since they share the same code path through tack's OAuth handlers",
      "example": "This story correctly bundles token expiration handling, API error handling, and reconnection logic since they all flow through get-oauth-response-handler.ts and oauth-finalize-handler.ts",
      "discovered_at": "2026-01-14T00:00:08.479702",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include UI feedback components (success/error pages) in the same story as the backend fix when they form a complete vertical slice",
      "example": "Story includes both tack OAuth handlers and aero's error.tsx/success.tsx pages which together form the complete user experience",
      "discovered_at": "2026-01-14T00:00:08.481169",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Avoid including acceptance criteria for functionality that already exists without clarifying it's a regression test",
      "example": "AC #3 (multiple Pinterest accounts selection) appears to already be implemented in callback/route.ts lines 68-119 - should clarify if this is verifying existing behavior or fixing a regression",
      "discovered_at": "2026-01-14T00:00:08.482299",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Reference specific file paths in technical context to enable faster investigation",
      "example": "Story correctly identifies get-oauth-response-handler.ts and oauth-finalize-handler.ts as key files to examine",
      "discovered_at": "2026-01-14T00:00:08.483354",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story identifies a single, specific code defect with clear evidence",
      "example": "The story correctly identifies the missing injectPersonalization call at line 21 of chat.ts and provides comparison to pinterest-title-and-description.ts as evidence",
      "discovered_at": "2026-01-14T00:00:08.484372",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within a single service boundary with existing infrastructure",
      "example": "The fix is entirely within aero - the personalization processor and brand data fetching already exist and work. No changes needed to brandy2 or ghostwriter services.",
      "discovered_at": "2026-01-14T00:00:08.485400",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story represents a complete vertical slice - the UI behavior change (personalized chat responses) is enabled by a single code change",
      "example": "Adding one preprocessor call enables brand voice in chat without touching UI code, database schema, or external services",
      "discovered_at": "2026-01-14T00:00:08.486698",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story identifies a single missing function call that explains all symptoms",
      "example": "All user complaints (robotic output, ignores preferences, wrong tone) stem from the single missing injectPersonalization() call in chat.ts",
      "discovered_at": "2026-01-14T00:00:08.488290",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies the service boundary - changes are localized to aero",
      "example": "The personalization injection happens in aero before calling ghostwriter. Ghostwriter just processes the enriched prompt - no ghostwriter changes needed.",
      "discovered_at": "2026-01-14T00:00:08.489344",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story provides specific code paths with line numbers that are accurate",
      "example": "The story mentions chat.ts:21 as the code path to examine - the actual missing call would go after line 20 (checkAvailableCredits) and before line 21 (.prompt)",
      "discovered_at": "2026-01-14T00:00:08.490416",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story provides comparison point with working implementations",
      "example": "The story correctly notes that other generation files implement injectPersonalization() - code audit confirms 39/40 files have it",
      "discovered_at": "2026-01-14T00:00:08.491360",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies that timezone display is purely a frontend concern in aero, even though scheduling involves tack for backend processing",
      "example": "The story references aero components only, and code examination confirms tack stores only Unix timestamps with no timezone logic - timezone display is 100% aero's responsibility",
      "discovered_at": "2026-01-14T00:00:08.492685",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "All acceptance criteria can be addressed by modifying a small set of related components that share the same context (DateTimePickerWithTimeslotsProvider passes timezone through)",
      "example": "The timezone flows from user.timezone \u2192 DateTimePickerWithTimeslotsProvider \u2192 TimeslotRadioGroup/DateTimePicker, and confirmation flows use useUser().userInfo?.timezone - all in the same domain",
      "discovered_at": "2026-01-14T00:00:08.494068",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story bundles related error states (timezone unavailable, past scheduling) that would naturally be handled together in the same validation/display layer",
      "example": "Both error conditions relate to time validation in the scheduler UI and would be implemented in the same date-time-field.tsx or confirmation components",
      "discovered_at": "2026-01-14T00:00:08.495376",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story focuses on a single platform's OAuth flow (Pinterest only), respecting the service architecture where tack handles Pinterest and zuck handles Facebook",
      "example": "All acceptance criteria relate to Pinterest OAuth reconnection - no mixing with Facebook reconnection or other platforms",
      "discovered_at": "2026-01-14T00:09:31.709233",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice from UI through backend with clear service boundaries",
      "example": "Story covers: UI button \u2192 aero API \u2192 tack OAuth handlers \u2192 token storage \u2192 callback handling \u2192 success/error feedback. Each service has a defined responsibility.",
      "discovered_at": "2026-01-14T00:09:31.710402",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Investigation subtasks align with the dependency chain and target specific files in the correct services",
      "example": "Code paths to examine reference tack/service/lib/handlers/api/get-oauth-response and oauth-finalize-handler.ts - both are in tack where Pinterest OAuth lives",
      "discovered_at": "2026-01-14T00:09:31.711637",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria test the same feature from different angles (happy path, edge cases, errors) rather than mixing unrelated features",
      "example": "All 6 ACs test variations of the Pinterest connection flow: success, expired token, multiple accounts, API unavailable, invalid credentials, feedback timing",
      "discovered_at": "2026-01-14T00:09:31.713008",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single file fix with clear root cause - story correctly identifies exact file and line number where the missing code should be added",
      "example": "Story pinpoints chat.ts:21 as missing injectPersonalization() and provides comparison file (pinterest-title-and-description.ts) for reference",
      "discovered_at": "2026-01-14T00:09:31.714485",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Stays within service boundary - all changes are contained within aero/packages/core/src/ghostwriter-labs/",
      "example": "Fix only touches aero service even though ghostwriter is the downstream consumer - correctly identifies that aero builds the personalized prompt before sending to ghostwriter",
      "discovered_at": "2026-01-14T00:09:31.715736",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice - covers UI feedback, error handling, and the core fix",
      "example": "Acceptance criteria include happy path (brand voice applied), edge cases (special characters, multiple requests), and error cases (missing brand settings, API failures)",
      "discovered_at": "2026-01-14T00:09:31.716926",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single missing function call causing consistent behavior across all chat outputs - all symptoms trace to one code path",
      "example": "All user complaints (robotic tone, ignores preferences, too salesy) are caused by one missing line: injectPersonalization() in chat.ts line 21",
      "discovered_at": "2026-01-14T00:09:31.718221",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Enhancement uses existing infrastructure - no new services or APIs needed",
      "example": "injectPersonalization() already exists and works in 39 other generation files; getBrandForOrg() already integrated with brandy2",
      "discovered_at": "2026-01-14T00:09:31.719325",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Vertical slice stays within service boundary while leveraging existing cross-service integration",
      "example": "aero handles UI, generation pipeline, AND brand fetch (via existing brandy2 client) - no need to touch ghostwriter service",
      "discovered_at": "2026-01-14T00:09:31.720467",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group UI display enhancements that share the same data source and user journey",
      "example": "All timezone clarity enhancements use the same user.timezone data from useUser/useTimezone hooks and affect the same scheduling flow - this is a cohesive UI improvement story",
      "discovered_at": "2026-01-14T00:09:31.721663",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep frontend-only enhancements together when they don't require backend changes",
      "example": "The story correctly identifies this as an aero-only enhancement. Tack stores Unix timestamps (timezone-agnostic), so no backend changes are needed. The fix is entirely in the UI display layer.",
      "discovered_at": "2026-01-14T00:09:31.722771",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include all touchpoints in a user journey when fixing a single UX issue",
      "example": "Story includes timezone display in time selector, timeslot list, AND toast confirmations - all places where user confusion could occur during the scheduling journey",
      "discovered_at": "2026-01-14T00:09:31.723934",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies the vertical slice: UI trigger \u2192 service handlers \u2192 external API, all for Pinterest OAuth specifically",
      "example": "The story traces from aero UI (/dashboard/oauth/pinterest) through tack OAuth handlers to Pinterest API - this is the correct service boundary for Pinterest OAuth",
      "discovered_at": "2026-01-14T00:19:15.946712",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story keeps focus on single platform (Pinterest) rather than bundling multiple platform OAuth fixes",
      "example": "Story does NOT include Facebook OAuth issues (which would involve zuck service instead of tack) - correctly scoped to tack only",
      "discovered_at": "2026-01-14T00:19:15.948131",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria cover the full reconnection flow without scope creep into unrelated features",
      "example": "Criteria cover: happy path connection, expired token redirect, multiple accounts dropdown (existing feature regression test), and error states - all directly related to the OAuth reconnection flow",
      "discovered_at": "2026-01-14T00:19:15.949378",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Investigation subtasks target specific code paths that share the same root cause",
      "example": "Code audit targets oauth-finalize-handler.ts, trace follows aero\u2192tack path - both relate to the token exchange issue hypothesis",
      "discovered_at": "2026-01-14T00:19:15.950600",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single root cause with clear code path: The story correctly identifies one specific missing function call as the root cause",
      "example": "chat.ts:21 is missing `.preprocess((input) => injectPersonalization(input))` that all 34+ other generation files have",
      "discovered_at": "2026-01-14T00:19:15.951997",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Stays within single service boundary: All changes are in aero/packages/core/src/ghostwriter-labs/",
      "example": "The fix only touches chat.ts in aero - no changes needed in ghostwriter, brandy2, or other services",
      "discovered_at": "2026-01-14T00:19:15.953172",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Clear comparison baseline provided: Story identifies working examples to compare against",
      "example": "pinterest-title-and-description.ts is cited as the reference implementation showing correct personalization injection",
      "discovered_at": "2026-01-14T00:19:15.954358",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria align with root cause: All criteria test variations of the same fix",
      "example": "Happy path tests personalized output, edge cases test special characters and consistency, error cases test fallback behavior - all verifying the same personalization feature",
      "discovered_at": "2026-01-14T00:19:15.955623",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice - all acceptance criteria test the same code path",
      "example": "Happy path (brand voice applied), edge cases (multiple brands, no brand), and error cases (brandy2 down) all exercise the same injectPersonalization() function being added to chat.ts",
      "discovered_at": "2026-01-14T00:19:15.958664",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep timezone handling within the UI layer when the backend uses Unix timestamps",
      "example": "This story correctly keeps all changes in aero since tack stores times as UnixTimestamp (line 136: 'sendAt?: UnixTimestamp' in post.ts), making timezone conversion purely a display concern.",
      "discovered_at": "2026-01-14T00:19:15.959907",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group related UX clarity improvements that share the same underlying display logic",
      "example": "All acceptance criteria (confirmation display, travel scenario, DST handling, error states) use the same TimezoneDate class and useCreateTimezoneDate hook, making them naturally cohesive.",
      "discovered_at": "2026-01-14T00:19:15.961132",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include edge cases (DST, timezone changes) when they share the same code path",
      "example": "DST handling and traveling user scenarios both exercise the same TimezoneDate.create() and format() methods, so testing them together is appropriate.",
      "discovered_at": "2026-01-14T00:19:15.962397",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep all platform-specific OAuth logic within the dedicated platform service",
      "example": "Pinterest OAuth handlers (get-oauth-response, oauth-finalize) are contained in tack, while Facebook would be in zuck - this story correctly stays within tack",
      "discovered_at": "2026-01-14T01:42:55.841654",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "UI orchestration in aero calling platform services is acceptable and expected",
      "example": "aero's callback/route.ts orchestrates the flow by calling TailwindPinterestOauthCompleter which internally calls tack - this is proper separation",
      "discovered_at": "2026-01-14T01:42:55.842953",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group acceptance criteria by user journey, not by technical layer",
      "example": "All ACs (happy path, expired token, multiple accounts, API errors) relate to the single journey of 'user reconnects Pinterest account'",
      "discovered_at": "2026-01-14T01:42:55.844151",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Avoid including regression tests for unrelated functionality in bug fix stories",
      "example": "AC #3 (multiple Pinterest accounts dropdown) is marked as 'already works but could break' - this defensive testing could be in a separate test coverage story",
      "discovered_at": "2026-01-14T01:42:55.845388",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single root cause with clear code path identified - one file, one missing line",
      "example": "chat.ts line 21 is missing injectPersonalization() call that exists in 39 other files",
      "discovered_at": "2026-01-14T01:42:55.847335",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Respects service boundaries - entire fix is within aero service",
      "example": "All affected code is in aero/packages/core/src/ghostwriter-labs/, no changes needed in ghostwriter service itself",
      "discovered_at": "2026-01-14T01:42:55.848535",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Clean vertical slice - addresses one feature (chat personalization) end-to-end",
      "example": "Story covers the chat generation flow from user input through brand data injection to LLM prompt",
      "discovered_at": "2026-01-14T01:42:55.849880",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Pre-investigation with verified hypothesis increases confidence in scope",
      "example": "The story correctly identified the exact file and line number (chat.ts:21) and the fix pattern matches what exists in other files",
      "discovered_at": "2026-01-14T01:42:55.851042",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story targets a single missing feature (personalization) in a single endpoint (chat) within one service (aero)",
      "example": "All code changes are in aero/packages/core/src/ghostwriter-labs/generations/chat.ts and aero/packages/core/src/llm/prompts/definitions/chat.ts",
      "discovered_at": "2026-01-14T01:42:55.852426",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Correctly identifies that personalization processing happens in aero, not ghostwriter service",
      "example": "Story correctly states 'Primary Service: tailwind/aero' and the dependency chain 'aero \u2192 ghostwriter' where aero handles brand data injection before calling ghostwriter",
      "discovered_at": "2026-01-14T01:42:55.853687",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Pre-investigation analysis provides specific file paths and line numbers that can be verified in code",
      "example": "Story cites 'aero/packages/core/src/ghostwriter-labs/generations/chat.ts:21' - this is accurate, that's exactly where the missing preprocess call should be inserted",
      "discovered_at": "2026-01-14T01:42:55.855049",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria test both happy path and edge cases for the same feature (brand voice), not unrelated functionality",
      "example": "All AC items relate to brand voice: setting preferences, switching brands, special characters in prompts, brandy2 errors, missing preferences - all variations of the same personalization feature",
      "discovered_at": "2026-01-14T01:42:55.856516",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Bundling UI enhancements with behavioral/architectural changes that contradict existing documented design",
      "example": "AC2 asks for browser timezone auto-detection, but timezone-date.ts explicitly documents that profile timezone should persist even when user travels. This is a design decision requiring product input, not a bug fix.",
      "discovered_at": "2026-01-14T01:42:55.857775",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Mixing frontend display concerns with backend time calculation concerns",
      "example": "AC1/AC6 are pure UI clarity enhancements in aero, but AC3 (DST handling) requires backend logic changes in tack's scheduling system.",
      "discovered_at": "2026-01-14T01:42:55.858942",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Bundling error handling improvements with feature enhancements",
      "example": "AC4 (invalid time validation) and AC5 (timezone service down) are defensive coding improvements unrelated to the core timezone clarity problem.",
      "discovered_at": "2026-01-14T01:42:55.860085",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Providing specific file paths and code locations for investigation",
      "example": "Story correctly identifies select-time-zone-section.tsx and provides SQL queries and grep patterns for investigation.",
      "discovered_at": "2026-01-14T01:42:55.861282",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Writing testable acceptance criteria with specific assertions",
      "example": "ACs include exact data-testid selectors, timing requirements, and expected behavior.",
      "discovered_at": "2026-01-14T01:42:55.862432",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep platform-specific OAuth in its own story - Pinterest OAuth should not be bundled with Facebook OAuth",
      "example": "This story correctly focuses only on Pinterest OAuth (tack service) and does not mix in Facebook OAuth (which would be zuck service)",
      "discovered_at": "2026-01-14T01:51:37.986045",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include the full vertical slice from UI to data layer when the fix spans multiple services that naturally work together",
      "example": "Story correctly includes both aero (UI/orchestration) and tack (token management) as they form a complete OAuth vertical slice",
      "discovered_at": "2026-01-14T01:51:37.987785",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Avoid mixing bug fixes with new feature work in the same story - they have different root causes and PR sizes",
      "example": "AC #3 requests a new 'account selection dropdown' for multiple Pinterest accounts - this is feature work mixed into a bug fix story about reconnection failures",
      "discovered_at": "2026-01-14T01:51:37.989442",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Error handling improvements can be grouped with the bug fix if they relate to the same user flow",
      "example": "AC #4-5 (Pinterest API 503 and invalid token errors) are properly grouped as they're part of the same reconnection flow failure scenarios",
      "discovered_at": "2026-01-14T01:51:37.990935",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story identifies a single missing feature (personalization) in a single file (chat.ts) that follows an established pattern in sibling files",
      "example": "The story correctly identifies chat.ts lacks injectPersonalization while pinterest-title-and-description.ts, facebook-post.ts, and others all have it - this is a clear consistency bug",
      "discovered_at": "2026-01-14T01:51:37.992422",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within a single service boundary (aero) with well-defined existing integration (brandy2 for brand data)",
      "example": "The fix is entirely in aero/packages/core/src/ghostwriter-labs/generations/chat.ts; the brandy2 integration already exists and works in personalization.ts",
      "discovered_at": "2026-01-14T01:51:37.993866",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story provides verifiable code path hypothesis with exact file and line number",
      "example": "Pre-Investigation Analysis correctly states 'chat.ts file at line 21 is missing the .preprocess((input) => injectPersonalization(input))' - verified by comparing to other generation files",
      "discovered_at": "2026-01-14T01:51:37.995203",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice: the fix adds the preprocessor call which triggers the full brand-fetch \u2192 prompt-inject \u2192 generation flow",
      "example": "Single change enables: brand fetch from brandy2 \u2192 personalization prompt building \u2192 injected into chat generation - full feature slice",
      "discovered_at": "2026-01-14T01:51:37.997020",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single missing function call affecting one feature = one story. All reported symptoms trace to the same code path.",
      "example": "All user complaints (robotic content, ignored brand voice, generic output) are caused by the single missing injectPersonalization() call in chat.ts",
      "discovered_at": "2026-01-14T01:51:37.998532",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Code audit identified exact location (chat.ts:21) and verified hypothesis by comparing to working implementations in sibling files.",
      "example": "Story correctly identified that comparing chat.ts to other generation files would reveal the missing personalization injection",
      "discovered_at": "2026-01-14T01:51:38.000041",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Error handling acceptance criteria (brand fetch failure, invalid settings) belong in the same story since they test the same injectPersonalization code path.",
      "example": "The error cases test the getBrandForOrg call inside injectPersonalization() which is the same code being added",
      "discovered_at": "2026-01-14T01:51:38.001753",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group UX enhancements for a single user journey together",
      "example": "All acceptance criteria relate to the same user journey: scheduling a Pinterest pin. Timezone selection, confirmation feedback, error handling, and DST behavior are all parts of the same scheduling flow and can be addressed in the same UI components.",
      "discovered_at": "2026-01-14T01:51:38.003014",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep story within a single service when the changes are purely UI/UX",
      "example": "This story correctly identifies that the issue is UI clarity, not backend logic. The tack service already stores times correctly as Unix timestamps. All changes stay within aero's scheduler components.",
      "discovered_at": "2026-01-14T01:51:38.004372",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include related error handling in the same story when errors occur in the same user flow",
      "example": "AC#4 (missing timezone error) and AC#5 (Pinterest API 503 error) are included because they're part of the scheduling confirmation flow. Users encounter these at the same point in their journey.",
      "discovered_at": "2026-01-14T01:51:38.005824",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Vertical slice that enhances existing functionality without backend changes",
      "example": "The story enhances timezone display by adding a confirmation message. The data already flows correctly (user.timezone \u2192 DateTimePickerWithTimeslotsProvider \u2192 TimeslotRadioGroup \u2192 format with timezone). The change adds UI feedback without modifying the data flow.",
      "discovered_at": "2026-01-14T01:51:38.007126",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bundle all aspects of a single user journey (OAuth reconnection) including happy path, error handling, and edge cases",
      "example": "This story correctly groups Pinterest OAuth reconnection success, expired token handling, and error messaging - all occur in the same aero\u2192tack\u2192Pinterest API call chain",
      "discovered_at": "2026-01-14T01:59:08.918250",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep OAuth flows for a single platform (Pinterest) in one story rather than mixing platforms",
      "example": "Story focuses exclusively on Pinterest OAuth (tack service) without bundling Facebook OAuth (zuck service)",
      "discovered_at": "2026-01-14T01:59:08.919825",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include UX feedback improvements alongside the underlying technical fix when they share the same code path",
      "example": "Error messaging improvements (AC #4-6) are tied to the same catch blocks in oauth-finalize-handler.ts:106-117 and get-oauth-response-handler.ts:94-103 that need fixing anyway",
      "discovered_at": "2026-01-14T01:59:08.921380",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Scope to the minimal service chain required for the fix",
      "example": "Story correctly identifies only aero and tack as services involved, not including gandalf (token validation) since the issue is in the OAuth exchange itself, not validation",
      "discovered_at": "2026-01-14T01:59:08.922733",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single missing feature with identical fix pattern to existing implementations",
      "example": "The story correctly identifies that chat.ts is missing a preprocessor call that exists in 30+ other generation files - this is a clear, surgical fix",
      "discovered_at": "2026-01-14T01:59:08.924095",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria test one feature from multiple angles rather than bundling separate features",
      "example": "All 6 acceptance criteria (happy path, edge cases, error handling, feedback) validate the same personalization feature, not separate capabilities",
      "discovered_at": "2026-01-14T01:59:08.925553",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Dependency services are read-only and already working correctly",
      "example": "brandy2 integration via getBrandForOrg() is already functional (used by pinterest, facebook, instagram generations) - no changes needed there",
      "discovered_at": "2026-01-14T01:59:08.926837",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story targets a single missing feature implementation in one file with clear before/after comparison to working examples",
      "example": "chat.ts is the only generation file out of 40 missing injectPersonalization - comparing to pinterest-title-and-description.ts or facebook-post.ts shows the exact line needed",
      "discovered_at": "2026-01-14T01:59:08.928420",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Dependency chain is correctly identified and stays within logical service boundaries (aero \u2192 brandy2 for data, stays in aero for logic)",
      "example": "Brand data fetching already works via getBrandForOrg in brands/server.ts - no changes needed to brandy2 service",
      "discovered_at": "2026-01-14T01:59:08.930499",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria align with the single root cause - all test scenarios validate that personalization is working",
      "example": "All acceptance criteria focus on brand voice appearing in output, which directly tests whether injectPersonalization is being called",
      "discovered_at": "2026-01-14T01:59:08.932086",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep UI clarity enhancements that share the same user flow in a single story",
      "example": "This story bundles timezone display in scheduler, confirmation messages, and error states - all part of the same scheduling user flow in aero/domains/scheduler",
      "discovered_at": "2026-01-14T01:59:08.933590",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Scope to a single platform when multiple platforms have similar but separate implementations",
      "example": "Story focuses exclusively on Pinterest scheduler (tack + aero scheduler domain) rather than bundling Facebook (zuck) timezone issues",
      "discovered_at": "2026-01-14T01:59:08.935062",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include error handling for the same feature in the same story",
      "example": "Invalid time validation and Pinterest API 503 error handling are included because they're part of the same scheduling confirmation flow",
      "discovered_at": "2026-01-14T01:59:08.936461",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "DST edge cases belong with timezone display fixes since they share the same code paths",
      "example": "The DST spring-forward AC tests the same timezone conversion logic in timezones.ts (getLocalTime/getUtcTime) that the display fix will touch",
      "discovered_at": "2026-01-14T01:59:08.938000",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies the complete vertical slice from UI through backend service to external API",
      "example": "The story traces aero UI \u2192 tack OAuth handlers \u2192 Pinterest API, covering the full reconnection flow without including unrelated services",
      "discovered_at": "2026-01-14T02:08:12.174507",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within the Pinterest OAuth domain and doesn't bundle other platform OAuth (Facebook/Instagram)",
      "example": "All referenced code paths are in tack (Pinterest service) and aero - no references to zuck (Facebook) or other platform OAuth code",
      "discovered_at": "2026-01-14T02:08:12.176663",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "The acceptance criteria cover the single OAuth reconnection flow with appropriate edge cases and error handling",
      "example": "ACs cover: successful connect, expired token redirect, already-connected prompt, API 503 error, invalid token error - all within the same OAuth flow",
      "discovered_at": "2026-01-14T02:08:12.178290",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly excludes gandalf from the service chain since Pinterest OAuth doesn't use gandalf for token validation",
      "example": "Despite the architecture reference mentioning gandalf for OAuth, the story correctly identifies tack as the primary service - verified by absence of pinterest OAuth code in gandalf",
      "discovered_at": "2026-01-14T02:08:12.179935",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story focuses on a single missing feature in one file with a clear, verifiable fix",
      "example": "Adding injectPersonalization() call to chat.ts mirrors the existing pattern in 30+ other generation files in the same directory",
      "discovered_at": "2026-01-14T02:08:12.181483",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Pre-investigation hypothesis is accurate and code-verified",
      "example": "The story correctly identified the exact file (chat.ts) and the exact missing line (.preprocess for injectPersonalization) - this reduces investigation time",
      "discovered_at": "2026-01-14T02:08:12.182824",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Service boundaries are correctly identified - the fix is entirely within aero",
      "example": "While the story mentions aero \u2192 ghostwriter dependency, the actual fix is purely in aero's generation config. The personalization is injected BEFORE the prompt is sent to ghostwriter.",
      "discovered_at": "2026-01-14T02:08:12.184359",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Clean vertical slice - the story covers the complete feature path (brand settings \u2192 personalization injection \u2192 AI output)",
      "example": "The acceptance criteria cover happy path (brand voice applied), edge cases (special characters, length), and error states (brand settings unavailable, service down)",
      "discovered_at": "2026-01-14T02:08:12.186300",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single missing function call with clear before/after examples in adjacent files",
      "example": "Story identifies chat.ts missing injectPersonalization() by comparing to 39 other generation files that have it. This is a clean, single-change fix with established patterns to follow.",
      "discovered_at": "2026-01-14T02:08:12.187720",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Stays within single service boundary when fix is isolated to one layer",
      "example": "Although the story mentions brandy2 for brand data and ghostwriter service, the actual fix is entirely in aero - adding one preprocess call and updating one prompt template. brandy2 integration already works via getBrandForOrg().",
      "discovered_at": "2026-01-14T02:08:12.189185",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice: UI \u2192 logic \u2192 data all addressed in one coherent change",
      "example": "Story covers: (1) the generation config preprocessing (chat.ts), (2) the prompt template update (llm/prompts/definitions/chat.ts), and (3) error handling for brandy2 service unavailability. All necessary layers for the feature.",
      "discovered_at": "2026-01-14T02:08:12.190930",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Clear success metrics tied directly to the root cause fix",
      "example": "Baseline of 50% content generation failures due to missing brand data maps directly to the missing injectPersonalization() call. Target of <5% failure rate is measurable after fix.",
      "discovered_at": "2026-01-14T02:08:12.192317",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Bundling unrelated features based on surface-level UI proximity. Just because both 'timezone display' and 'time slot conflicts' appear in the scheduler UI doesn't mean they share a root cause.",
      "example": "AC #5 'time slot conflict detection' is bundled into a timezone clarity story. These have completely different code paths, different user problems, and would require separate PRs.",
      "discovered_at": "2026-01-14T02:08:12.194379",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Including acceptance criteria that contradict existing intentional design without flagging as a product decision. Changes to fundamental behavior need product sign-off before being treated as bug fixes.",
      "example": "AC #2 requires browser timezone auto-updating when traveling, but timezone-date.ts explicitly documents that the system intentionally keeps the user's stored timezone. This is a design change, not a bug.",
      "discovered_at": "2026-01-14T02:08:12.196381",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Correctly identifying the primary service (aero) for a UI display concern. Timezone display is purely a frontend concern; tack only stores Unix timestamps.",
      "example": "Story correctly identifies aero as primary service and doesn't require backend changes in tack for this UI enhancement.",
      "discovered_at": "2026-01-14T02:08:12.198260",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Including error handling acceptance criteria that relate to the core feature (timezone missing error in AC #4).",
      "example": "AC #4 for missing timezone error handling is directly related to timezone display functionality and belongs in this story.",
      "discovered_at": "2026-01-14T02:08:12.199825",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single file, single bug, single fix - the story correctly identifies exactly one missing line of code in one file",
      "example": "Adding `.preprocess((input) => injectPersonalization(input))` to chat.ts is the complete fix",
      "discovered_at": "2026-01-14T02:20:08.481263",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within one service boundary (aero) even though the feature involves ghostwriter",
      "example": "The fix is entirely in aero/packages/core/src/ghostwriter-labs/generations/chat.ts - no ghostwriter service changes needed",
      "discovered_at": "2026-01-14T02:20:08.483144",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Clear comparison to working code patterns provided for verification",
      "example": "Story references pinterest-title-and-description.ts which has the correct pattern at line 30",
      "discovered_at": "2026-01-14T02:20:08.484664",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Hypothesis is code-path specific with exact line number",
      "example": "chat.ts:21 identified as the exact location where injectPersonalization should be added",
      "discovered_at": "2026-01-14T02:20:08.486106",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single code change with clear acceptance criteria - the story targets one missing function call with measurable outcomes",
      "example": "Adding injectPersonalization() to chat.ts is the sole change needed; all acceptance criteria relate to verifying brand voice in chat output",
      "discovered_at": "2026-01-14T02:20:08.487872",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Respects service boundaries - changes are isolated to aero while leveraging existing brandy2 integration",
      "example": "The story correctly identifies aero as the primary service; brandy2 is a dependency but requires no changes since getBrandForOrg() already works for other generations",
      "discovered_at": "2026-01-14T02:20:08.489533",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Follows established patterns - the fix mirrors what already works in 35+ other generation files",
      "example": "facebook-post.ts, instagram-caption.ts, and all other generation files already call injectPersonalization(); this story simply applies the same pattern to chat.ts",
      "discovered_at": "2026-01-14T02:20:08.491239",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies that timezone handling is primarily a UI clarity issue, not a backend bug. All themes relate to the same user confusion point.",
      "example": "The story focuses on adding timezone labels to confirmation messages and improving visibility - all changes in aero/packages/tailwindapp/client/domains/scheduler/ and smart-schedule/",
      "discovered_at": "2026-01-14T02:20:08.493757",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within a single service boundary (aero) even though the scheduling pipeline touches tack. The tack service already handles times correctly as Unix timestamps.",
      "example": "The story explicitly notes dependency chain 'aero UI \u2192 tack (scheduling logic) \u2192 Pinterest API' but correctly scopes changes to only the aero UI layer",
      "discovered_at": "2026-01-14T02:20:08.495871",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "All identified code paths are in the same domain (scheduler) and share the same timezone context mechanism (DateTimePickerWithTimeslotsProvider with timezone prop).",
      "example": "date-time-field.tsx:86-108 wraps components in DateTimePickerWithTimeslotsProvider with timezone={user?.timezone}, making all child components use the same timezone source",
      "discovered_at": "2026-01-14T02:20:08.497814",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies this as an ENHANCEMENT, not a bug fix. The code works correctly; it just needs better UX communication.",
      "example": "timeslot-radio-group.tsx:113 already includes (z) format for timezone abbreviation, but users still report confusion - indicating a clarity issue, not a logic bug",
      "discovered_at": "2026-01-14T02:20:08.500675",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep platform-specific OAuth stories within their dedicated service boundaries - Pinterest OAuth uses tack, Facebook would use zuck",
      "example": "This story correctly limits scope to tack (Pinterest OAuth) and aero (UI), without mixing in zuck (Facebook) or gandalf (general auth)",
      "discovered_at": "2026-01-14T02:29:21.476928",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include both backend error handling and frontend error display in OAuth stories since they are tightly coupled",
      "example": "Story covers tack error handling (get-oauth-response-handler.ts) AND aero error display (/dashboard/v2/oauth/pinterest/error route) together",
      "discovered_at": "2026-01-14T02:29:21.479332",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group all states (happy, edge, error) of a single user flow together rather than splitting by state type",
      "example": "All 6 acceptance criteria relate to the same OAuth reconnection flow - success, expired token redirect, already-connected prompt, Pinterest 503, invalid credentials, and generic feedback",
      "discovered_at": "2026-01-14T02:29:21.481197",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Document the complete dependency chain when the flow spans multiple services to make the scope explicit",
      "example": "Story correctly identifies: aero UI \u2192 tack (OAuth handlers) \u2192 Pinterest API as the dependency chain",
      "discovered_at": "2026-01-14T02:29:21.483732",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single root cause with clear code path: story identifies one missing feature (brand voice) with a specific, verifiable fix location",
      "example": "Story correctly identifies chat.ts missing injectPersonalization and provides exact line number (21) where the fix goes",
      "discovered_at": "2026-01-14T02:29:21.486770",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice within single service: UI feedback, generation logic, and data flow all in aero",
      "example": "All changes (chat.ts, CHAT prompt definition, personalization.ts already exists) are in aero/packages/core/src/",
      "discovered_at": "2026-01-14T02:29:21.489302",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story provides comparison evidence by referencing similar working implementations",
      "example": "Story correctly notes pinterest-title-and-description.ts has the injectPersonalization call that chat.ts is missing",
      "discovered_at": "2026-01-14T02:29:21.491353",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies a single missing code pattern (injectPersonalization) that explains multiple user complaints",
      "example": "Users report 'robotic content' AND 'context not retained' - both symptoms of the same missing preprocessor call that would apply brand voice settings",
      "discovered_at": "2026-01-14T02:29:21.493066",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Pre-investigation analysis provides specific code path with line numbers and comparison to working implementations",
      "example": "Hypothesis points to chat.ts:21 and compares to pinterest-title-and-description.ts which has the pattern",
      "discovered_at": "2026-01-14T02:29:21.494528",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Acceptance criteria for 'context retention' is ambiguous - could mean conversation history (already working) or brand preferences (the actual fix)",
      "example": "AC says 'system retains context and adjusts the output accordingly' without specifying what 'context' means technically",
      "discovered_at": "2026-01-14T02:29:21.496172",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Grouping timezone display, DST handling, and browser timezone detection together - all modify the same UI components (DateTimePicker, TimeslotRadioGroup, confirmation messaging) in aero",
      "example": "Themes 1-3 all require changes to components in aero/packages/tailwindapp/client/domains/scheduler/components/ and share the goal of making timezone context clearer",
      "discovered_at": "2026-01-14T02:29:21.497995",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Including unrelated error handling scenarios in a timezone clarity story - these require different code paths and testing strategies",
      "example": "The acceptance criterion for Pinterest API 503 errors has nothing to do with timezone confusion - it's about API resilience. Similarly, time slot conflict detection is validation logic, not timezone UX.",
      "discovered_at": "2026-01-14T02:29:21.499588",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Bundling unrelated acceptance criteria under a story theme they don't match - creates confusion about what the story is actually solving",
      "example": "The story title is 'Enhance Pinterest Scheduler Timezone Clarity' but includes 'time slot conflict' and 'Pinterest 503 error' scenarios that have zero relationship to timezone clarity",
      "discovered_at": "2026-01-14T02:29:21.501235",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bundle all edge cases for a single user flow together - expired tokens, multiple accounts, error states are all valid parts of 'reconnect Pinterest'",
      "example": "AC #2 (expired token redirect) and AC #3 (multiple accounts dropdown) are edge cases OF the reconnection flow, not separate features",
      "discovered_at": "2026-01-14T02:39:02.061840",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep platform-specific OAuth isolated to its dedicated service - Pinterest OAuth stays in tack, not mixed with zuck (Facebook) or other platform services",
      "example": "All code paths reference tack's Pinterest handlers and aero's Pinterest OAuth routes - no Facebook/Instagram code contamination",
      "discovered_at": "2026-01-14T02:39:02.063809",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Error handling ACs should be errors IN the same flow being fixed, not general error handling improvements",
      "example": "AC #4 (Pinterest 503) and AC #5 (invalid OAuth token) are specific errors in the OAuth reconnection flow, handled in base.ts and oauth.ts",
      "discovered_at": "2026-01-14T02:39:02.065424",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "A vertical slice should include UI feedback as part of the same story when fixing a user-facing bug",
      "example": "AC #6 (visual feedback) belongs here because the bug is user-facing - the user sees 'Authorization failed' without clear next steps",
      "discovered_at": "2026-01-14T02:39:02.067100",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single missing function call identified with clear comparison to working implementations",
      "example": "Story correctly identifies that chat.ts is missing injectPersonalization() that exists in pinterest-title-and-description.ts at line 30",
      "discovered_at": "2026-01-14T02:39:02.069573",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Respects service boundaries - fix is contained within single service (aero) with existing dependency (brandy2)",
      "example": "The fix only requires adding one preprocess call in aero; brandy2 integration already exists via getBrandForOrg in personalization.ts",
      "discovered_at": "2026-01-14T02:39:02.072118",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice - covers the feature from UI impact through to data layer",
      "example": "Story covers: user input \u2192 chat.ts generation config \u2192 injectPersonalization \u2192 getBrandForOrg (brandy2) \u2192 personalized prompt \u2192 AI response",
      "discovered_at": "2026-01-14T02:39:02.074020",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single code change would fix all reported symptoms",
      "example": "Adding .preprocess((input) => injectPersonalization(input)) at line 21 in chat.ts would resolve both 'generic copy' and 'missing brand voice' issues",
      "discovered_at": "2026-01-14T02:39:02.075449",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies a single missing function call as root cause with evidence comparing against working implementations",
      "example": "chat.ts missing injectPersonalization() while 39 other generation files have it - a single code change will fix all reported symptoms",
      "discovered_at": "2026-01-14T02:39:02.077221",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Clean vertical slice: UI input \u2192 aero preprocessing \u2192 ghostwriter LLM \u2192 response, with brand data flowing correctly through established patterns",
      "example": "aero fetches brand from brandy2, constructs personalizationInfo, passes to ghostwriter - all existing architecture, just needs to be enabled for chat",
      "discovered_at": "2026-01-14T02:39:02.079534",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Technical context accurately specifies code path and provides correct hypothesis with high confidence",
      "example": "Story correctly identified aero/packages/core/src/ghostwriter-labs/generations/chat.ts:21 as the location where fix is needed",
      "discovered_at": "2026-01-14T02:39:02.081063",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Respects service boundaries by making changes in the right service (aero preprocessing) rather than modifying ghostwriter service",
      "example": "The fix is in aero's preprocessing pipeline, not in the ghostwriter service, maintaining the established data flow pattern",
      "discovered_at": "2026-01-14T02:39:02.082709",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Scope to a single service when the change is purely frontend presentation",
      "example": "Despite tack handling scheduling backend, this story correctly scopes to aero only since tack already receives/stores UTC timestamps correctly - the issue is UI clarity, not data handling",
      "discovered_at": "2026-01-14T02:39:02.085510",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include error handling within the same vertical slice when it's the same user flow",
      "example": "The error cases (no timezone selected, timezone service failure) are part of the same scheduling confirmation flow - same component, same moment, same user action",
      "discovered_at": "2026-01-14T02:39:02.087063",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Avoid bundling backend timezone storage changes with frontend display changes",
      "example": "This story correctly avoids touching tack's sendAt handling - if it had included 'also change how tack stores scheduled times', that would cross service boundaries unnecessarily",
      "discovered_at": "2026-01-14T02:39:02.088470",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include regression tests for existing functionality that could break",
      "example": "AC #3 (multiple account selection) is explicitly marked as a regression test: 'This already works but could break during OAuth changes - verify it still functions'. This is appropriate defensive scoping.",
      "discovered_at": "2026-01-14T02:47:58.034339",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group error handling variants for the same endpoint together",
      "example": "AC #4 (Pinterest 503) and AC #5 (invalid token) both test error conditions on the same OAuth flow, making them appropriate to bundle.",
      "discovered_at": "2026-01-14T02:47:58.036148",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Define clear vertical slice from UI trigger to data storage",
      "example": "Story traces the path from 'user clicks Connect Pinterest button' through tack handlers to DynamoDB token storage, covering the complete vertical slice.",
      "discovered_at": "2026-01-14T02:47:58.037802",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story targets a single code path with a specific, verifiable root cause",
      "example": "This story identifies exactly one file (chat.ts:21) missing one line of code that already exists in 39 sibling files",
      "discovered_at": "2026-01-14T02:47:58.039465",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within a single service boundary with established integration patterns",
      "example": "The fix is entirely within aero's ghostwriter-labs. The brandy2 integration (getBrandForOrg) already exists and is used by injectPersonalization - no new cross-service work needed",
      "discovered_at": "2026-01-14T02:47:58.041141",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story provides comparison code for verification",
      "example": "pinterest-title-and-description.ts is explicitly referenced as the correct implementation pattern, making code review trivial",
      "discovered_at": "2026-01-14T02:47:58.042658",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria match the actual fix scope",
      "example": "All acceptance criteria relate to brand voice in chat responses - no unrelated features bundled in",
      "discovered_at": "2026-01-14T02:47:58.044187",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single root cause with single-file fix that doesn't require changes to other services",
      "example": "This story correctly identifies that chat.ts is missing the injectPersonalization preprocessor - a single line change that leverages existing infrastructure (personalization.ts, brandy2 integration) already used by 39 other generation files",
      "discovered_at": "2026-01-14T02:47:58.045939",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within one service's codebase while acknowledging dependency chain",
      "example": "The story correctly identifies aero as the primary service where the fix lives, while noting the existing dependency chain (aero \u2192 brandy2 \u2192 ghostwriter) without proposing changes to those services",
      "discovered_at": "2026-01-14T02:47:58.047577",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Clear comparison to working implementations for verification",
      "example": "Story provides pinterest-title-and-description.ts as a reference implementation, which is exactly correct - that file shows the pattern chat.ts should follow",
      "discovered_at": "2026-01-14T02:47:58.049114",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria aligned with actual code architecture",
      "example": "The error handling criteria (brand fetch failure, service unavailable) map directly to the existing error handling in injectPersonalization function at personalization.ts:10-17 and 24-30",
      "discovered_at": "2026-01-14T02:47:58.050652",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group related UX clarity issues across components in the same user flow when they share a display/communication root cause",
      "example": "This story correctly groups date-time-picker timezone display, confirmation message timezone display, and timezone change detection - all addressing 'user doesn't know what timezone is being used'",
      "discovered_at": "2026-01-14T02:47:58.052738",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Stay within a single vertical slice (Pinterest scheduling: aero UI + tack backend) without bleeding into unrelated services",
      "example": "Story focuses on aero scheduler components and tack scheduling logic without touching zuck (Facebook), gandalf (OAuth), or other unrelated services",
      "discovered_at": "2026-01-14T02:47:58.054633",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Do not mix API resilience/error handling with UX clarity stories - these have different root causes and require different expertise",
      "example": "The 'Pinterest API 503 error' acceptance criterion is about API failure recovery, not timezone clarity. This should be a separate story about scheduling error handling patterns",
      "discovered_at": "2026-01-14T02:47:58.056597",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep platform-specific OAuth flows scoped to their dedicated service (tack for Pinterest, zuck for Facebook)",
      "example": "This story correctly keeps all Pinterest OAuth handling in tack service without bundling Facebook/zuck OAuth issues",
      "discovered_at": "2026-01-14T02:55:19.258997",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include UI-layer error handling improvements alongside backend fixes when they're part of the same user journey",
      "example": "The acceptance criteria include both backend token handling fixes AND frontend error toast improvements, which is appropriate since users need feedback when OAuth fails",
      "discovered_at": "2026-01-14T02:55:19.261155",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Correctly identify the complete dependency chain in technical context",
      "example": "Story accurately documents: aero UI \u2192 tack (OAuth handlers) \u2192 Pinterest API, with specific file paths that match the actual codebase structure",
      "discovered_at": "2026-01-14T02:55:19.262897",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bundle related edge cases (timeout, 503 error, invalid token) within the same story when they're part of the same code path",
      "example": "All error scenarios (Pinterest 503, invalid_grant, timeout) are handled in the same oauth.ts and handler files, making them natural to fix together",
      "discovered_at": "2026-01-14T02:55:19.265134",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single root cause with clear code evidence - the story correctly identifies a missing function call in one file",
      "example": "Story identifies chat.ts:21 as missing injectPersonalization(), which was verified by comparing against 39 other generation files that all have this call",
      "discovered_at": "2026-01-14T02:55:19.267332",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Proper service boundary respect - fix is contained within aero even though it integrates with brandy2",
      "example": "The personalization logic lives in aero (personalization.ts calls getBrandForOrg from brands/server.ts), not in ghostwriter service. The fix only touches aero code.",
      "discovered_at": "2026-01-14T02:55:19.269245",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice - covers UI endpoint through to data integration",
      "example": "Story traces: /dashboard/v2/labs/chat (UI) \u2192 chat.ts (logic) \u2192 personalization.ts \u2192 getBrandForOrg \u2192 brandy2 (data)",
      "discovered_at": "2026-01-14T02:55:19.271012",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria all relate to the same feature area (personalization behavior)",
      "example": "All criteria test variations of brand voice output: warm/cozy tone, minimalist style, error handling for missing brand data - all fixed by adding the single preprocessor call",
      "discovered_at": "2026-01-14T02:55:19.272794",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group issues that share the exact same code fix location",
      "example": "All three user complaints (robotic content, ignored preferences, wrong tone) are fixed by adding injectPersonalization() to chat.ts:21",
      "discovered_at": "2026-01-14T02:55:19.274498",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Stay within a single service when the supporting infrastructure already exists",
      "example": "Story correctly focuses on aero only - the brandy2 integration and injectPersonalization function already exist and work",
      "discovered_at": "2026-01-14T02:55:19.276253",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Avoid mentioning files that don't exist in technical context",
      "example": "Story references 'brandy2/packages/client/src/brand-settings.ts' but this file doesn't exist - should reference requests/get-brand.ts or requests/list-brands.ts",
      "discovered_at": "2026-01-14T02:55:19.277933",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Don't propose creating new endpoints when existing infrastructure suffices",
      "example": "Story mentions '/api/v1/ghostwriter/generate (TO BE CREATED)' but the existing chat flow through the CHAT GenerationConfig is sufficient",
      "discovered_at": "2026-01-14T02:55:19.279523",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bundle all timezone display improvements in a single story when they share the same user journey (scheduling a pin)",
      "example": "This story correctly groups: timeslot display, confirmation toast, custom time picker, and error messages - all are touchpoints in the same scheduling flow",
      "discovered_at": "2026-01-14T02:55:19.281380",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep UI-only enhancements separate from backend service changes when the backend already handles the data correctly",
      "example": "The story correctly identifies this is aero-only - tack stores sendAt as Unix timestamp (line 22 of update-post-send-ats.ts) which is timezone-agnostic. No tack changes needed.",
      "discovered_at": "2026-01-14T02:55:19.283117",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include edge cases (DST, timezone changes) that affect the same code paths",
      "example": "DST handling uses the same date-fns-tz library and getLocalTime utility already in place - testing/fixing this is part of the same enhancement",
      "discovered_at": "2026-01-14T02:55:19.284648",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Focus on a single authentication flow end-to-end rather than mixing multiple platform OAuth flows",
      "example": "This story correctly focuses only on Pinterest OAuth (tack) without bundling Facebook OAuth (zuck) or other platform authentication",
      "discovered_at": "2026-01-14T03:04:37.024247",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include both backend service and frontend UI in bug fixes that affect user experience",
      "example": "The story covers tack (OAuth handlers, token logic) AND aero (UI routes, error display) because fixing the bug requires changes at both layers",
      "discovered_at": "2026-01-14T03:04:37.026453",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group edge cases that occur within the same code path as the main bug",
      "example": "Multiple Pinterest accounts edge case is included because it uses the same callback route (callback/route.ts lines 71-120) - not a separate feature",
      "discovered_at": "2026-01-14T03:04:37.028417",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Specify exact file paths and verify they exist in the codebase",
      "example": "Story references 'tack/service/lib/handlers/api/oauth-finalize/oauth-finalize-handler.ts' which correctly exists and contains the token finalization logic",
      "discovered_at": "2026-01-14T03:04:37.030538",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single file fix with clear code path identified - add missing preprocessor call",
      "example": "Story correctly identifies chat.ts:21 as the exact location needing .preprocess((input) => injectPersonalization(input))",
      "discovered_at": "2026-01-14T03:04:37.032722",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within single service (aero) despite dependency chain to brandy2",
      "example": "The fix is entirely in aero's chat.ts. The brandy2 integration already exists via getBrandForOrg() in the personalization processor - no changes needed there",
      "discovered_at": "2026-01-14T03:04:37.034668",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice - the chat.ts config handles the full request lifecycle (preprocessing \u2192 prompt \u2192 postprocessing)",
      "example": "All acceptance criteria can be verified within the chat generation flow without touching other generation types",
      "discovered_at": "2026-01-14T03:04:37.037285",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Reusing existing infrastructure rather than creating new code",
      "example": "The injectPersonalization function already exists and works in 39 other files - this is simply adding it to the one file that was missed",
      "discovered_at": "2026-01-14T03:04:37.039148",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies a single missing preprocessor as the root cause and stays within the aero service where the fix belongs",
      "example": "The story pinpoints chat.ts:21 as the exact location where injectPersonalization() should be added, matching the pattern used in 39 other generation files",
      "discovered_at": "2026-01-14T03:04:37.041585",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies the dependency chain (aero \u2192 brandy2) and doesn't try to modify brandy2 when the issue is in aero's consumption of the data",
      "example": "The story specifies aero as primary service while acknowledging brandy2 dependency for brand data retrieval",
      "discovered_at": "2026-01-14T03:04:37.044604",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story provides concrete comparison files to verify the pattern (instagram-caption.ts, facebook-post.ts) which all have the missing functionality",
      "example": "Code paths to examine include other generation files that successfully implement brand voice, enabling easy pattern matching",
      "discovered_at": "2026-01-14T03:04:37.046968",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group all UI visibility/clarity issues for a single feature into one story",
      "example": "This story groups timezone display in scheduler, confirmation popover, and date picker - all are visibility issues for the same user flow",
      "discovered_at": "2026-01-14T03:04:37.049364",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include related error handling within the same story when it's for the same feature",
      "example": "Error handling for missing timezone and timezone API failure are included because they directly relate to the timezone clarity feature",
      "discovered_at": "2026-01-14T03:04:37.051488",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep platform-specific stories separate even when addressing similar issues",
      "example": "This story is Pinterest-only. If Instagram had similar timezone issues, that would be a separate story",
      "discovered_at": "2026-01-14T03:04:37.054438",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Document dependency chain without requiring changes in dependent services",
      "example": "Story mentions tack as dependency but all actual work is in aero - tack receives UTC timestamps and doesn't need modification",
      "discovered_at": "2026-01-14T03:04:37.057448",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Focus on a single user journey across the vertical slice",
      "example": "This story covers only Pinterest OAuth reconnection: UI (aero Connect button) \u2192 OAuth handler (tack /oauth/response) \u2192 Token finalization (tack /oauth/finalize) \u2192 Account update (aero callback). All acceptance criteria relate to this same flow.",
      "discovered_at": "2026-01-14T03:14:05.727263",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep platform-specific code in dedicated services",
      "example": "Pinterest OAuth is entirely handled in tack (the Pinterest service), not bundled with Facebook OAuth in zuck. The story correctly identifies tack as the primary service.",
      "discovered_at": "2026-01-14T03:14:05.729504",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include happy path, edge cases, and error scenarios for completeness",
      "example": "ACs cover: successful connection (happy), expired token redirect (edge), multiple accounts (edge), Pinterest 503 (error), invalid token (error), and feedback timing (UX). All are variations of the same flow.",
      "discovered_at": "2026-01-14T03:14:05.731348",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Regression tests for existing functionality that might break during the fix",
      "example": "AC #3 about multiple account dropdown is marked as a regression check - it already works but should be verified not to break during OAuth changes.",
      "discovered_at": "2026-01-14T03:14:05.733314",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single missing function call pattern - when multiple symptoms trace to one omitted line of code, group them in one story",
      "example": "All issues (generic output, no brand voice, inconsistent behavior) trace to missing injectPersonalization() call in chat.ts",
      "discovered_at": "2026-01-14T03:14:05.735744",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Leverage existing infrastructure - when the fix reuses established patterns from sibling files, scope is naturally tight",
      "example": "The personalization processor already exists and works for 39 other generation endpoints; chat.ts just needs to use it",
      "discovered_at": "2026-01-14T03:14:05.737833",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Pre-investigation that pinpoints exact code location reduces scope ambiguity",
      "example": "Story identifies specific file path (chat.ts:21) and exact missing code (.preprocess((input) => injectPersonalization(input)))",
      "discovered_at": "2026-01-14T03:14:05.739605",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies a single missing function call as root cause, with clear before/after code comparison",
      "example": "chat.ts is missing injectPersonalization() that pinterest-title-and-description.ts has - exact line numbers provided",
      "discovered_at": "2026-01-14T03:14:05.741661",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "All acceptance criteria relate to the same feature (brand voice in chat) with proper happy/edge/error coverage",
      "example": "Happy path (content reflects brand voice), Edge cases (casual brand + formal context, switching brands), Error cases (API failure, missing settings)",
      "discovered_at": "2026-01-14T03:14:05.743704",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within a clean vertical slice: UI behavior \u2192 generation config \u2192 brand data fetching",
      "example": "Only touches aero (generation config) and leverages existing brandy2 integration already used by 39 other generators",
      "discovered_at": "2026-01-14T03:14:05.745944",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Avoid: Story mentions 'TO BE CREATED' endpoint /api/v1/ghostwriter/generate but this is unnecessary - the existing infrastructure works",
      "example": "The story should clarify that no new endpoint is needed; just add injectPersonalization to the existing CHAT config",
      "discovered_at": "2026-01-14T03:14:05.747824",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group all UI consistency issues for a single feature within one story when they share the same root cause",
      "example": "This story correctly groups toast timezone display, picker timezone display, and error messaging - all related to 'timezone clarity' in the scheduler",
      "discovered_at": "2026-01-14T03:14:05.749867",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep frontend-only changes in a single story when no backend modifications are needed",
      "example": "Story mentions aero\u2192tack communication but correctly identifies that only aero UI changes are required, not tack backend changes",
      "discovered_at": "2026-01-14T03:14:05.751630",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include related edge cases (like DST) when they test the same underlying timezone handling logic",
      "example": "DST edge case tests the same date-fns-tz utilities (getLocalTime, toZonedTime) used throughout the scheduler components",
      "discovered_at": "2026-01-14T03:14:05.753516",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single platform OAuth flow scoped correctly - all Pinterest-related OAuth components in one story",
      "example": "Story includes tack handlers (get-oauth-response, oauth-finalize) AND aero routes (connect, callback, finisher) because they form one vertical slice",
      "discovered_at": "2026-01-14T03:25:30.652534",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Service boundary respected - tack handles Pinterest API interaction and token storage, aero handles user session and account management",
      "example": "TailwindPinterestOauthCompleter in aero calls tack via tackClient.finalizeOauth(), maintaining clean service separation",
      "discovered_at": "2026-01-14T03:25:30.655488",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Error handling and happy path in same story - both are part of the same code path",
      "example": "AC #1 (happy path connection) and AC #4-5 (error handling for 503 and invalid token) all flow through the same oauth-finalize-handler.ts",
      "discovered_at": "2026-01-14T03:25:30.657675",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Does NOT bundle unrelated OAuth platforms together",
      "example": "Story focuses only on Pinterest OAuth (tack service), not mixing with Facebook OAuth (zuck service) which would be a different vertical slice",
      "discovered_at": "2026-01-14T03:25:30.659416",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single file fix with clear pattern to follow - when adding missing functionality that other sibling files already implement, scope to just adding that functionality",
      "example": "This story correctly identifies that chat.ts needs the same injectPersonalization call that pinterest-title-and-description.ts, instagram-caption.ts, and facebook-post.ts already have",
      "discovered_at": "2026-01-14T03:25:30.661992",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Stay within service boundaries when the fix is purely in the integration layer - the personalization logic already exists in aero/processors/personalization.ts, so no changes needed in ghostwriter or brandy2 services",
      "example": "The fix is localized to aero/packages/core/src/ghostwriter-labs/generations/chat.ts - just add import and one .preprocess() call",
      "discovered_at": "2026-01-14T03:25:30.664797",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include comparison files in code paths when documenting a 'missing pattern' bug - this makes the fix obvious",
      "example": "Story correctly references pinterest-title-and-description.ts as the comparison file showing the expected pattern",
      "discovered_at": "2026-01-14T03:25:30.667022",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story identifies a single missing code path that differs from established patterns",
      "example": "chat.ts is the only file among 40 generation files missing injectPersonalization - this is a clear, isolated bug with a single-line fix",
      "discovered_at": "2026-01-14T03:25:30.669040",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Pre-investigation hypothesis is specific and verifiable with exact file:line reference",
      "example": "Hypothesis correctly identified chat.ts:21 as the exact location where personalization should be added, confirmed by examining the code",
      "discovered_at": "2026-01-14T03:25:30.670964",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "All acceptance criteria trace back to the single root cause",
      "example": "Happy path (brand voice applied), edge cases (multiple brands, no preferences), and error cases (API failures) all relate to the injectPersonalization call being missing",
      "discovered_at": "2026-01-14T03:25:30.672819",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group related UI feedback enhancements together when they serve the same user goal",
      "example": "This story groups confirmation messages, error states, and visual feedback all related to timezone clarity - they share the same user problem (confusion about post timing).",
      "discovered_at": "2026-01-14T03:25:30.675660",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep platform-specific scheduler changes isolated to their platform domain",
      "example": "The story focuses only on Pinterest scheduling (/dashboard/v2/advanced-scheduler/pinterest) and Pinterest-specific components (editor-fields/pinterest/date-time-field), not mixing with Facebook or Instagram scheduling.",
      "discovered_at": "2026-01-14T03:25:30.677310",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "When the fix is purely UI/UX, keep the story in the frontend service without unnecessarily involving backend services",
      "example": "Although tack handles scheduling logic, this story correctly identifies that timezone DISPLAY clarity is a pure aero UI concern - tack already stores/processes UTC timestamps correctly.",
      "discovered_at": "2026-01-14T03:25:30.679174",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Avoid including verification-only acceptance criteria for already-implemented behavior",
      "example": "AC#3 (DST handling) describes behavior that date-fns-tz already provides correctly. This could be a standalone test task rather than implementation work in this story.",
      "discovered_at": "2026-01-14T03:25:30.680697",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single platform focus - Story targets only Pinterest OAuth, not mixing with other platforms",
      "example": "Story correctly identifies tack as primary service for Pinterest, doesn't bundle Facebook OAuth (zuck) issues",
      "discovered_at": "2026-01-14T03:33:40.828277",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice - Covers UI \u2192 Logic \u2192 Data layers for one feature",
      "example": "Flow: aero UI hook \u2192 tack OAuth handlers (redirect/response/finalize) \u2192 tack token facets",
      "discovered_at": "2026-01-14T03:33:40.830948",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Appropriate service boundary - UI/orchestration in aero, platform-specific logic in tack",
      "example": "TailwindPinterestOauthCompleter in aero only orchestrates, actual OAuth logic is in tack handlers",
      "discovered_at": "2026-01-14T03:33:40.832580",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Cohesive acceptance criteria - All ACs relate to the same OAuth reconnection flow",
      "example": "Happy path, expired token edge case, multiple accounts, error handling - all part of reconnection UX",
      "discovered_at": "2026-01-14T03:33:40.834281",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single missing preprocessor call = single bug fix story",
      "example": "This story correctly identifies that chat.ts is missing one preprocessor call (injectPersonalization) that all other generation files have. This is a textbook single-root-cause bug.",
      "discovered_at": "2026-01-14T03:33:40.835795",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep related preprocessing chain fixes together",
      "example": "The story correctly focuses only on the chat generation pipeline in aero, not touching the brandy2 service or the ghostwriter service. The fix is entirely within aero's ghostwriter-labs module.",
      "discovered_at": "2026-01-14T03:33:40.837241",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Compare against working implementations to validate hypothesis",
      "example": "The story correctly references pinterest-title-and-description.ts as a working comparison. Code examination confirms that file has injectPersonalization at line 30 while chat.ts does not.",
      "discovered_at": "2026-01-14T03:33:40.838705",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies vertical slice within a single service",
      "example": "This story is a clean vertical slice: the fix touches only chat.ts in aero, the personalization processor already exists and works, and no changes are needed in brandy2 or ghostwriter services.",
      "discovered_at": "2026-01-14T03:33:40.841616",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies a single missing function call as root cause with specific file:line reference",
      "example": "Pre-Investigation Analysis correctly hypothesizes injectPersonalization() is missing from chat.ts:21 - code examination confirms this is exactly correct",
      "discovered_at": "2026-01-14T03:33:40.843841",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "All acceptance criteria relate to the same feature (brand voice personalization) across happy path, edge cases, and error handling",
      "example": "ACs cover: brand voice applied (AC1), tone specifications (AC2), missing brand data error (AC3), feedback timing (AC4), brand switching (AC5), API error (AC6) - all are aspects of the same personalization feature",
      "discovered_at": "2026-01-14T03:33:40.845969",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Service dependencies form a natural chain that would be affected by the same change",
      "example": "aero (chat.ts) \u2192 brandy2 (getBrandForOrg) \u2192 ghostwriter (receives personalized prompt) - adding injectPersonalization() affects this single path",
      "discovered_at": "2026-01-14T03:33:40.847925",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Investigation subtasks are tightly coupled and verify the same hypothesis",
      "example": "All 4 subtasks verify aspects of the missing personalization: code audit for function call, log analysis for symptoms, trace code path, reproduce in staging",
      "discovered_at": "2026-01-14T03:33:40.850078",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "All acceptance criteria stem from the same root cause (missing timezone context) and affect the same component hierarchy",
      "example": "Confirmation messages, toast notifications, and error handling all relate to the same user confusion about timezone context in the scheduling flow",
      "discovered_at": "2026-01-14T03:33:40.852446",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within a single service boundary (aero UI) despite mentioning tack in technical context",
      "example": "While tack is mentioned as dependency for scheduling logic, no actual tack code changes are needed - the timezone display is purely a frontend concern",
      "discovered_at": "2026-01-14T03:33:40.854393",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Clear vertical slice - focuses on timezone clarity UX without mixing unrelated features",
      "example": "Story doesn't try to combine timezone clarity with other scheduler improvements like adding new scheduling options or changing validation rules",
      "discovered_at": "2026-01-14T03:33:40.856435",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Investigation subtasks align with implementation scope - all code paths are in the same domain",
      "example": "All files to examine are in aero/packages/tailwindapp/client/domains/scheduler/ or related directories",
      "discovered_at": "2026-01-14T03:33:40.858429",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep OAuth flow issues within the same platform's service chain",
      "example": "This story correctly scopes Pinterest OAuth to tack + aero, without bundling Facebook OAuth (zuck) or Instagram OAuth issues",
      "discovered_at": "2026-01-14T03:41:43.125842",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include all layers of a single user journey in one story (UI, backend, data)",
      "example": "Story includes aero UI feedback, tack OAuth handlers, and tack DynamoDB token storage - all parts of the same reconnection flow",
      "discovered_at": "2026-01-14T03:41:43.128694",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group related error scenarios that share the same fix location",
      "example": "AC #4 (Pinterest 503) and AC #5 (invalid token) are both handled in the same code paths in get-oauth-response-handler.ts and oauth-finalize-handler.ts",
      "discovered_at": "2026-01-14T03:41:43.131039",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include gandalf only when it's the standard auth mechanism, not a separate feature",
      "example": "gandalf is mentioned as part of dependency chain but the story correctly focuses on tack OAuth logic, not gandalf configuration",
      "discovered_at": "2026-01-14T03:41:43.132998",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single file fix using existing infrastructure - ideal scope for a bug fix story",
      "example": "This story requires adding one line (.preprocess for personalization) to chat.ts, reusing the existing injectPersonalization function that already works in 39 other generation files",
      "discovered_at": "2026-01-14T03:41:43.135180",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Clear hypothesis with specific code path makes investigation trivial",
      "example": "Story correctly identifies chat.ts:21 as the missing call location, with pinterest-title-and-description.ts as the working reference implementation",
      "discovered_at": "2026-01-14T03:41:43.136827",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within a single service boundary while acknowledging dependency chain",
      "example": "Fix is entirely in aero; brandy2 integration is existing infrastructure that doesn't need modification",
      "discovered_at": "2026-01-14T03:41:43.138564",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies a missing implementation by comparing working vs non-working code paths in the same codebase",
      "example": "The story identified that chat.ts lacks injectPersonalization() while 37 other generation files have it - this is excellent technical scoping using existing patterns as the reference",
      "discovered_at": "2026-01-14T03:41:43.140526",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within one service boundary while acknowledging dependencies",
      "example": "The fix is entirely in aero (adding one preprocess call), with brandy2 correctly identified as a dependency that already works - no unnecessary cross-service work required",
      "discovered_at": "2026-01-14T03:41:43.142703",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Specific code path with line numbers enables quick validation of hypothesis",
      "example": "Story specifies chat.ts:21 - actual line is 19-23 for the generation chain, which is close and actionable",
      "discovered_at": "2026-01-14T03:41:43.144513",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single service focus: All changes are UI enhancements within aero, with no backend changes needed in tack",
      "example": "Story correctly identifies that aero handles display while tack just receives UTC timestamps - no cross-service changes required",
      "discovered_at": "2026-01-14T03:41:43.146582",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Vertical slice completeness: Story covers the full user journey from time selection through confirmation feedback",
      "example": "Acceptance criteria cover: (1) time picker display, (2) confirmation toast, (3) timezone change handling, (4) DST edge cases, (5) validation errors",
      "discovered_at": "2026-01-14T03:41:43.148657",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Existing code paths identified: Story references actual components that need modification",
      "example": "select-time-zone-section.tsx and date-time-picker-with-timeslots.tsx are both real files that handle timezone in the scheduling flow",
      "discovered_at": "2026-01-14T03:41:43.150426",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Enhancement with clear boundaries: Story is an improvement to existing functionality, not a new feature crossing services",
      "example": "The underlying timezone conversion logic (getLocalTime/getUtcTime) already works - only the display layer needs updating",
      "discovered_at": "2026-01-14T03:41:43.152537",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bundle all error handling scenarios for a single OAuth flow in one story",
      "example": "This story correctly includes happy path, expired token handling, 503 errors, and invalid_grant errors - all part of the same Pinterest OAuth reconnection flow",
      "discovered_at": "2026-01-14T03:50:41.193156",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include both backend error handling and frontend error display in the same vertical slice",
      "example": "Story includes tack error handling improvements AND aero error page/toast updates as a complete feature",
      "discovered_at": "2026-01-14T03:50:41.197369",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bug fix stories should identify a single, specific code defect with clear evidence",
      "example": "This story correctly identifies the missing injectPersonalization() call in chat.ts:21 as the root cause, with comparison to working implementations in other files",
      "discovered_at": "2026-01-14T03:50:41.200400",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bug fixes should stay within a single service boundary when the issue is isolated to one service",
      "example": "This story correctly scopes to aero only - the chat generation, personalization processor, and brand retrieval all live in aero/packages/core/src/ghostwriter-labs/",
      "discovered_at": "2026-01-14T03:50:41.202902",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria should test the specific behavior being fixed without scope creep",
      "example": "The happy path criterion tests that brand voice affects chat output, edge cases test special characters and multiple requests, and error cases test missing brand settings - all directly related to the missing personalization call",
      "discovered_at": "2026-01-14T03:50:41.205183",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Service boundary is appropriate - fix is contained within aero service only",
      "example": "Change is entirely in aero/packages/core/src/ghostwriter-labs/ and aero/packages/core/src/llm/prompts/, brandy2 integration already works",
      "discovered_at": "2026-01-14T03:50:41.207673",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice - covers generation config + prompt template + user feedback",
      "example": "Acceptance criteria cover happy path (brand voice reflected), edge cases (special characters, tone), and error handling (brandy2 unavailable)",
      "discovered_at": "2026-01-14T03:50:41.209927",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Consistent implementation pattern exists to follow",
      "example": "instagram-caption.ts, facebook-post.ts, twitter-post.ts all show exact pattern: add .preprocess((input) => injectPersonalization(input)) and {{personalizationInfo}} in prompt",
      "discovered_at": "2026-01-14T03:50:41.211843",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group all timezone DISPLAY issues together when they stem from inconsistent format patterns across UI components",
      "example": "This story correctly groups timeslot display, confirmation toasts, and DST handling - all are UI-layer timezone formatting concerns in aero",
      "discovered_at": "2026-01-14T03:50:41.214262",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep UI enhancements in aero when backend (tack) already handles data correctly",
      "example": "tack stores sendAt as UnixTimestamp (absolute time), so timezone is purely a display concern - correctly scoped to aero only",
      "discovered_at": "2026-01-14T03:50:41.216533",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Avoid mixing timezone STORAGE changes with timezone DISPLAY changes in one story",
      "example": "This story correctly focuses only on display - if it also proposed changing how tack stores timezone data, it should be split",
      "discovered_at": "2026-01-14T03:50:41.218750",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story follows the complete OAuth vertical slice from UI through API to external service, keeping all related code changes together",
      "example": "aero callback/route.ts \u2192 tack oauth-finalize-handler.ts \u2192 Pinterest API - all in one story for Pinterest reconnection",
      "discovered_at": "2026-01-14T04:01:56.359825",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly scopes to a single platform (Pinterest) rather than bundling multiple platform OAuth fixes",
      "example": "Only Pinterest OAuth in tack service, not mixing with Facebook OAuth that would involve zuck service",
      "discovered_at": "2026-01-14T04:01:56.363294",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Error handling improvements are bundled with the root cause fix, not split into separate stories",
      "example": "AC #4-5 (error handling) combined with AC #1 (happy path fix) since they share the same code path in oauth-finalize-handler.ts",
      "discovered_at": "2026-01-14T04:01:56.365813",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Investigation subtasks correctly trace the code path through both services involved",
      "example": "Subtask #3 traces from aero callback/route.ts to tack oauth-finalize-handler.ts - the actual dependency chain",
      "discovered_at": "2026-01-14T04:01:56.368105",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story identifies a single missing code pattern (injectPersonalization call) that exists in 39 other files but is absent from one",
      "example": "chat.ts is missing .preprocess((input) => injectPersonalization(input)) that exists in pinterest-title-and-description.ts, text.ts, and 37 other generation files",
      "discovered_at": "2026-01-14T04:01:56.370944",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies the service boundary - the fix is entirely within aero despite the feature involving brand voice",
      "example": "The story notes Primary Service: aero and that aero fetches brand data from brandy2, builds personalized prompt - no changes needed in ghostwriter service",
      "discovered_at": "2026-01-14T04:01:56.373567",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story provides exact code path and line number for the fix location",
      "example": "Specific code path: aero/packages/core/src/ghostwriter-labs/generations/chat.ts:21 - verified to be accurate",
      "discovered_at": "2026-01-14T04:01:56.375925",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story classifies as BUG FIX rather than new feature, accurately reflecting the missing implementation that exists elsewhere",
      "example": "This is a parity bug - 39/40 generation files have personalization, chat.ts is the outlier",
      "discovered_at": "2026-01-14T04:01:56.378462",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies a single missing function call as the root cause, with clear file and line number references",
      "example": "Story hypothesis targets chat.ts:21 as missing injectPersonalization(), which code examination confirmed is accurate",
      "discovered_at": "2026-01-14T04:01:56.381238",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story respects service boundaries by proposing changes only in the primary service (aero) while using existing integrations (brandy2, ghostwriter)",
      "example": "The fix is purely in aero's chat.ts and prompt definition - no changes needed to brandy2 or ghostwriter services",
      "discovered_at": "2026-01-14T04:01:56.383869",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria are coherent and all relate to the same feature flow",
      "example": "All criteria (brand preferences reflected, brand switching, error handling) are direct consequences of the missing personalization injection",
      "discovered_at": "2026-01-14T04:01:56.386219",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story provides comparative code analysis showing the pattern used in similar files",
      "example": "Story correctly notes to compare chat.ts with other generation files that successfully implement brand voice",
      "discovered_at": "2026-01-14T04:01:56.388595",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies a single UX pain point (timezone confusion) and traces it through related UI touchpoints",
      "example": "All affected components (select-time-zone-section, date-time-picker-with-timeslots, use-scheduler-toasts) are in the same service (aero) and handle the same user flow",
      "discovered_at": "2026-01-14T04:01:56.391165",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within a single service boundary despite mentioning tack in the dependency chain",
      "example": "While tack is the backend scheduling service, the story correctly identifies the fix is in aero UI only - tack stores UTC timestamps correctly and doesn't need changes",
      "discovered_at": "2026-01-14T04:01:56.393628",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story identifies a complete vertical slice from timezone selector to confirmation feedback",
      "example": "Covers: timezone selection \u2192 time display in scheduler \u2192 confirmation toast, all touching user-visible timezone context",
      "discovered_at": "2026-01-14T04:01:56.396052",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include both backend service and UI layer when fixing authentication flows",
      "example": "Story includes both tack OAuth handlers and aero callback/finisher routes as they form a complete vertical slice",
      "discovered_at": "2026-01-14T04:09:56.412607",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group token handling issues together when they share the same API flow",
      "example": "Token exchange, token refresh, and token expiration handling are all part of the same OAuth finalization flow in oauth-finalize-handler.ts",
      "discovered_at": "2026-01-14T04:09:56.415180",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Error handling and UX feedback belong in the same story as the bug fix when they address the same user flow",
      "example": "AC#4-5 (error scenarios) and AC#6 (feedback) are appropriate additions because they improve the same reconnection flow being fixed",
      "discovered_at": "2026-01-14T04:09:56.417926",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story focuses on a single missing code path in one file with a well-defined fix",
      "example": "Adding one `.preprocess((input) => injectPersonalization(input))` call to chat.ts matches the established pattern in 39 other generation files",
      "discovered_at": "2026-01-14T04:09:56.420462",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within a single vertical slice: aero's ghostwriter-labs module with its existing brandy2 integration",
      "example": "The dependency chain aero \u2192 brandy2 is already established and working for other generations; this just uses the same pattern",
      "discovered_at": "2026-01-14T04:09:56.423006",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies the primary service as aero, not ghostwriter, because brand voice injection happens in aero before calling ghostwriter",
      "example": "The injectPersonalization processor lives in aero/packages/core/src/ghostwriter-labs/processors/personalization.ts and modifies the input before it reaches the prompt",
      "discovered_at": "2026-01-14T04:09:56.425923",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story targets a single missing function call with existing infrastructure",
      "example": "chat.ts missing injectPersonalization() that exists in personalization.ts and is used by 39 other generation files",
      "discovered_at": "2026-01-14T04:09:56.428132",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story includes comparison file showing correct implementation",
      "example": "pinterest-title-and-description.ts cited as reference showing the correct pattern at line 30",
      "discovered_at": "2026-01-14T04:09:56.430170",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within service boundaries - change is in aero only, dependencies already integrated",
      "example": "brandy2 integration via getBrandForOrg() already exists; no brandy2 code changes needed",
      "discovered_at": "2026-01-14T04:09:56.432697",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Specific line number and exact code path identified in hypothesis",
      "example": "Hypothesis points to chat.ts:21 with HIGH confidence, verified by code comparison",
      "discovered_at": "2026-01-14T04:09:56.434945",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep UI consistency fixes in a single story when they share the same data flow",
      "example": "This story addresses timezone display across timeslot selector, date picker, and confirmation toasts - all using the same user.timezone value from the same data path",
      "discovered_at": "2026-01-14T04:09:56.437288",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group related UI feedback improvements together when they address the same user confusion point",
      "example": "The confirmation message, toast notification, and timeslot display all need the same fix: consistently showing '(EST)' or '(z)' timezone abbreviation",
      "discovered_at": "2026-01-14T04:09:56.439877",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Scope enhancements to a single service when the issue is purely presentation-layer",
      "example": "Even though the dependency chain mentions tack and Pinterest API, the actual fix is entirely in aero - the tack service already handles timestamps correctly in UTC",
      "discovered_at": "2026-01-14T04:09:56.442692",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bundle OAuth connection, token validation, and error handling for a SINGLE platform in one story",
      "example": "This story correctly groups Pinterest OAuth reconnection failure, token exchange, and error handling together because they all occur in the same code path (aero \u2192 tack \u2192 Pinterest API \u2192 tack \u2192 aero)",
      "discovered_at": "2026-01-14T04:18:29.315088",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include regression tests for existing functionality that shares the same code path",
      "example": "AC #3 (multiple Pinterest accounts dropdown) is appropriately included as a regression test since it uses the same OAuth callback handler in aero/packages/tailwindapp/app/dashboard/v3/api/oauth/pinterest/callback/route.ts:68-120",
      "discovered_at": "2026-01-14T04:18:29.317679",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep platform-specific OAuth isolated to its dedicated service",
      "example": "Pinterest OAuth is correctly scoped to tack service. The story does NOT bundle Facebook OAuth (zuck) or Instagram OAuth which would violate service boundaries",
      "discovered_at": "2026-01-14T04:18:29.319867",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "AVOID bundling OAuth issues from multiple platforms (Pinterest + Facebook) in the same story even if symptoms are similar",
      "example": "If the user had also mentioned Facebook reconnection issues, those should be a separate story since zuck handles Facebook OAuth, not tack",
      "discovered_at": "2026-01-14T04:18:29.322711",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story targets a single, well-defined root cause with clear code path evidence",
      "example": "This story correctly identifies that chat.ts:21 is missing the injectPersonalization preprocessor call that exists in all other generation files",
      "discovered_at": "2026-01-14T04:18:29.325110",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within a single service boundary",
      "example": "The fix is entirely within aero - the personalization.ts processor already exists and works correctly, it just needs to be wired into chat.ts",
      "discovered_at": "2026-01-14T04:18:29.327183",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story includes comparison to working implementations for verification",
      "example": "Story references pinterest-title-and-description.ts as the comparison point, which is verified in code - line 30 has the exact `.preprocess((input) => injectPersonalization(input))` call",
      "discovered_at": "2026-01-14T04:18:29.329305",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice - the change is self-contained",
      "example": "Adding the preprocessor call to chat.ts completes the entire fix; no UI changes, no database changes, no additional services needed",
      "discovered_at": "2026-01-14T04:18:29.331416",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies a single missing code pattern across similar files",
      "example": "Story pinpointed that chat.ts lacks injectPersonalization while 39 sibling files have it - verified by code inspection",
      "discovered_at": "2026-01-14T04:18:29.333712",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within single service boundary for the fix while correctly identifying dependencies",
      "example": "Fix is entirely in aero; brandy2 is correctly identified as a dependency that already works (no changes needed there)",
      "discovered_at": "2026-01-14T04:18:29.336155",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Pre-investigation hypothesis was accurate and verifiable with specific file:line references",
      "example": "Hypothesis stated 'chat.ts line 21 is missing injectPersonalization' - this was exactly correct and easily verified",
      "discovered_at": "2026-01-14T04:18:29.338412",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria align with the single root cause - all can be satisfied by the one fix",
      "example": "All criteria (brand voice output, brand switching, error handling) are naturally addressed by adding the missing preprocessor call",
      "discovered_at": "2026-01-14T04:18:29.340960",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story focuses on a single user journey (scheduling) with a single UX problem (timezone confusion). All acceptance criteria test variations of the same core behavior.",
      "example": "All ACs (happy path, edge cases, errors) relate to the scheduling confirmation flow and timezone display - they share the same code paths in aero/domains/scheduler/*",
      "discovered_at": "2026-01-14T04:18:29.343903",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies that backend (tack) already handles timezone correctly by storing UTC timestamps, so changes are scoped to frontend (aero) only.",
      "example": "The investigation subtasks correctly focus on aero code paths. No tack service modifications are required because queue-post.ts:64 already uses getUnixTime(new Date()) for UTC storage.",
      "discovered_at": "2026-01-14T04:18:29.346552",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story references specific components that need modification, enabling focused development and code review.",
      "example": "Identifies exact files: select-time-zone-section.tsx, date-time-picker-with-timeslots.tsx, use-scheduler-toasts.ts - all within aero/packages/tailwindapp/client/domains/scheduler/",
      "discovered_at": "2026-01-14T04:18:29.348621",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Focus on single user journey with all ACs testing variations of that journey",
      "example": "All 6 ACs (Happy, Edge x2, Error x2, Feedback) test different scenarios of the Pinterest reconnection flow - success, expired token redirect, multiple accounts, API errors, and feedback timing",
      "discovered_at": "2026-01-14T04:27:16.386302",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Respect the established service boundaries in OAuth architecture",
      "example": "Story correctly identifies tack as primary service for Pinterest OAuth with aero handling UI coordination, not mixing in gandalf token validation or zuck Facebook OAuth",
      "discovered_at": "2026-01-14T04:27:16.388331",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Investigation subtasks map directly to the code paths in the vertical slice",
      "example": "Subtasks reference oauth-finalize-handler.ts, get-oauth-response-handler.ts, and the aero\u2192tack trace - all files are actually in the reconnection flow as verified by reading the code",
      "discovered_at": "2026-01-14T04:27:16.390348",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Edge cases (multiple accounts, expired tokens) are still within the same feature boundary",
      "example": "AC #3 about multiple accounts is handled by existing code in callback/route.ts:71-119 - it's an edge case OF reconnection, not a separate feature",
      "discovered_at": "2026-01-14T04:27:16.392441",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single file, single root cause: The story correctly identifies that one specific file (chat.ts) is missing a standard pattern that exists in 39 sibling files",
      "example": "Story pinpoints chat.ts:21 as the exact location missing the injectPersonalization call, confirmed by code comparison",
      "discovered_at": "2026-01-14T04:27:16.395122",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Stays within service boundary: All work is contained within aero/packages/core/src/ghostwriter-labs/, no cross-service dependencies need modification",
      "example": "The ghostwriter service itself doesn't need changes - aero just needs to send the personalization data it already has access to via brandy2",
      "discovered_at": "2026-01-14T04:27:16.397346",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice: The fix touches the generation pipeline at the preprocessing layer, which flows through to the prompt and output - a complete path from input to user-visible output",
      "example": "Adding injectPersonalization will: fetch brand data \u2192 inject into prompt \u2192 produce personalized output - complete user-facing change",
      "discovered_at": "2026-01-14T04:27:16.400608",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Pre-investigation analysis is accurate: The hypothesis in the story matches exactly what code examination revealed",
      "example": "Story hypothesized missing injectPersonalization at chat.ts:21 - code shows this is precisely correct with the call needed between checkAvailableCredits and .prompt()",
      "discovered_at": "2026-01-14T04:27:16.403093",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Focus on a single missing integration point when the infrastructure already exists",
      "example": "This story correctly identifies that personalization.ts already works for 39 generation types - the issue is just wiring chat.ts to use the existing system",
      "discovered_at": "2026-01-14T04:27:16.405547",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep the story within the service that owns the integration point",
      "example": "The fix is entirely in aero (chat.ts), which is where the preprocessing chain is defined. No changes needed to brandy2 or ghostwriter services",
      "discovered_at": "2026-01-14T04:27:16.407992",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Use existing code patterns as evidence for the fix approach",
      "example": "The story correctly references comparing chat.ts with other generation files that successfully implement personalization",
      "discovered_at": "2026-01-14T04:27:16.410396",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group related UI enhancements that share the same user confusion point",
      "example": "Timezone clarity in confirmation + DST handling + validation errors all address 'user doesn't know what timezone' - single root cause",
      "discovered_at": "2026-01-14T04:27:16.412858",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Identify existing infrastructure before proposing changes",
      "example": "Story correctly identifies existing files (select-time-zone-section.tsx, date-time-picker-with-timeslots.tsx) and proposes enhancements rather than reimplementation",
      "discovered_at": "2026-01-14T04:27:16.415027",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep work within single service when the change is primarily UI-focused",
      "example": "Story stays within aero for timezone display - tack just receives UTC timestamps and doesn't need modification",
      "discovered_at": "2026-01-14T04:27:16.417514",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story follows the complete OAuth flow vertical slice across aero and tack services",
      "example": "aero UI (use-reconnect-pinterest-account.ts) \u2192 tack OAuth handlers (get-oauth-response, oauth-finalize) \u2192 aero callback (callback/route.ts) \u2192 aero error display (error.tsx)",
      "discovered_at": "2026-01-14T04:35:18.581683",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "All acceptance criteria test different aspects of the same underlying issue (OAuth reconnection)",
      "example": "Happy path tests successful reconnection, edge cases test expired tokens and multi-account scenarios, error cases test API failures - all within the same code paths",
      "discovered_at": "2026-01-14T04:35:18.584378",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Code paths identified map directly to the dependency chain in the story",
      "example": "Story identifies aero UI \u2192 tack \u2192 Pinterest API chain, code confirms this: use-reconnect-pinterest-account.ts redirects to OAuth URL \u2192 get-oauth-response-handler.ts calls generateOauthTokensFromCode() \u2192 Pinterest API",
      "discovered_at": "2026-01-14T04:35:18.586810",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Service boundaries are respected - only Pinterest OAuth services involved, not mixing with other platforms",
      "example": "Story correctly scopes to tack (Pinterest) service only, not including zuck (Facebook/Instagram) which would violate service boundaries",
      "discovered_at": "2026-01-14T04:35:18.589390",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies a single missing code path (injectPersonalization call) as the root cause with specific file/line reference",
      "example": "Story points to chat.ts:21 missing the preprocessor call, verified by code comparison with working files",
      "discovered_at": "2026-01-14T04:35:18.592011",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within a single vertical slice: UI generation request \u2192 preprocessing \u2192 prompt \u2192 response, all within aero service",
      "example": "All code changes are confined to aero/packages/core/src/ghostwriter-labs/, using existing brandy2 integration",
      "discovered_at": "2026-01-14T04:35:18.595647",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story leverages existing infrastructure rather than building new cross-service integrations",
      "example": "injectPersonalization() and getBrandForOrg() already exist and work in 39 other files - this is a parity fix",
      "discovered_at": "2026-01-14T04:35:18.598258",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story identifies a single missing function call that creates the entire defect",
      "example": "The story correctly pinpoints chat.ts:21 as missing injectPersonalization() - verified by comparing to 39 other generation files that all include this call",
      "discovered_at": "2026-01-14T04:35:18.600813",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story respects service boundaries - fix is contained to aero, with brandy2 as read-only dependency",
      "example": "No changes needed in brandy2 or ghostwriter services - the personalization.ts processor already handles brand data fetching correctly",
      "discovered_at": "2026-01-14T04:35:18.603728",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice - covers the full path from brand data to generated output",
      "example": "Story traces: aero (fetches brand from brandy2) \u2192 aero/personalization.ts (constructs prompt) \u2192 aero/chat.ts (needs to inject)",
      "discovered_at": "2026-01-14T04:35:18.606146",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story focuses on a single user flow (scheduling) within one service (aero) with all related components identified",
      "example": "All components (select-time-zone-section, date-time-picker-with-timeslots, timeslot-radio-group, schedule-confirmation-popover) are part of the same scheduling domain in aero",
      "discovered_at": "2026-01-14T04:35:18.608575",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies that timezone handling is frontend-only when backend uses Unix timestamps",
      "example": "tack service stores sendAt as Unix timestamps, so timezone display is purely an aero UI concern - no backend changes needed",
      "discovered_at": "2026-01-14T04:35:18.610834",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria are cohesive and all relate to the same root cause (timezone clarity)",
      "example": "All 6 ACs address timezone display: happy path confirmation, browser timezone changes, DST handling, missing timezone validation, loading errors, and feedback timing",
      "discovered_at": "2026-01-14T04:35:18.613124",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story specifies exact file paths for affected components, enabling accurate scope assessment",
      "example": "Technical context lists specific files like 'aero/packages/tailwindapp/client/domains/scheduler/components/date-time-picker-with-timeslots/date-time-picker-with-timeslots.tsx'",
      "discovered_at": "2026-01-14T04:35:18.615316",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep platform-specific OAuth flows in their dedicated service without mixing other platforms",
      "example": "Story correctly keeps Pinterest OAuth in tack service only, not bundling with Facebook OAuth (zuck) or Instagram OAuth",
      "discovered_at": "2026-01-14T04:44:06.510717",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice covering UI \u2192 business logic \u2192 data layer for a single user journey",
      "example": "Story covers aero UI (reconnect button, error page) \u2192 tack OAuth handlers \u2192 token storage facets, all for the 'reconnect Pinterest account' journey",
      "discovered_at": "2026-01-14T04:44:06.513777",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group related edge cases (expired token, multiple accounts) with the main flow when they share code paths",
      "example": "AC for 'expired token redirect' and 'multiple accounts dropdown' are appropriately included because they're handled in the same callback/route.ts code path",
      "discovered_at": "2026-01-14T04:44:06.516234",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria should cover the same code path's happy, edge, and error scenarios",
      "example": "All 6 ACs test variations of the OAuth flow: successful connection, expired tokens, multiple accounts, Pinterest API errors, invalid tokens, and visual feedback - all within get-oauth-response and oauth-finalize handlers",
      "discovered_at": "2026-01-14T04:44:06.518529",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single root cause with isolated fix - when a bug can be traced to one missing line of code that follows an established pattern across the codebase, this is ideal scoping",
      "example": "Adding .preprocess((input) => injectPersonalization(input)) to chat.ts matches the pattern in 39 other generation files",
      "discovered_at": "2026-01-14T04:44:06.521788",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Respects existing service boundaries - the fix stays within aero where the personalization logic is already centralized, rather than requiring changes to ghostwriter or brandy2",
      "example": "All code changes are in aero/packages/core/src/ghostwriter-labs/generations/chat.ts; brandy2 and ghostwriter are read-only dependencies",
      "discovered_at": "2026-01-14T04:44:06.524871",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies the exact file and line number where the fix is needed, with clear evidence from comparing to working implementations",
      "example": "chat.ts:21 identified as the insertion point, verified by comparing to pinterest-title-and-description.ts:30",
      "discovered_at": "2026-01-14T04:44:06.527537",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Vertical slice is complete - the story covers the full flow from user request \u2192 personalization injection \u2192 response, all within a single functional area",
      "example": "The fix enables personalization for chat without requiring UI changes, database migrations, or new APIs",
      "discovered_at": "2026-01-14T04:44:06.530921",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single missing function call as root cause - a single line of code change will fix the issue",
      "example": "Adding `.preprocess((input) => injectPersonalization(input))` at line 20 of chat.ts between checkAvailableCredits and .prompt() will enable brand voice personalization",
      "discovered_at": "2026-01-14T04:44:06.533293",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within a single service (aero) and a single feature vertical (ghostwriter personalization)",
      "example": "All code changes are in aero/packages/core/src/ghostwriter-labs/, no changes needed in brandy2 or ghostwriter services",
      "discovered_at": "2026-01-14T04:44:06.535680",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Clear pattern comparison provided - existing working implementations (39 files) vs broken implementation (1 file)",
      "example": "Story correctly identifies pinterest-title-and-description.ts as comparison file showing the expected pattern",
      "discovered_at": "2026-01-14T04:44:06.537930",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Pre-investigation analysis with verifiable hypothesis reduces investigation time",
      "example": "The hypothesis 'chat.ts is missing injectPersonalization call' was verified by examining the code - this is actionable and specific",
      "discovered_at": "2026-01-14T04:44:06.539903",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group all timezone display improvements together since they share the same root cause (unclear timezone in UI) and can be fixed in the same PR by adding timezone indicators to various display points",
      "example": "This story correctly groups timezone display in scheduler confirmation, timeslot picker, and toast messages - all related to showing users their timezone",
      "discovered_at": "2026-01-14T04:44:06.542998",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep service boundaries clean - UI changes stay in the UI service without requiring backend changes",
      "example": "This story correctly identifies that timezone conversion is client-side (aero) while tack only stores Unix timestamps, so no tack changes are needed",
      "discovered_at": "2026-01-14T04:44:06.545276",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Avoid bundling generic error handling with feature-specific improvements",
      "example": "AC#5 (Pinterest API 503 error handling) is tangentially related - it's generic API error handling, not timezone-specific. This could be a separate story about API error handling improvements",
      "discovered_at": "2026-01-14T04:44:06.547205",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include edge cases (DST, timezone changes) with the core feature when they share implementation concerns",
      "example": "AC#2 (browser timezone changes) and AC#3 (DST handling) are correctly included because they test the same timezone display code paths",
      "discovered_at": "2026-01-14T04:44:06.549553",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group acceptance criteria that test the same code path under different conditions (happy path, edge cases, errors)",
      "example": "All 6 acceptance criteria test variations of the Pinterest OAuth flow: successful connection, expired tokens, multiple accounts, API errors - all go through the same get-oauth-response-handler.ts \u2192 oauth-finalize-handler.ts path",
      "discovered_at": "2026-01-14T04:52:37.976977",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include UI coordination layer (aero) when the bug manifests at the UI but root cause is in backend service",
      "example": "Story includes both aero UI endpoints (/dashboard/v3/api/oauth/pinterest/*) and tack backend handlers, forming a complete vertical slice",
      "discovered_at": "2026-01-14T04:52:37.981850",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Document the dependency chain clearly to show why multiple services are included",
      "example": "Story documents: 'aero UI \u2192 tack (OAuth handlers) \u2192 Pinterest API' showing the exact flow and why both services are in scope",
      "discovered_at": "2026-01-14T04:52:37.984442",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single file fix with clear root cause - when the bug is a missing function call that exists in similar files, scope to that specific file",
      "example": "This story correctly identifies that chat.ts is the only file missing injectPersonalization() among 40 generation files",
      "discovered_at": "2026-01-14T04:52:37.987900",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Stays within service boundaries - the fix is entirely in aero even though ghostwriter is mentioned in the dependency chain",
      "example": "The story correctly identifies aero as the primary service and doesn't require changes to ghostwriter or brandy2",
      "discovered_at": "2026-01-14T04:52:37.990909",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice - the story addresses the full path from user input to personalized output within the aero service's generation pipeline",
      "example": "The fix covers: input validation \u2192 personalization injection \u2192 prompt construction \u2192 output generation",
      "discovered_at": "2026-01-14T04:52:37.994287",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Pre-investigation includes specific line numbers and file comparisons that were verified against actual code",
      "example": "The hypothesis about line 21 missing the preprocess call was accurate when comparing chat.ts to pinterest-title-and-description.ts",
      "discovered_at": "2026-01-14T04:52:37.997483",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within a single service boundary where the fix is needed",
      "example": "All changes are in aero/packages/core/src/ghostwriter-labs/generations/chat.ts. The brandy2 dependency already works (used by 39 other files). No changes needed to ghostwriter service or brandy2.",
      "discovered_at": "2026-01-14T04:52:38.000600",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies the dependency chain without bundling unrelated service changes",
      "example": "aero \u2192 brandy2 (via existing getBrandForOrg) is the correct chain. The story does NOT incorrectly bundle ghostwriter service changes - the LLM call happens in aero, not ghostwriter.",
      "discovered_at": "2026-01-14T04:52:38.003094",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria are testable with clear verification paths",
      "example": "Happy path: test generated content matches brand voice. Edge cases: switching brands, keywords. Error handling: brand API failure, generation failure. All can be verified with existing test infrastructure.",
      "discovered_at": "2026-01-14T04:52:38.005280",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group related UI clarity issues that affect the same user flow into a single story",
      "example": "All acceptance criteria address timezone display in the Pinterest scheduler flow - confirmation message, timeslot display, DST handling, and error states are all facets of the same user experience",
      "discovered_at": "2026-01-14T04:52:38.007998",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep UI enhancement stories within a single service when no backend changes are required",
      "example": "Although the story mentions the aero\u2192tack\u2192Pinterest dependency chain, all actual code changes are in aero UI components. The story correctly identifies this as 'Primary Service: tailwind/aero'",
      "discovered_at": "2026-01-14T04:52:38.010760",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Identify specific file paths and components that will need modification during pre-investigation",
      "example": "Story correctly identifies select-time-zone-section.tsx and date-time-picker-with-timeslots.tsx as key components to examine - these are verified by code review",
      "discovered_at": "2026-01-14T04:52:38.013241",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include edge cases (like DST) in the same story when they share the same code path",
      "example": "DST handling at line 113 of timeslot-radio-group.tsx uses the same timezone formatting code as regular scheduling - fixing clarity fixes both",
      "discovered_at": "2026-01-14T04:52:38.016456",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Focus on a single OAuth provider's complete flow rather than mixing multiple providers",
      "example": "This story focuses exclusively on Pinterest OAuth (tack service), not mixing in Facebook OAuth (zuck) or Google OAuth (gandalf)",
      "discovered_at": "2026-01-14T05:00:00.823064",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include both backend error handling and frontend error display as a complete vertical slice",
      "example": "Story includes tack handlers (get-oauth-response-handler.ts:94-103), aero API routes (callback/route.ts error redirects), and UI error page (error.tsx) with retry functionality",
      "discovered_at": "2026-01-14T05:00:00.826443",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Correctly scope token-related issues to the service that owns token management",
      "example": "Token exchange, validation, and refresh logic all live in tack/service/lib/clients/pinterestv5/oauth.ts - the story correctly identifies this as the code path to examine",
      "discovered_at": "2026-01-14T05:00:00.830732",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria cover the complete error taxonomy for this specific flow",
      "example": "ACs cover: happy path (successful connect), edge cases (expired tokens, already connected), and error cases (Pinterest 503, invalid_grant) - all within the Pinterest OAuth domain",
      "discovered_at": "2026-01-14T05:00:00.835256",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single file omission bug with clear comparison pattern - comparing chat.ts to other generation files makes the fix obvious and verifiable",
      "example": "39/40 files have injectPersonalization(), chat.ts is the only one missing it",
      "discovered_at": "2026-01-14T05:00:00.839816",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies the complete vertical slice - both the generation config AND the prompt definition need updates, and both are in the same service (aero)",
      "example": "Fix requires: 1) Add preprocess call in chat.ts, 2) Update CHAT prompt to accept and use personalizationInfo",
      "discovered_at": "2026-01-14T05:00:00.843393",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Correctly scoped within single service boundary - all changes are in aero, no cross-service coordination needed",
      "example": "Even though ghostwriter is mentioned in the dependency chain, the actual bug and fix are entirely within aero's ghostwriter-labs module",
      "discovered_at": "2026-01-14T05:00:00.846339",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Verify hypothesis with code comparison - compare broken file against working files with same expected behavior",
      "example": "Compared chat.ts (broken) against pinterest-title-and-description.ts and 38 other files (working) to confirm the missing preprocessor call",
      "discovered_at": "2026-01-14T05:00:00.849140",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single-file fix stories are ideal scope - when the fix is localized to one file, acceptance criteria should all validate that same fix",
      "example": "All acceptance criteria validate the personalization feature which is fixed by adding one line to chat.ts",
      "discovered_at": "2026-01-14T05:00:00.852184",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include dependency context without expanding scope - story correctly identifies brandy2 dependency but correctly scopes fix to aero only",
      "example": "Story mentions aero\u2192brandy2 dependency chain but correctly identifies that brandy2 already works (proven by 39 working generation files)",
      "discovered_at": "2026-01-14T05:00:00.854766",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group related UX clarity improvements that share the same user journey",
      "example": "This story bundles timezone display in confirmation, timezone error handling, and DST handling - all part of the same 'schedule a pin with timezone clarity' user flow",
      "discovered_at": "2026-01-14T05:00:00.857027",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep UI enhancement stories within a single service when the backend already handles the data correctly",
      "example": "The tack service already stores/processes timezone data correctly - this story only modifies aero UI components to display it more clearly",
      "discovered_at": "2026-01-14T05:00:00.860333",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include error handling acceptance criteria alongside happy-path criteria when they share the same code path",
      "example": "The missing timezone and past-time errors would be validated in the same form submission handler as the happy path scheduling",
      "discovered_at": "2026-01-14T05:00:00.863204",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single missing feature parity issue - identify a specific code path that differs from established patterns",
      "example": "chat.ts is the only generation file missing injectPersonalization, while 39 sibling files all have it",
      "discovered_at": "2026-01-14T05:09:01.909226",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Pre-investigation hypothesis with code path specified and verified",
      "example": "Story correctly identified chat.ts:21 as the missing call location, confirmed by code comparison",
      "discovered_at": "2026-01-14T05:09:01.912484",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Stay within a single service when the fix is contained there",
      "example": "All changes are in aero/packages/core/src/ghostwriter-labs/ - no need to touch brandy2, ghostwriter service, or other repos",
      "discovered_at": "2026-01-14T05:09:01.915834",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Leverage existing infrastructure rather than building new",
      "example": "The injectPersonalization processor and getBrandForOrg integration already exist and work - just need to wire them to chat.ts",
      "discovered_at": "2026-01-14T05:09:01.918880",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story identifies a specific missing code path verified by comparing to working implementations",
      "example": "The story correctly identified that chat.ts lacks injectPersonalization() by comparing to other generation files like instagram-caption.ts",
      "discovered_at": "2026-01-14T05:09:01.922440",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Clear vertical slice within single service with appropriate inter-service dependencies",
      "example": "Fix is contained to aero's chat.ts with legitimate brandy2 dependency for brand data - no unnecessary service crossings",
      "discovered_at": "2026-01-14T05:09:01.925803",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria directly test the identified root cause",
      "example": "Criteria test brand voice appearing in chat output, which directly validates whether injectPersonalization() is working",
      "discovered_at": "2026-01-14T05:09:01.928948",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group UI consistency fixes that address the same user confusion across a single workflow into one story",
      "example": "Timezone display in timeslot selector, confirmation toast, and confirmation popover are all part of the 'scheduling workflow' and address the same user confusion about when posts will publish",
      "discovered_at": "2026-01-14T05:09:01.932650",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include edge case handling (DST) as acceptance criteria rather than separate stories when it tests correctness of the main fix",
      "example": "DST handling verifies that the timezone display remains accurate during daylight saving transitions, testing the fix rather than being a separate feature",
      "discovered_at": "2026-01-14T05:09:01.936713",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep stories within a single service boundary when the root cause is entirely in UI/presentation layer",
      "example": "All timezone display changes are in aero frontend components - tack backend already stores UTC timestamps correctly, only the display formatting needs improvement",
      "discovered_at": "2026-01-14T05:09:01.940360",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Avoid: Including validation error handling that may require backend changes as part of a pure UI display story",
      "example": "AC #4 'timezone is required to schedule' and AC #5 'invalid timezone' may require backend validation in tack if not already implemented - these could be split if backend work is significant",
      "discovered_at": "2026-01-14T05:09:01.944109",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bundle error handling improvements with the bug fix when they're in the same code path",
      "example": "This story combines the core reconnection bug fix with specific error messaging - both changes happen in get-oauth-response-handler.ts and oauth-finalize-handler.ts",
      "discovered_at": "2026-01-14T05:17:38.839056",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep platform-specific OAuth issues isolated to their respective services",
      "example": "Pinterest OAuth stays in tack; does not mix in zuck (Facebook) or gandalf (Google/internal)",
      "discovered_at": "2026-01-14T05:17:38.842300",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include complete vertical slice from UI feedback to API error handling",
      "example": "Story covers aero UI (error toasts, success indicators) through tack OAuth handlers to Pinterest API error cases",
      "discovered_at": "2026-01-14T05:17:38.845087",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Avoid including unrelated edge cases that require separate architectural changes",
      "example": "The 'multiple Pinterest accounts dropdown' acceptance criterion is borderline - if this requires significant new UI components or API changes beyond the OAuth error handling, it should be a separate story",
      "discovered_at": "2026-01-14T05:17:38.847944",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single root cause with clear code path: Story identifies one missing line in one file that causes the entire feature gap",
      "example": "Missing .preprocess((input) => injectPersonalization(input)) in chat.ts - verified by comparing to 40+ other generation files that all have this call",
      "discovered_at": "2026-01-14T05:17:38.852385",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Stays within single service boundary: All changes contained in aero, using existing infrastructure",
      "example": "Fix only touches aero/packages/core/src/ghostwriter-labs/generations/chat.ts - the personalization processor and brand service already exist and work correctly for other generation types",
      "discovered_at": "2026-01-14T05:17:38.855644",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice: Story covers UI impact (chat responses), business logic (personalization injection), and data flow (brand retrieval from brandy2)",
      "example": "Acceptance criteria cover happy path (brand voice applied), edge cases (special characters, specific tones), and error handling (missing brand data, no preferences set)",
      "discovered_at": "2026-01-14T05:17:38.858820",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Hypothesis-driven with concrete verification steps: Story provides specific code path and expected findings",
      "example": "Pre-Investigation Analysis correctly identified line 21 as the insertion point and provided comparison to pinterest-title-and-description.ts as evidence",
      "discovered_at": "2026-01-14T05:17:38.861378",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story identifies a single missing integration point with clear evidence from comparable files",
      "example": "Story correctly identifies chat.ts is missing injectPersonalization() by comparing to 39 other generation files that have it",
      "discovered_at": "2026-01-14T05:17:38.863911",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria directly test the single root cause without scope creep",
      "example": "All 6 acceptance criteria test brand voice in chat generation - happy path, edge cases, and error handling all relate to the same feature",
      "discovered_at": "2026-01-14T05:17:38.866349",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Investigation subtasks are focused on validating the hypothesis rather than exploring unrelated areas",
      "example": "Subtask 1 audits chat.ts for injectPersonalization, Subtask 3 traces code path - both directly validate the root cause",
      "discovered_at": "2026-01-14T05:17:38.868899",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Service boundary is respected - story stays within one service even when dependencies exist",
      "example": "Story involves aero \u2192 brandy2 dependency but correctly scopes work to aero only since brandy2 integration already exists and works in 39 other files",
      "discovered_at": "2026-01-14T05:17:38.871473",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Avoid bundling generic API error handling with specific UX enhancements",
      "example": "AC#5 (Pinterest 503 error handling) has nothing to do with 'Timezone Clarity' - this is opportunistic scope creep that should be a separate reliability story",
      "discovered_at": "2026-01-14T05:17:38.873835",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Avoid mixing UI display issues with backend scheduling logic edge cases",
      "example": "AC#3 (DST spring-forward handling) requires changes to how sendAt timestamps are stored/processed in tack, not just how they're displayed in aero",
      "discovered_at": "2026-01-14T05:17:38.876259",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep UI clarity enhancements focused on the display layer",
      "example": "AC#1 and AC#2 properly scope timezone display changes to aero components (timeslot-radio-group.tsx, confirmation dialogs)",
      "discovered_at": "2026-01-14T05:17:38.878567",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Correctly identify the service dependency chain without crossing unnecessary boundaries",
      "example": "Story correctly identifies aero \u2192 tack dependency for scheduling without pulling in unrelated services like gandalf or zuck",
      "discovered_at": "2026-01-14T05:17:38.881447",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly isolates Pinterest OAuth to tack service while acknowledging the aero UI integration",
      "example": "Primary service is tack, with dependency chain aero UI \u2192 tack \u2192 Pinterest API. No unnecessary inclusion of gandalf (which handles internal auth, not Pinterest OAuth) or zuck (Facebook service).",
      "discovered_at": "2026-01-14T05:26:30.991497",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria cover the complete vertical slice from happy path to error states",
      "example": "AC includes: successful connection (happy), expired token redirect (edge), already connected state (edge), Pinterest 503 handling (error), invalid_grant handling (error), and visual feedback timing (feedback). All relate to the same reconnection flow.",
      "discovered_at": "2026-01-14T05:26:30.994235",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Code paths to examine are accurately identified and follow the actual OAuth flow",
      "example": "Story identifies get-oauth-response-handler.ts (token exchange), oauth-finalize-handler.ts (token persistence), and pinterestv5/oauth.ts (Pinterest API client) - these are exactly the files that implement the reconnection flow.",
      "discovered_at": "2026-01-14T05:26:30.996886",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Fix stays within a single service even when multiple services are in the dependency chain",
      "example": "Only aero needs modification. Brandy2 (brand data) and ghostwriter (text generation) work correctly and need no changes",
      "discovered_at": "2026-01-14T05:26:31.000106",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single file, single root cause - all user complaints trace to one missing function call",
      "example": "All feedback about 'robotic content' and 'ignored brand preferences' in chat mode stem from missing injectPersonalization() in chat.ts",
      "discovered_at": "2026-01-14T05:26:31.005056",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Code evidence provided with specific line numbers and comparison to working implementations",
      "example": "Story correctly identified chat.ts:21 as the specific code path and noted that comparing with other generation files would reveal the missing call",
      "discovered_at": "2026-01-14T05:26:31.007621",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Dependency chain correctly documented without requiring changes to dependencies",
      "example": "brandy2 integration is read-only; the fix is entirely within aero's ghostwriter-labs module",
      "discovered_at": "2026-01-14T05:26:31.010184",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single service scope for UI enhancement - all changes are in aero's scheduler domain components",
      "example": "Story correctly identifies that timezone clarity is a UI/UX issue in aero, not a backend data issue in tack. The tack service stores UTC timestamps correctly; the problem is how aero displays this to users.",
      "discovered_at": "2026-01-14T05:26:31.012836",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice - includes all layers of the feature (display, selection, confirmation)",
      "example": "Story covers timezone display in timeslot selection, custom time picker, and confirmation flow - all parts of the same user journey for scheduling a pin.",
      "discovered_at": "2026-01-14T05:26:31.015954",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Shared root cause with unified solution - all acceptance criteria address timezone communication",
      "example": "DST handling (edge case), timezone display clarity (happy path), and error handling (invalid time) all stem from the same need: making timezone context explicit in the scheduler UI.",
      "discovered_at": "2026-01-14T05:26:31.018634",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Identified specific files and code paths accurately",
      "example": "The story correctly identifies `select-time-zone-section.tsx`, `timeslot-radio-group.tsx`, and `date-time-picker-with-timeslots.tsx` as the key components - these are exactly where timezone display logic lives.",
      "discovered_at": "2026-01-14T05:26:31.021207",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bundle all acceptance criteria around a single user flow (OAuth reconnection) with various states (success, expired, error)",
      "example": "This story correctly groups happy path, edge cases (expired tokens, already connected), and error handling (503, invalid token) because they all exercise the same code path: aero UI \u2192 tack OAuth handlers \u2192 Pinterest API",
      "discovered_at": "2026-01-14T05:35:36.891925",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include both the service owner (tack) and its direct consumer (aero) when the fix requires UI error messaging changes",
      "example": "The story includes tack OAuth handlers AND aero error display components because improving error handling requires changes in both - tack to return specific error codes, aero to display user-friendly messages",
      "discovered_at": "2026-01-14T05:35:36.895446",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Scope investigation subtasks to trace a single code path end-to-end",
      "example": "The story's investigation tasks follow the actual code: oauth callback \u2192 get-oauth-response-handler \u2192 oauth.ts generateOauthTokensFromCode \u2192 temp token storage \u2192 finalize handler",
      "discovered_at": "2026-01-14T05:35:36.898309",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story provides a complete vertical slice - the fix touches one file to enable full functionality",
      "example": "Adding one preprocessor line connects UI (chat) \u2192 logic (personalization processor) \u2192 data (brand settings from brandy2)",
      "discovered_at": "2026-01-14T05:35:36.905013",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single root cause with surgical fix: All reported symptoms (robotic content, ignored preferences) trace to one missing line of code",
      "example": "Missing `.preprocess((input) => injectPersonalization(input))` at chat.ts:21 - fix is adding one line in one file",
      "discovered_at": "2026-01-14T05:35:36.908677",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Clean service boundaries: The fix stays within aero service, with existing brandy2 integration already in place via getBrandForOrg",
      "example": "personalization.ts already imports and uses getBrandForOrg from brands/server.ts - no new cross-service integration needed",
      "discovered_at": "2026-01-14T05:35:36.912244",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies the specific code path and provides accurate line numbers",
      "example": "Story points to chat.ts:21 - verified the prompt is at line 21 and personalization should be added before it",
      "discovered_at": "2026-01-14T05:35:36.915246",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice: Fix covers the single touchpoint where user input enters the generation pipeline",
      "example": "The CHAT GenerationConfig is the entry point for chat-based generation; adding personalization here covers the entire chat generation flow",
      "discovered_at": "2026-01-14T05:35:36.918430",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group related timezone display improvements together",
      "example": "AC1 (confirmation message), AC2 (browser timezone update), and AC3 (DST handling) all address the same root cause: users need clearer timezone context in the scheduling UI",
      "discovered_at": "2026-01-14T05:35:36.920995",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Do not bundle unrelated validation/error handling into a UX clarity story",
      "example": "AC5 (conflicting timeslot error) is schedule conflict detection, not timezone clarity - should be a separate story",
      "discovered_at": "2026-01-14T05:35:36.923900",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Avoid adding error handling for states that cannot occur based on code analysis",
      "example": "AC4 (error for missing timezone) may be unnecessary - code shows timezone always comes from user.timezone or browser Intl API detection",
      "discovered_at": "2026-01-14T05:35:36.926902",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep all changes within a single service when the feature is UI-only",
      "example": "All timezone display changes are in aero; tack uses Unix timestamps and needs no changes",
      "discovered_at": "2026-01-14T05:35:36.929821",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep platform-specific OAuth bugs within that platform's service (tack for Pinterest, zuck for Facebook)",
      "example": "This story correctly focuses on Pinterest OAuth in tack, without bundling unrelated Facebook OAuth issues that would live in zuck",
      "discovered_at": "2026-01-14T06:26:57.770185",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include UI feedback requirements alongside OAuth fixes - they share the same user journey and should ship together",
      "example": "AC6 (visual feedback) is properly included because OAuth is an async multi-step process where user feedback is integral to the feature, not a separate concern",
      "discovered_at": "2026-01-14T06:26:57.773851",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include edge cases that share code paths with the main fix as regression tests, not scope creep",
      "example": "AC3 (multiple Pinterest accounts) explicitly notes it 'already works' and is a regression test - this is defensive testing of shared callback handling code, not new feature work",
      "discovered_at": "2026-01-14T06:26:57.777211",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "When fixing token handling, include all token-related error scenarios (expired, invalid, API unavailable) since they share error handling code",
      "example": "AC2 (expired token), AC4 (Pinterest 503), AC5 (invalid token) all flow through the same error handling paths in oauth-finalize-handler.ts and get-oauth-response-handler.ts",
      "discovered_at": "2026-01-14T06:26:57.780712",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single missing feature in one file with existing pattern to follow",
      "example": "chat.ts is missing one preprocessor call that exists in 39 sibling files - the fix is adding one line",
      "discovered_at": "2026-01-14T06:26:57.783813",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice - the fix touches the exact code path from user input to personalized output",
      "example": "chat.ts \u2192 injectPersonalization \u2192 getBrandForOrg \u2192 brandy2 is the complete data flow",
      "discovered_at": "2026-01-14T06:26:57.789415",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Pre-investigation correctly identified the exact file and line number",
      "example": "Story accurately predicted chat.ts:21 as the location of the missing call",
      "discovered_at": "2026-01-14T06:26:57.792294",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single missing function call in one file with clear fix path",
      "example": "Story correctly identifies that adding .preprocess((input) => injectPersonalization(input)) to chat.ts at line 21 would fix the issue",
      "discovered_at": "2026-01-14T06:26:57.795323",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Respects existing architecture by leveraging existing injectPersonalization function",
      "example": "No new code architecture needed - reuses existing personalization.ts processor that works for 38 other generation types",
      "discovered_at": "2026-01-14T06:26:57.798123",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Clean vertical slice within aero service for brand voice integration",
      "example": "Fix path is: aero/chat.ts \u2192 aero/personalization.ts \u2192 aero/brands/server.ts \u2192 brandy2 (existing integration)",
      "discovered_at": "2026-01-14T06:26:57.801033",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Correctly identifies specific code path and line number",
      "example": "Story references aero/packages/core/src/ghostwriter-labs/generations/chat.ts:21 - which is correct location to add the preprocessor",
      "discovered_at": "2026-01-14T06:26:57.803818",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group related UI clarity improvements that share the same data flow",
      "example": "This story correctly bundles timezone display improvements across confirmation popover, toast messages, and time pickers - all use the same user?.timezone value and date-fns-tz formatting",
      "discovered_at": "2026-01-14T06:26:57.806796",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep enhancement work within a single service when the issue is purely presentation layer",
      "example": "Despite the mention of tack in 'aero UI \u2192 tack \u2192 Pinterest API' chain, the story correctly identifies all changes are in aero since timezone is a UI display concern, not backend logic. The Post type in tack uses Unix timestamps (sendAt: UnixTimestamp) which are timezone-agnostic.",
      "discovered_at": "2026-01-14T06:26:57.810871",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bundle error messaging improvements when they use the same toast infrastructure",
      "example": "Invalid time errors and Pinterest 503 errors both use the same use-scheduler-toasts.ts hook and createNotificationToast pattern - enhancing both in the same PR maintains consistency",
      "discovered_at": "2026-01-14T06:26:57.820218",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story focuses on a single user journey (Pinterest reconnection) across the minimal set of services required",
      "example": "Only tack (OAuth handlers) and aero (UI/middleware) are involved. Facebook OAuth in zuck is correctly excluded even though it's also 'OAuth'.",
      "discovered_at": "2026-01-14T06:36:41.502571",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria cover the same flow with different conditions (happy path, edge cases, errors)",
      "example": "AC#1 (happy path), AC#2 (expired token), AC#4-5 (API errors) all test the same reconnection flow with different inputs/states.",
      "discovered_at": "2026-01-14T06:36:41.505835",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Technical context correctly identifies the full dependency chain with specific file paths",
      "example": "The story identifies get-oauth-response-handler.ts and oauth-finalize-handler.ts as the key tack handlers, which matches the actual code structure.",
      "discovered_at": "2026-01-14T06:36:41.508859",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single file, single line fix with clear root cause",
      "example": "This story identifies exactly one missing function call in chat.ts line 21. The fix requires adding one preprocess step that already exists and is tested in 37 other files.",
      "discovered_at": "2026-01-14T06:36:41.514170",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Reuses existing proven infrastructure",
      "example": "The injectPersonalization() function, getBrandForOrg(), and brandy2 client are all already working in production. The fix simply wires up the existing functionality.",
      "discovered_at": "2026-01-14T06:36:41.518210",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice from UI to data",
      "example": "The story covers the full path: user request \u2192 chat.ts preprocessing \u2192 brand data fetch \u2192 personalized prompt \u2192 ghostwriter generation \u2192 response to user.",
      "discovered_at": "2026-01-14T06:36:41.520480",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies a single missing integration point rather than conflating multiple issues",
      "example": "The story focuses on the missing `injectPersonalization()` call in chat.ts, not on broader 'brand voice doesn't work' issues that might span multiple services",
      "discovered_at": "2026-01-14T06:36:41.523482",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Clear vertical slice: the fix path follows user input \u2192 preprocessing \u2192 prompt injection \u2192 LLM call",
      "example": "The story traces the complete flow from user input through the GenerationConfig chain, identifying exactly where personalization injection should occur",
      "discovered_at": "2026-01-14T06:36:41.529406",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Technical context includes correct code path with line number for investigation",
      "example": "Story specifies 'aero/packages/core/src/ghostwriter-labs/generations/chat.ts:21' which is the exact location where `.preprocess((input) => injectPersonalization(input))` should be added",
      "discovered_at": "2026-01-14T06:36:41.531984",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single-service UI enhancement story - all changes confined to aero frontend components",
      "example": "All timezone display fixes are in aero UI layer (schedule-slot.tsx, use-scheduler-toasts.ts, schedule-confirmation-popover-body.tsx) with no tack backend changes required",
      "discovered_at": "2026-01-14T06:36:41.534536",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Leverages existing infrastructure - reuses established patterns rather than introducing new architecture",
      "example": "Story reuses existing timezone utilities (getLocalTime, useCreateTimezoneDate, TimezoneDate) and toast infrastructure (createNotificationToast)",
      "discovered_at": "2026-01-14T06:36:41.537235",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice within service - touches UI components, hooks, and utilities that form a cohesive feature",
      "example": "Story addresses display (schedule-slot), feedback (use-scheduler-toasts), and time utilities (timezones.ts) - all parts of the timezone display chain",
      "discovered_at": "2026-01-14T06:36:41.542617",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep Pinterest OAuth issues together in stories that span aero and tack, as the OAuth flow inherently requires both services",
      "example": "This story correctly groups UI reconnection button, API routes, tack OAuth handlers, and Pinterest API integration because they form a single user journey",
      "discovered_at": "2026-01-14T06:45:55.680303",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include regression testing for related functionality as edge case ACs when modifying OAuth flows",
      "example": "AC#3 tests the multiple Pinterest accounts dropdown which already works but could break during OAuth changes",
      "discovered_at": "2026-01-14T06:45:55.683731",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Scope error handling improvements with the feature fix when they're on the same code path",
      "example": "AC#4 (503 handling) and AC#5 (invalid token) are error paths of the same OAuth flow being fixed, not separate features",
      "discovered_at": "2026-01-14T06:45:55.687030",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "AVOID bundling Pinterest OAuth with Facebook OAuth - they use different services (tack vs zuck)",
      "example": "This story correctly excludes any Facebook/Instagram reconnection issues that might have similar symptoms",
      "discovered_at": "2026-01-14T06:45:55.690110",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single missing preprocessor call with a clear fix location",
      "example": "chat.ts is missing injectPersonalization() that exists in 39 other generation files - a single line addition fixes the entire issue",
      "discovered_at": "2026-01-14T06:45:55.692722",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Service boundary respected - fix is contained within the appropriate service",
      "example": "Although the dependency chain mentions ghostwriter, the actual fix is entirely in aero's preprocessing layer. The ghostwriter service just processes whatever prompt it receives.",
      "discovered_at": "2026-01-14T06:45:55.695306",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice - covers full user flow from brand settings to chat output",
      "example": "The story addresses: aero (brand fetching via brandy2 \u2192 personalization injection \u2192 prompt building) which is the complete path for this feature",
      "discovered_at": "2026-01-14T06:45:55.698140",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria aligned with single root cause",
      "example": "All 6 acceptance criteria relate to personalization behavior in chat - no unrelated error handling or features mixed in",
      "discovered_at": "2026-01-14T06:45:55.702802",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story identifies a single missing function call that causes all reported symptoms. All user feedback ('robotic', 'ignores preferences', 'wrong tone') trace to the same root cause.",
      "example": "The missing injectPersonalization() call in chat.ts explains why brand voice, tone, and style are all absent from chat outputs.",
      "discovered_at": "2026-01-14T06:45:55.706543",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies the service boundary - the fix is entirely within aero's ghostwriter-labs module. brandy2 is a data source that already works correctly (other generation files use it successfully).",
      "example": "The injectPersonalization processor already calls getBrandForOrg() which fetches from brandy2. No brandy2 changes needed.",
      "discovered_at": "2026-01-14T06:45:55.710178",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story provides specific file:line references that were verified accurate by code examination.",
      "example": "chat.ts:21 correctly identifies the .prompt() line where injectPersonalization should precede.",
      "discovered_at": "2026-01-14T06:45:55.713440",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Pre-investigation hypothesis was correct and supported by code evidence. Comparing chat.ts to working generation files confirmed the pattern.",
      "example": "38+ other generation files include injectPersonalization; chat.ts is one of the few that doesn't.",
      "discovered_at": "2026-01-14T06:45:55.716631",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group related UI clarity improvements that share the same display context",
      "example": "This story bundles timezone display in the scheduler picker, confirmation toasts, and error messages - all are presentation-layer concerns in the same user flow",
      "discovered_at": "2026-01-14T06:45:55.719779",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep enhancement stories within a single service when the changes are UI-focused",
      "example": "Story correctly identifies aero as the primary service since timezone logic already exists in tack/backend - only the display needs enhancement",
      "discovered_at": "2026-01-14T06:45:55.722370",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Error handling acceptance criteria belong with the feature when they're simple validation",
      "example": "The 'Please select your timezone' error message is a straightforward validation check that should be implemented alongside the enhanced timezone display",
      "discovered_at": "2026-01-14T06:45:55.726760",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bundle related OAuth flow components that share the same code path",
      "example": "This story correctly groups get-oauth-response-handler.ts, oauth-finalize-handler.ts, and the oauth.ts token exchange - all part of the same Pinterest reconnection flow",
      "discovered_at": "2026-01-14T06:55:56.538562",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include UI error handling when backend changes require frontend updates",
      "example": "The story includes both tack backend (token handling) and aero frontend (error.tsx display) because improved error codes from tack need corresponding UI updates to display them",
      "discovered_at": "2026-01-14T06:55:56.541838",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Scope to a single platform when dealing with platform-specific OAuth",
      "example": "This story focuses only on Pinterest OAuth in tack, not mixing in Facebook OAuth from zuck or other platforms - respecting service boundaries",
      "discovered_at": "2026-01-14T06:55:56.544950",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include token refresh logic when addressing token-related reconnection bugs",
      "example": "The story appropriately references access-token-refresh-handler.ts since token expiration is the hypothesized root cause, keeping investigation scope appropriate",
      "discovered_at": "2026-01-14T06:55:56.547954",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story identifies a single missing code path that explains all symptoms",
      "example": "The missing injectPersonalization() call in chat.ts explains why chat generates generic copy while other features (Pinterest, Facebook, Instagram) work correctly with brand voice",
      "discovered_at": "2026-01-14T06:55:56.551125",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within a single service boundary with clear vertical slice",
      "example": "Fix is entirely in aero/packages/core/src/ghostwriter-labs/generations/chat.ts - no changes needed in ghostwriter service, brandy2, or other services",
      "discovered_at": "2026-01-14T06:55:56.554313",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story targets a single missing preprocessor call in one file, using existing infrastructure",
      "example": "chat.ts is missing injectPersonalization() while 39 other generation files have it - fix reuses existing personalization.ts processor",
      "discovered_at": "2026-01-14T06:55:56.559868",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Pre-investigation correctly identified root cause with verifiable code path evidence",
      "example": "Story cited 'aero/packages/core/src/ghostwriter-labs/generations/chat.ts:21' as the location, and code review confirms line 21 is where .prompt() is called without prior personalization injection",
      "discovered_at": "2026-01-14T06:55:56.563014",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Uses existing cross-service integration rather than building new",
      "example": "brandy2 integration via getBrandForOrg() \u2192 listBrands() is already working for 39 other generators",
      "discovered_at": "2026-01-14T06:55:56.566872",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story focuses on single user problem with single root cause - timezone confusion in scheduling UI",
      "example": "All acceptance criteria (happy, edge, error cases) relate to timezone display clarity rather than mixing unrelated features",
      "discovered_at": "2026-01-14T06:55:56.570391",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Work stays within single service boundary even when dependency chain is documented",
      "example": "Story mentions 'Aero UI \u2192 tack (scheduling logic) \u2192 Pinterest API' but all implementation work is in aero UI components only",
      "discovered_at": "2026-01-14T06:55:56.573683",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Enhancement builds on existing infrastructure rather than requiring new cross-service plumbing",
      "example": "TimezoneDate class, useTimezone hook, and timezone-aware format strings already exist - story just improves visibility of existing data",
      "discovered_at": "2026-01-14T06:55:56.576766",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria are variations of same theme (timezone clarity) across different scenarios",
      "example": "Happy path (show timezone in confirmation), edge cases (DST, travel), and errors (missing timezone) all test the same core functionality",
      "discovered_at": "2026-01-14T06:55:56.579958",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bundle bug fix with related UX improvements in the same vertical slice",
      "example": "This story correctly bundles OAuth reconnection fix (tack backend) with error messaging improvements (aero frontend) since they're the same user journey",
      "discovered_at": "2026-01-14T07:04:22.406971",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep platform-specific OAuth flows in their dedicated service",
      "example": "Pinterest OAuth stays in tack only - does not bundle with Facebook (zuck) or general auth (gandalf)",
      "discovered_at": "2026-01-14T07:04:22.410167",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include regression tests for related edge cases that share the same code path",
      "example": "AC#3 (account selection dropdown) tests the same OAuth callback handler, protecting against regressions during the fix",
      "discovered_at": "2026-01-14T07:04:22.413620",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Avoid including tangential features that don't stem from the root cause",
      "example": "If this story had included 'add new Pinterest board creation feature', that would be scope creep - it uses different code paths",
      "discovered_at": "2026-01-14T07:04:22.416838",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single root cause with single fix location - story correctly identifies exactly one missing function call in one file",
      "example": "chat.ts missing injectPersonalization() that exists in 39 other sibling files",
      "discovered_at": "2026-01-14T07:04:22.420495",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Stay within one service boundary when the fix is contained there - the entire change is in aero, no ghostwriter service changes needed",
      "example": "Story correctly scopes to aero only, even though ghostwriter service exists. The personalization happens in aero's preprocessing before calling ghostwriter.",
      "discovered_at": "2026-01-14T07:04:22.424553",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Reference existing working patterns as evidence - story compares chat.ts to pinterest-title-and-description.ts which has the correct implementation",
      "example": "Pre-investigation analysis correctly hypothesized the missing injectPersonalization call by comparing to working generators",
      "discovered_at": "2026-01-14T07:04:22.428146",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single missing function call across one file = single root cause with single fix",
      "example": "Adding .preprocess((input) => injectPersonalization(input)) to chat.ts line 21 would fix all reported symptoms",
      "discovered_at": "2026-01-14T07:04:22.431492",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Service boundary respected - fix is contained within aero, using existing brandy2 integration",
      "example": "The getBrandForOrg() function in aero already integrates with brandy2; no new cross-service work needed",
      "discovered_at": "2026-01-14T07:04:22.434771",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice - UI feedback, business logic fix, and data flow are all covered in acceptance criteria",
      "example": "Story covers error handling (brand settings not found), success path (brand voice applied), and UX feedback (visual indicators)",
      "discovered_at": "2026-01-14T07:04:22.438251",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Clear code path identified with specific line numbers for investigation",
      "example": "The story correctly identified chat.ts:21 as the location where injectPersonalization should be added",
      "discovered_at": "2026-01-14T07:04:22.441050",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story focuses on a single user journey (scheduling pins) with a clear user problem (timezone confusion)",
      "example": "All timezone display issues trace back to the scheduling flow in aero's scheduler components",
      "discovered_at": "2026-01-14T07:04:22.443952",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Service boundary is respected - all changes are in aero frontend, no unnecessary cross-service coupling",
      "example": "Story correctly identifies aero as primary service with tack as dependency chain but doesn't require tack changes",
      "discovered_at": "2026-01-14T07:04:22.446922",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Avoid bundling API error handling with UI clarity improvements - these are separate concerns with different testing strategies",
      "example": "AC #5 'Pinterest API 503 error' handling is unrelated to timezone clarity and should be a separate reliability/resilience story",
      "discovered_at": "2026-01-14T07:04:22.449881",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Code paths are correctly identified and exist in the codebase",
      "example": "select-time-zone-section.tsx, date-time-picker-with-timeslots.tsx, and use-scheduler-toasts.ts are all valid paths",
      "discovered_at": "2026-01-14T07:04:22.452582",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep OAuth reconnection fixes within the platform-specific service (tack for Pinterest, zuck for Facebook)",
      "example": "This story correctly focuses only on tack handlers (get-oauth-response, oauth-finalize) and aero UI components, not mixing in gandalf or zuck",
      "discovered_at": "2026-01-14T07:24:12.459545",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include both backend error handling and frontend error display in the same story when they're tightly coupled",
      "example": "Story includes both tack error detection improvements and aero error.tsx display updates as a complete vertical slice",
      "discovered_at": "2026-01-14T07:24:12.463899",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bundle related acceptance criteria that share the same code paths",
      "example": "AC #1 (happy path), AC #2 (expired token), and AC #4-5 (error cases) all flow through the same get-oauth-response-handler.ts \u2192 oauth-finalize-handler.ts pipeline",
      "discovered_at": "2026-01-14T07:24:12.466553",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "AVOID: Bundling OAuth fixes for different platforms in the same story",
      "example": "Would be wrong to include Facebook OAuth reconnection in this Pinterest-focused story since they use different services (zuck vs tack)",
      "discovered_at": "2026-01-14T07:24:12.469338",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single root cause identified with clear code path - adding one missing function call",
      "example": "Story identifies exact line (chat.ts:21) where injectPersonalization call is missing, verified by comparing to 39 other files that all have it",
      "discovered_at": "2026-01-14T07:24:12.472212",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Stays within single service boundary - all changes in aero",
      "example": "Fix is entirely in aero/packages/core/src/ghostwriter-labs/generations/chat.ts, no changes needed in ghostwriter service or brandy2",
      "discovered_at": "2026-01-14T07:24:12.474903",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice - fix addresses the full user experience from input to output",
      "example": "Adding personalization to chat.ts means user's brand voice settings flow through to the generated content without needing UI changes",
      "discovered_at": "2026-01-14T07:24:12.477793",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Pre-investigation analysis with high confidence backed by code comparison",
      "example": "Story correctly hypothesized missing injectPersonalization at line 21 by comparing chat.ts to pinterest-title-and-description.ts",
      "discovered_at": "2026-01-14T07:24:12.480362",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies a single missing function call as root cause across all reported symptoms",
      "example": "All user feedback ('writes like a robot', 'ignores brand preferences', 'tone is always wrong') traces to the missing injectPersonalization() preprocessor in chat.ts",
      "discovered_at": "2026-01-14T07:24:12.484048",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story provides specific line numbers and code paths that are verifiable in the codebase",
      "example": "The hypothesis 'injectPersonalization() is likely missing in chat.ts:21' is exactly correct - line 21 is the .prompt() call where the preprocess should be added before it",
      "discovered_at": "2026-01-14T07:24:12.487965",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Comparison pattern with working implementations provides clear fix template",
      "example": "Story suggests comparing with other generation files - indeed instagram-caption.ts and 35+ other files show the exact pattern needed",
      "discovered_at": "2026-01-14T07:24:12.490549",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single service focus for UI clarity enhancement - all changes contained within aero frontend components",
      "example": "The story correctly identifies that timezone clarity is a UI/UX issue in aero, not a backend scheduling logic issue in tack",
      "discovered_at": "2026-01-14T07:24:12.495744",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Vertical slice completeness - covers UI display, error handling, and edge cases (DST, travel) within the same feature",
      "example": "AC covers happy path (timezone display), edge cases (browser timezone change, DST), and error states (unavailable timezone data)",
      "discovered_at": "2026-01-14T07:24:12.499636",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Avoid bundling unrelated error handling - the time slot conflict AC doesn't share root cause with timezone clarity",
      "example": "AC for 'time slot already taken' error is about scheduling conflicts, not timezone display. This is a separate validation concern",
      "discovered_at": "2026-01-14T07:24:12.504237",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Accurate code path identification in technical context helps prevent scope creep",
      "example": "Story correctly identifies select-time-zone-section.tsx and timezone-date.ts as primary files, which code examination confirms",
      "discovered_at": "2026-01-14T07:24:12.507000",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group OAuth initiation, callback handling, and finalization in a single story when they share the same platform (Pinterest)",
      "example": "This story correctly groups /connect, /callback, and /finisher routes in aero with the corresponding tack handlers (get-oauth-response, oauth-finalize) since they form a single OAuth flow",
      "discovered_at": "2026-01-14T07:31:34.536068",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include token refresh logic when debugging reconnection failures, as they share the same token validation code paths",
      "example": "The story correctly identifies access-token-refresh-handler.ts as relevant since reconnection failures often stem from refresh token expiration (refreshTokenExpiresAfter check at line 51)",
      "discovered_at": "2026-01-14T07:31:34.539587",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep platform-specific OAuth in dedicated services - Pinterest OAuth stays in tack, Facebook would be in zuck",
      "example": "This story correctly scopes to tack service for Pinterest OAuth rather than mixing in Facebook/Instagram OAuth which lives in zuck",
      "discovered_at": "2026-01-14T07:31:34.542834",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include both the API layer (tack) and the UI orchestration layer (aero) when they form a complete user journey",
      "example": "The story includes aero's /dashboard/v3/api/oauth/pinterest/* routes and tack's handlers because they together form the complete reconnection UX flow",
      "discovered_at": "2026-01-14T07:31:34.546159",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story identifies a single missing code path (injectPersonalization call) with clear evidence from code comparison",
      "example": "Compared chat.ts to pinterest-title-and-description.ts to identify the exact missing preprocessor call",
      "discovered_at": "2026-01-14T07:31:34.549391",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "All changes contained within a single service (aero) with no unnecessary cross-service modifications",
      "example": "Fix requires modifying only chat.ts in aero; brandy2 and ghostwriter services remain unchanged",
      "discovered_at": "2026-01-14T07:31:34.552729",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies the complete vertical slice - the UI input, processing logic, and data flow are all in one service",
      "example": "aero handles chat input \u2192 personalization injection \u2192 prompt building \u2192 ghostwriter call; no splitting required",
      "discovered_at": "2026-01-14T07:31:34.556367",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Clear, verifiable hypothesis with specific file and line number",
      "example": "Hypothesis: 'chat.ts at line 21 is missing injectPersonalization' - verified by reading the actual code",
      "discovered_at": "2026-01-14T07:31:34.558959",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group symptoms that share a single code-level root cause",
      "example": "All user complaints ('feels robotic', 'ignores brand preferences', 'wrong tone') trace to one missing function call in chat.ts:21",
      "discovered_at": "2026-01-14T07:31:34.561541",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Scope stories to follow established patterns in the codebase",
      "example": "The fix follows the exact same pattern as 39 other generation files - import + single preprocessor line",
      "discovered_at": "2026-01-14T07:31:34.564220",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep changes within a single service when the integration points already exist",
      "example": "injectPersonalization() already handles brandy2 integration; no cross-service changes needed",
      "discovered_at": "2026-01-14T07:31:34.567039",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group related user experience improvements that affect the same user flow",
      "example": "Timezone display, confirmation messages, and DST handling all affect the same 'schedule a pin' flow",
      "discovered_at": "2026-01-14T07:31:34.572490",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Verify existing functionality before scoping enhancement work",
      "example": "The timeslot-radio-group.tsx already shows timezone with (z) format - the story should acknowledge this and focus on gaps",
      "discovered_at": "2026-01-14T07:31:34.577252",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bundle related OAuth operations for a single platform together since they share the same code path and root cause",
      "example": "This story correctly groups Pinterest OAuth success/failure/edge cases together because they all flow through tack's OAuth handlers and Pinterest API client",
      "discovered_at": "2026-01-14T07:39:59.878712",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include both the UI layer (aero) and backend service (tack) when they form a natural vertical slice for the same feature",
      "example": "The story correctly includes both aero/packages/tailwindapp/.../callback/route.ts and tack/service/lib/handlers/api/oauth-finalize/ because fixing OAuth requires touching both layers",
      "discovered_at": "2026-01-14T07:39:59.883082",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Distinguish between service-to-service auth (gandalf) and user-facing OAuth when describing the dependency chain",
      "example": "Story correctly identifies aero\u2192tack\u2192Pinterest API as the chain, with gandalf providing internal auth tokens rather than being part of the Pinterest OAuth flow",
      "discovered_at": "2026-01-14T07:39:59.886155",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single root cause bug with clear fix location",
      "example": "This story identifies one missing function call in one file (chat.ts:21) that should mirror the pattern in 40+ sibling files",
      "discovered_at": "2026-01-14T07:39:59.888717",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Leverages existing infrastructure without requiring new integrations",
      "example": "The injectPersonalization() function and brandy2 integration already exist and work correctly in other generation files",
      "discovered_at": "2026-01-14T07:39:59.892908",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story identifies a single missing integration point rather than requesting wholesale rearchitecture",
      "example": "The story correctly identifies chat.ts:21 as the specific code path and notes that other generation files successfully implement brand voice - indicating the infrastructure exists, just needs wiring",
      "discovered_at": "2026-01-14T07:39:59.896368",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story provides concrete, verifiable hypothesis that code review can confirm",
      "example": "Hypothesis 'injectPersonalization() is missing from chat.ts' is directly verifiable by reading the file - and confirmed as accurate",
      "discovered_at": "2026-01-14T07:39:59.901923",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep UI clarity enhancements in a single vertical slice when backend already handles data correctly",
      "example": "This story correctly identifies that tack stores Unix timestamps properly, so only aero UI components need modification for display clarity",
      "discovered_at": "2026-01-14T07:39:59.905491",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group related UI components that share the same timezone context requirement",
      "example": "select-time-zone-section, date-time-picker-with-timeslots, and timeslot-radio-group all relate to the same timezone display clarity concern",
      "discovered_at": "2026-01-14T07:39:59.908295",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Avoid mixing behavior changes with display clarity improvements in the same story",
      "example": "AC #2 (browser timezone detection on travel) is a behavior change that contradicts the documented design philosophy in timezone-date.ts, while other ACs are pure display clarity improvements",
      "discovered_at": "2026-01-14T07:39:59.911184",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single platform focus - keeping Pinterest OAuth separate from Facebook OAuth",
      "example": "Story focuses only on tack (Pinterest) and does not bundle zuck (Facebook) OAuth issues, even though both are 'OAuth problems'",
      "discovered_at": "2026-01-14T07:48:56.903106",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Specific code paths identified with exact file locations",
      "example": "Investigation subtasks point to exact handlers like 'tack/service/lib/handlers/api/oauth-finalize/oauth-finalize-handler.ts' rather than vague 'check the OAuth code'",
      "discovered_at": "2026-01-14T07:48:56.906344",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Error handling and success feedback bundled together as part of same user journey",
      "example": "ACs cover both happy path (connection succeeds) and error paths (503, invalid_grant) because they're all outcomes of the same reconnection attempt",
      "discovered_at": "2026-01-14T07:48:56.909297",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single root cause, single file fix - story correctly identifies that adding one preprocessing step to chat.ts will resolve the issue",
      "example": "Missing `.preprocess((input) => injectPersonalization(input))` call in chat.ts is the sole cause of generic chat responses",
      "discovered_at": "2026-01-14T07:48:56.912946",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Respects service boundaries - the fix is entirely within aero's preprocessing layer, not requiring changes to ghostwriter service",
      "example": "Brand personalization is injected in aero before sending to ghostwriter, following the established pattern in 39 other generation files",
      "discovered_at": "2026-01-14T07:48:56.916227",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Clean vertical slice - story covers the complete flow from brand data retrieval (brandy2) through preprocessing (aero) to output generation",
      "example": "User action \u2192 aero chat.ts preprocessing \u2192 personalization injection \u2192 ghostwriter API \u2192 personalized response",
      "discovered_at": "2026-01-14T07:48:56.919790",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Accurate pre-investigation with code path verification - the story's hypothesis matches actual code structure",
      "example": "Story cites chat.ts:21 as the specific location, and code examination confirms line 21 is where .prompt() is called without prior personalization preprocessing",
      "discovered_at": "2026-01-14T07:48:56.922824",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies a single missing function call as the root cause, with all acceptance criteria relating to that one fix",
      "example": "All themes (robotic content, ignored preferences, missing brand voice) trace to the single missing injectPersonalization() call in chat.ts",
      "discovered_at": "2026-01-14T07:48:56.926502",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within service boundaries - fix is entirely in aero, using existing brandy2 integration patterns",
      "example": "The fix follows the exact same pattern as 39 other generation files in the same directory",
      "discovered_at": "2026-01-14T07:48:56.929671",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group UI consistency issues that share the same display context",
      "example": "All timezone display issues (timeslots, toasts, confirmation popovers) are properly grouped because they all relate to surfacing timezone info the user already has stored",
      "discovered_at": "2026-01-14T07:48:56.932741",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Avoid bundling unrelated error handling with feature enhancement",
      "example": "AC #5 (Pinterest API 503 error handling) is tangentially related to the timezone clarity enhancement - it's about API errors, not timezone confusion. Consider splitting this into a separate error handling story",
      "discovered_at": "2026-01-14T07:48:56.936129",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep platform-specific OAuth issues within their dedicated service",
      "example": "This story correctly scopes Pinterest OAuth to tack+aero only, not bundling with Facebook OAuth (which would require zuck)",
      "discovered_at": "2026-01-14T07:57:17.187913",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include error handling improvements when they are part of the bug fix UX",
      "example": "The error feedback ACs are not scope creep - they are essential for users to understand auth failures (currently the generic 'error=true' redirect at get-oauth-response-handler.ts:102 provides no actionable info)",
      "discovered_at": "2026-01-14T07:57:17.193309",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Specify exact code paths and database queries for investigation",
      "example": "Story correctly identifies the token handling in get-oauth-response-handler.ts and oauth-finalize-handler.ts with specific line references",
      "discovered_at": "2026-01-14T07:57:17.196662",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice - story covers the UI impact, the specific code path, and how to verify the fix",
      "example": "Story traces from user input \u2192 chat.ts \u2192 personalization.ts \u2192 brandy2 for brand data, covering the full flow",
      "discovered_at": "2026-01-14T07:57:17.202674",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single service scope - all changes are within aero repository, no cross-service coordination needed",
      "example": "Fix is entirely in aero/packages/core/src/ghostwriter-labs/generations/chat.ts - brandy2 and ghostwriter service are just dependencies, not changes",
      "discovered_at": "2026-01-14T07:57:17.206435",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bug fix with established pattern - the fix follows an existing pattern from other files, reducing implementation risk",
      "example": "The injectPersonalization pattern is already used in pinterest-title-and-description.ts, facebook-post.ts, instagram-caption.ts, twitter-post.ts, text.ts - just need to apply same pattern to chat.ts",
      "discovered_at": "2026-01-14T07:57:17.210392",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story identifies a single missing feature in one file with clear code path evidence",
      "example": "Hypothesis correctly identified chat.ts:21 as the exact location where injectPersonalization() should be added, confirmed by comparing to 36 other generation files that all follow the same pattern",
      "discovered_at": "2026-01-14T07:57:17.214172",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Dependency chain is accurate and stays within natural service boundaries",
      "example": "aero \u2192 brandy2 dependency is correct; the existing injectPersonalization() infrastructure already handles this flow, so no cross-service changes needed",
      "discovered_at": "2026-01-14T07:57:17.217614",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bundle related UI/UX improvements for the same user confusion point in one story",
      "example": "Timezone display in confirmation toast + timezone indicator in picker + timezone validation error - all address the same 'timezone clarity' problem",
      "discovered_at": "2026-01-14T07:57:17.221824",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep platform-specific features scoped to their platform",
      "example": "Story focuses on Pinterest scheduler only, doesn't try to also fix Instagram/Facebook scheduler timezone issues",
      "discovered_at": "2026-01-14T07:57:17.224996",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Reference backend services for context but don't modify if architecture already handles it",
      "example": "Story documents tack dependency but correctly identifies all changes are UI-only since tack already stores timezone-agnostic Unix timestamps",
      "discovered_at": "2026-01-14T07:57:17.228459",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Group validation + display + error handling for the same feature as one story",
      "example": "Timezone display, missing timezone validation, and timezone unavailable error handling all relate to the same 'timezone clarity' enhancement",
      "discovered_at": "2026-01-14T07:57:17.231982",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bundle platform-specific OAuth components together (UI routes + token handlers + API clients) when they share the same external API dependency",
      "example": "This story correctly bundles aero Pinterest OAuth routes with tack Pinterest OAuth handlers - both are part of the Pinterest OAuth vertical slice",
      "discovered_at": "2026-01-14T08:09:32.104307",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep investigation focused on a single dependency chain from UI to external API",
      "example": "Story follows aero UI \u2192 tack handlers \u2192 Pinterest API chain, not mixing in unrelated services like gandalf or zuck",
      "discovered_at": "2026-01-14T08:09:32.108661",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "All acceptance criteria should test the same user flow with variations (happy path, edge cases, error cases)",
      "example": "All 6 ACs test the Pinterest connect flow: successful connect, expired token, already connected, API 503, invalid token, and feedback timing",
      "discovered_at": "2026-01-14T08:09:32.112560",
      "source": "scoping_validation"
    },
    {
      "type": "bad_pattern",
      "description": "Avoid bundling different platform OAuth issues in the same story (e.g., Pinterest + Facebook)",
      "example": "This story correctly avoids including zuck (Facebook OAuth) even though both are 'OAuth issues' - they have different code paths and services",
      "discovered_at": "2026-01-14T08:09:32.116225",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single file bug fix: When a feature works in N-1 places but fails in 1 place due to a missing function call, scope to that single location",
      "example": "39/40 generation files have injectPersonalization, chat.ts is the only exception - single PR to add the missing preprocessor",
      "discovered_at": "2026-01-14T08:09:32.120430",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Verify where logic actually lives before assuming service boundaries: Brand voice integration is in aero, not ghostwriter",
      "example": "Story correctly identifies aero as primary service - personalization.ts lives in aero and calls brandy2, ghostwriter is just the AI completion backend",
      "discovered_at": "2026-01-14T08:09:32.123722",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice: The story covers UI feedback, personalization injection, brand data fetching, and error handling for a single feature path",
      "example": "User requests chat \u2192 aero fetches brand \u2192 aero injects personalization \u2192 aero sends to ghostwriter \u2192 aero returns personalized response",
      "discovered_at": "2026-01-14T08:09:32.127458",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within a single service boundary (aero) even though personalization involves brandy2 - the integration already exists",
      "example": "The existing injectPersonalization() function in aero already handles the brandy2 integration via getBrandForOrg() - no cross-service changes needed",
      "discovered_at": "2026-01-14T08:09:32.133173",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Clean vertical slice - single endpoint with complete fix path from preprocessing to prompt",
      "example": "Fix is contained to /api/v1/ghostwriter/generate endpoint's chat generation flow in aero",
      "discovered_at": "2026-01-14T08:09:32.136323",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bundle related UI clarity issues that share the same component tree",
      "example": "This story groups timezone display in the date picker, timeslot display, and confirmation toast - all within aero/packages/tailwindapp/client/domains/scheduler/* and sharing the useTimezone hook and getLocalTime utility.",
      "discovered_at": "2026-01-14T08:09:32.139212",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include error handling acceptance criteria that use the same code paths as happy paths",
      "example": "The invalid time error (AC4) and Pinterest API error (AC5) both involve the same scheduling flow and toast system (use-scheduler-toasts.ts), so they belong in the same story.",
      "discovered_at": "2026-01-14T08:09:32.142351",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Keep backend API changes separate from frontend-only UX improvements",
      "example": "This story correctly identifies that tack stores Unix timestamps and timezone is a pure frontend concern. No tack changes are needed, keeping the story focused on aero.",
      "discovered_at": "2026-01-14T08:09:32.145116",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Include DST edge cases when the core feature involves timezone handling",
      "example": "AC3 (DST handling) is properly scoped because it tests the same timezone conversion logic in getLocalTime() and date-fns-tz that the main feature relies on.",
      "discovered_at": "2026-01-14T08:09:32.148120",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story focuses on a single OAuth flow (Pinterest) across only the required services (aero for UI, tack for token handling)",
      "example": "The story correctly identifies both aero callback routes and tack OAuth handlers as the scope, not mixing in Facebook OAuth (zuck) or unrelated auth flows",
      "discovered_at": "2026-01-14T08:17:48.543015",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Technical context correctly identifies the code path without bundling unrelated components",
      "example": "Story specifies get-oauth-response-handler.ts and oauth-finalize-handler.ts as the key files, which aligns with the actual OAuth token exchange logic found in the codebase",
      "discovered_at": "2026-01-14T08:17:48.547257",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Error patterns to search are specific and actionable",
      "example": "'invalid_grant' and 'ECONNREFUSED' are relevant error patterns that would appear in tack logs based on the axios error handling in oauth.ts and base.ts",
      "discovered_at": "2026-01-14T08:17:48.550533",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single file fix with clear root cause: Story correctly identifies that one missing preprocessor call in one file causes the entire issue",
      "example": "The story pinpoints chat.ts:21 as needing `.preprocess((input) => injectPersonalization(input))` - this is accurate based on code comparison",
      "discovered_at": "2026-01-14T08:17:48.555100",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Stays within single service boundary: All changes are within aero, the dependency on brandy2 is already handled by existing getBrandForOrg infrastructure",
      "example": "Story correctly identifies aero as primary service; brandy2 integration already works via personalization.ts - no brandy2 changes needed",
      "discovered_at": "2026-01-14T08:17:48.559619",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice: Story covers the full path from user input through brand data injection to AI response",
      "example": "Acceptance criteria cover happy path (brand voice applied), edge cases (different brand voices, no brand set), and error handling (API failures)",
      "discovered_at": "2026-01-14T08:17:48.563770",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Pre-investigation with code comparison: Story provides comparison to working implementation for verification",
      "example": "Referencing pinterest-title-and-description.ts as the pattern to follow, which I verified contains the exact call structure needed",
      "discovered_at": "2026-01-14T08:17:48.567457",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story identifies a single missing code pattern by comparing against working implementations",
      "example": "The story correctly hypothesized the missing injectPersonalization() call by comparing chat.ts to other generation files that work correctly (instagram-caption.ts, facebook-post.ts)",
      "discovered_at": "2026-01-14T08:17:48.571103",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Acceptance criteria all verify the same root cause fix from different angles",
      "example": "Happy path (brand voice applies), edge case (brand switching), and error cases (brandy2 down) all test the same feature - once injectPersonalization is added to chat.ts, all scenarios are covered",
      "discovered_at": "2026-01-14T08:17:48.574819",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Changes confined to a single file with no new service integrations needed",
      "example": "The entire fix is adding `.preprocess((input) => injectPersonalization(input))` to chat.ts - the personalization processor and brandy2 integration already exist and work",
      "discovered_at": "2026-01-14T08:17:48.578412",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story focuses on a single service (aero) and a single user flow (Pinterest scheduling timezone clarity)",
      "example": "All identified components (select-time-zone-section, date-time-picker-with-timeslots, timeslot-radio-group, schedule-confirmation-popover) are in aero/packages/tailwindapp/client/domains/scheduler/",
      "discovered_at": "2026-01-14T08:17:48.582429",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story correctly identifies tack as a dependency but does not bundle tack changes - tack only handles backend scheduling logic, timezone display is purely a UI concern",
      "example": "Technical Context states 'Aero UI communicates with tack for scheduling via REST API calls' - the story correctly scopes to UI changes in aero only",
      "discovered_at": "2026-01-14T08:17:48.587247",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "All acceptance criteria target the same component hierarchy and can be addressed with UI-only changes",
      "example": "Happy path (confirmation message), edge cases (DST, travel), and error cases all relate to displaying timezone context in the same DateTimePickerWithTimeslots component tree",
      "discovered_at": "2026-01-14T08:17:48.591162",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story is a complete vertical slice - UI display changes that don't require backend modifications",
      "example": "The timezone data already exists in the system (user?.timezone), the fix involves displaying it more prominently in the UI confirmation flow",
      "discovered_at": "2026-01-14T08:17:48.596101",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single user journey scope - the story focuses on one complete user action (reconnecting Pinterest account) from button click to success/failure",
      "example": "OAuth flow: pinterestv5o-auth-button.tsx \u2192 callback route \u2192 TailwindPinterestOauthCompleter \u2192 tack handlers",
      "discovered_at": "2026-01-14T08:27:11.866487",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Respects service architecture - Pinterest OAuth stays in tack (platform-specific service), UI stays in aero",
      "example": "All OAuth token handling in tack/service/lib/handlers/api/*, UI components in aero/packages/tailwindapp/client/domains/pinteresto-auth/",
      "discovered_at": "2026-01-14T08:27:11.870571",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice - includes UI feedback, backend logic, and data layer considerations",
      "example": "Story covers UI error toasts, tack OAuth handlers, and oauth_tokens state checking",
      "discovered_at": "2026-01-14T08:27:11.874404",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Focused error handling - all error scenarios (503, invalid_grant, expired token) occur in the same code paths",
      "example": "Error handling consolidation possible in get-oauth-response-handler.ts catch block (lines 94-103) and oauth-finalize-handler.ts catch block (lines 106-117)",
      "discovered_at": "2026-01-14T08:27:11.878503",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Single root cause with surgical fix location identified by code path comparison",
      "example": "Story correctly identifies chat.ts:21 as the missing call by comparing to pinterest-title-and-description.ts:30 which has the correct pattern",
      "discovered_at": "2026-01-14T08:27:11.882404",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Stays within a single service (aero) when the issue is entirely contained there",
      "example": "Even though the story mentions brandy2 and ghostwriter dependencies, the actual code change is only in aero - brandy2/ghostwriter are just API consumers",
      "discovered_at": "2026-01-14T08:27:11.886267",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Complete vertical slice - the preprocessor handles both data fetching (brands) and prompt injection",
      "example": "injectPersonalization() in personalization.ts already handles the full flow: check user prefs \u2192 fetch brand \u2192 build prompt \u2192 return enriched input",
      "discovered_at": "2026-01-14T08:27:11.890119",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Bug fix story correctly scoped as consistency fix (missing pattern application) rather than new feature",
      "example": "Story type is BUG FIX - correctly categorized since this is applying an existing pattern that was missed, not building new functionality",
      "discovered_at": "2026-01-14T08:27:11.894064",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story identifies a specific missing function call by comparing to working implementations",
      "example": "Story correctly identified chat.ts lacks injectPersonalization by comparing to pinterest-title-and-description.ts which has it",
      "discovered_at": "2026-01-14T08:27:11.897755",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story reuses existing infrastructure rather than creating new service integrations",
      "example": "The injectPersonalization processor and brandy2 integration already exist - fix only requires wiring them into chat.ts",
      "discovered_at": "2026-01-14T08:27:11.901291",
      "source": "scoping_validation"
    },
    {
      "type": "good_pattern",
      "description": "Story stays within service boundaries by modifying only the consuming service",
      "example": "All changes are in aero; brandy2 already exposes the needed getBrandForOrg API",
      "discovered_at": "2026-01-14T08:27:11.904888",
      "source": "scoping_validation"
    }
  ],
  "service_insights": {
    "tack": [
      {
        "finding": "1) Timezone infrastructure already exists - user timezone is stored and passed through context (date-time-picker-with-timeslots-provider.tsx:19,88). 2) TimeslotRadioGroup already shows timezone via '(",
        "discovered_at": "2026-01-14T03:33:40.858552"
      },
      {
        "finding": "The code shows a clean vertical slice: (1) get-oauth-response-handler.ts processes Pinterest's OAuth response and creates temp tokens, (2) oauth-finalize-handler.ts converts temp tokens to permanent s",
        "discovered_at": "2026-01-14T03:41:43.152578"
      },
      {
        "finding": "The timezone infrastructure is already robust: (1) select-time-zone-section.tsx manages user timezone preferences and stores them via updateUser API. (2) timeslot-radio-group.tsx already displays time",
        "discovered_at": "2026-01-14T03:41:43.152633"
      },
      {
        "finding": "The OAuth flow correctly routes through tack (Pinterest-specific) and not gandalf (Google OAuth only). Error handling in get-oauth-response-handler.ts line 102 returns generic '?error=true' redirect w",
        "discovered_at": "2026-01-14T03:50:41.218799"
      },
      {
        "finding": "1) TimeslotRadioGroup already displays timezone abbreviation via format 'EEE, MMM d, yyyy, h:mmaa (z)' - so timeslots DO show timezone. 2) HOWEVER, use-scheduler-toasts.ts line 32 uses format 'MMM d, ",
        "discovered_at": "2026-01-14T03:50:41.218866"
      },
      {
        "finding": "The story correctly identifies the Pinterest OAuth flow as a single vertical slice. Code examination confirms: (1) oauth-finalize-handler.ts:42-48 shows temp token lookup returns 404 if not found; (2)",
        "discovered_at": "2026-01-14T04:01:56.396091"
      },
      {
        "finding": "1) TimeslotRadioGroup (line 113) already displays timezone abbreviation using format(sendAt, 'EEE, MMM d, yyyy, h:mmaa (z)'). 2) Success toast in use-scheduler-toasts.ts:32 does NOT include timezone: ",
        "discovered_at": "2026-01-14T04:01:56.396616"
      },
      {
        "finding": "The Pinterest OAuth flow is entirely contained within tack (backend) and aero (UI). The flow is: aero UI \u2192 tack /oauth/redirect \u2192 Pinterest \u2192 tack /oauth/response (creates temp token) \u2192 aero callback ",
        "discovered_at": "2026-01-14T04:09:56.442817"
      },
      {
        "finding": "1) timeslot-radio-group.tsx:113 already displays timezone abbreviation in format 'EEE, MMM d, yyyy, h:mmaa (z)' - this is good existing behavior. 2) use-scheduler-toasts.ts:32 shows success toast WITH",
        "discovered_at": "2026-01-14T04:09:56.442933"
      },
      {
        "finding": "The OAuth flow is well-contained: (1) aero triggers reconnect via use-reconnect-pinterest-account.ts:16 which redirects to Pinterest, (2) tack's get-oauth-response-handler.ts:37 exchanges the authoriz",
        "discovered_at": "2026-01-14T04:18:29.348678"
      },
      {
        "finding": "The timeslot-radio-group.tsx:113 already displays timezone with format 'EEE, MMM d, yyyy, h:mmaa (z)' showing the timezone abbreviation. However, use-scheduler-toasts.ts:32 formats the success toast a",
        "discovered_at": "2026-01-14T04:18:29.349249"
      },
      {
        "finding": "The OAuth flow is a clean vertical slice: UI button (pinterestv5o-auth-button.tsx) triggers redirect to tack's /oauth/connect, tack handles Pinterest OAuth callback via get-oauth-response-handler.ts (",
        "discovered_at": "2026-01-14T04:27:16.417571"
      },
      {
        "finding": "Timezone infrastructure already exists: (1) DateTimePickerWithTimeslotsProvider accepts timezone prop (line 39, 46, 88), (2) TimeslotRadioGroup already formats times with timezone using format string ",
        "discovered_at": "2026-01-14T04:27:16.417653"
      },
      {
        "finding": "The OAuth flow follows a clear path: aero UI initiates \u2192 tack get-oauth-response-handler processes Pinterest callback \u2192 tack oauth-finalize-handler persists tokens \u2192 aero callback route completes the ",
        "discovered_at": "2026-01-14T04:35:18.615400"
      },
      {
        "finding": "1) timeslot-radio-group.tsx:113 already formats times with timezone abbreviation using format(sendAt, 'EEE, MMM d, yyyy, h:mmaa (z)'), showing partial timezone support exists. 2) date-time-field.tsx:8",
        "discovered_at": "2026-01-14T04:35:18.615465"
      },
      {
        "finding": "The OAuth flow is a single vertical slice: (1) aero triggers OAuth via use-reconnect-pinterest-account.ts, (2) tack's get-oauth-response-handler.ts exchanges code with Pinterest API via generateOauthT",
        "discovered_at": "2026-01-14T04:44:06.549610"
      },
      {
        "finding": "1. timeslot-radio-group.tsx (line 113) already includes timezone abbreviation in format 'EEE, MMM d, yyyy, h:mmaa (z)'. 2. use-scheduler-toasts.ts (line 32) displays scheduled time as 'MMM d, h:mmaa' ",
        "discovered_at": "2026-01-14T04:44:06.549658"
      },
      {
        "finding": "The OAuth flow is cleanly isolated: aero initiates via /connect, redirects to tack's /oauth/response which exchanges code for tokens with Pinterest API (oauth.ts:28-60), stores temp token, then aero's",
        "discovered_at": "2026-01-14T04:52:38.016479"
      },
      {
        "finding": "The code already handles timezone correctly - timeslot-radio-group.tsx line 113 shows timezone abbreviation via format() with '(z)' pattern. The timezone is passed through the component hierarchy from",
        "discovered_at": "2026-01-14T04:52:38.017246"
      },
      {
        "finding": "The OAuth flow is a clean vertical slice: aero UI (pinterestv5o-auth-button.tsx) \u2192 aero API routes (connect/route.ts, callback/route.ts) \u2192 tack service (get-oauth-response-handler.ts, oauth-finalize-h",
        "discovered_at": "2026-01-14T05:00:00.863286"
      },
      {
        "finding": "1. Timezone IS already displayed in timeslot selector (timeslot-radio-group.tsx:113-115 uses format 'EEE, MMM d, yyyy, h:mmaa (z)'). 2. Timezone is NOT shown in success toast (use-scheduler-toasts.ts:",
        "discovered_at": "2026-01-14T05:09:01.944195"
      },
      {
        "finding": "The OAuth flow is: aero (connect route) \u2192 tack (Pinterest OAuth) \u2192 Pinterest API \u2192 tack (get-oauth-response-handler) \u2192 aero (callback route) \u2192 tack (oauth-finalize-handler). The generic error handling",
        "discovered_at": "2026-01-14T05:17:38.881551"
      },
      {
        "finding": "Line 113 of timeslot-radio-group.tsx already displays timezone using format 'EEE, MMM d, yyyy, h:mmaa (z)' - the (z) shows timezone abbreviation. The core enhancement is about adding explicit timezone",
        "discovered_at": "2026-01-14T05:17:38.881640"
      },
      {
        "finding": "The OAuth flow is a clean vertical slice: (1) aero UI triggers reconnect via use-reconnect-pinterest-account.ts which redirects to Pinterest, (2) Pinterest callback hits tack's get-oauth-response-hand",
        "discovered_at": "2026-01-14T05:26:31.021311"
      },
      {
        "finding": "The codebase already has solid timezone infrastructure in place. The `timeslot-radio-group.tsx` formats times with timezone abbreviation (line 113: `format(sendAt, 'EEE, MMM d, yyyy, h:mmaa (z)', { ti",
        "discovered_at": "2026-01-14T05:26:31.021393"
      },
      {
        "finding": "The OAuth flow is well-contained: (1) tack handles all Pinterest OAuth via get-oauth-response-handler.ts and oauth-finalize-handler.ts, (2) aero provides the UI layer with use-reconnect-pinterest-acco",
        "discovered_at": "2026-01-14T05:35:36.929871"
      },
      {
        "finding": "TimeslotRadioGroup (line 113) already displays timezone using format 'EEE, MMM d, yyyy, h:mmaa (z)' which includes timezone abbreviation. DateTimePicker has no timezone display. ConfirmationPopover is",
        "discovered_at": "2026-01-14T05:35:36.929946"
      },
      {
        "finding": "The OAuth flow is well-defined: aero UI \u2192 tack get-oauth-response-handler \u2192 Pinterest API \u2192 tack oauth-finalize-handler \u2192 aero callback. Error handling in oauth-finalize-handler.ts (lines 106-117) cat",
        "discovered_at": "2026-01-14T06:26:57.820342"
      },
      {
        "finding": "1) The timeslot-radio-group.tsx already displays timezone in format 'EEE, MMM d, yyyy, h:mmaa (z)' - so timeslots DO show timezone. 2) The use-scheduler-toasts.ts formats success messages as 'Schedule",
        "discovered_at": "2026-01-14T06:26:57.820437"
      },
      {
        "finding": "The OAuth flow is well-defined: aero initiates via /connect, redirects to tack's /oauth/response which calls Pinterest API via oauth.ts:generateOauthTokensFromCode(), stores temp token, then aero's /c",
        "discovered_at": "2026-01-14T06:36:41.542643"
      },
      {
        "finding": "1) timeslot-radio-group.tsx line 113 already uses format 'EEE, MMM d, yyyy, h:mmaa (z)' with timezone. 2) schedule-slot.tsx lines 42-44 only show 'h:mm a' format WITHOUT timezone. 3) use-scheduler-toa",
        "discovered_at": "2026-01-14T06:36:41.543303"
      },
      {
        "finding": "The OAuth flow is well-defined: aero UI triggers reconnection via use-reconnect-pinterest-account.ts \u2192 aero's /connect route initiates via TackOauthFactory \u2192 tack's get-oauth-response-handler.ts excha",
        "discovered_at": "2026-01-14T06:45:55.726831"
      },
      {
        "finding": "The OAuth flow is well-contained within tack service. The get-oauth-response-handler.ts (line 37-39) calls generateOauthTokensFromCode which exchanges auth codes for tokens via Pinterest API at api.pi",
        "discovered_at": "2026-01-14T06:55:56.580028"
      },
      {
        "finding": "The timezone infrastructure already exists - TimezoneDate class handles conversions, use-time-zone hook retrieves user/browser timezone, and time pickers use format strings like 'p (z)' and 'p zzz' th",
        "discovered_at": "2026-01-14T06:55:56.580094"
      },
      {
        "finding": "OAuth flow is properly isolated: tack handles Pinterest API communication (generateOauthTokensFromCode, refreshAccessToken) while aero handles UI/routing. The access-token-refresh-handler.ts shows tok",
        "discovered_at": "2026-01-14T07:04:22.452644"
      },
      {
        "finding": "1) The timeslot picker ALREADY shows timezone - timeslot-radio-group.tsx:113 uses format 'EEE, MMM d, yyyy, h:mmaa (z)' with timezone abbreviation. 2) The SUCCESS TOAST does NOT show timezone - use-sc",
        "discovered_at": "2026-01-14T07:04:22.452694"
      },
      {
        "finding": "The OAuth flow is well-contained: aero UI triggers OAuth via getPinterestV5OAuthRedirectUrl, tack's get-oauth-response-handler.ts processes Pinterest callback (lines 94-103 show generic error handling",
        "discovered_at": "2026-01-14T07:24:12.507058"
      },
      {
        "finding": "1) TimezoneDate class at timezone-date.ts:36-284 provides robust timezone handling infrastructure including DST-aware conversions via date-fns-tz. 2) TimeslotPicker at timeslot-picker.tsx:40 already i",
        "discovered_at": "2026-01-14T07:24:12.507124"
      },
      {
        "finding": "The OAuth flow is a clean vertical slice: aero initiates via /connect/route.ts \u2192 redirects to tack \u2192 tack's get-oauth-response-handler.ts calls Pinterest API via oauth.ts (generateOauthTokensFromCode)",
        "discovered_at": "2026-01-14T07:31:34.577319"
      },
      {
        "finding": "1) Timezone is ALREADY displayed in timeslot-radio-group.tsx:113-115 using format 'h:mmaa (z)'. 2) Success toast in use-scheduler-toasts.ts:32 already formats with user timezone. 3) date-time-field.ts",
        "discovered_at": "2026-01-14T07:31:34.577381"
      },
      {
        "finding": "The OAuth flow is a clean vertical slice: aero UI routes call TailwindPinterestOauthCompleter which uses getTackServerClient() to call tack's /oauth/finalize endpoint. Tack handles all Pinterest OAuth",
        "discovered_at": "2026-01-14T07:39:59.911275"
      },
      {
        "finding": "TimeslotRadioGroup already displays timezone abbreviation via format string 'EEE, MMM d, yyyy, h:mmaa (z)'. The TimezoneDate class documents a deliberate design choice: 'We want to keep the user inter",
        "discovered_at": "2026-01-14T07:39:59.911337"
      },
      {
        "finding": "The OAuth flow is a clean vertical slice: aero/connect initiates \u2192 redirects to Pinterest \u2192 tack/get-oauth-response exchanges code for tokens \u2192 saves temp token \u2192 redirects to aero/callback \u2192 aero cal",
        "discovered_at": "2026-01-14T07:48:56.936196"
      },
      {
        "finding": "The timezone infrastructure is already in place. timeslot-radio-group.tsx:113 already displays timezone with format 'h:mmaa (z)' which includes timezone abbreviation. However, use-scheduler-toasts.ts:",
        "discovered_at": "2026-01-14T07:48:56.936270"
      },
      {
        "finding": "The Pinterest OAuth flow is entirely contained within tack (token exchange via generateOauthTokensFromCode at line 28 of oauth.ts, finalization at oauth-finalize-handler.ts) and aero (callback handlin",
        "discovered_at": "2026-01-14T07:57:17.232011"
      },
      {
        "finding": "The backend (tack) stores sendAt as Unix timestamps (timezone-agnostic), so no backend changes needed. All timezone conversion happens in aero frontend. Current toast messages (use-scheduler-toasts.ts",
        "discovered_at": "2026-01-14T07:57:17.232540"
      },
      {
        "finding": "The Pinterest OAuth flow is a clean vertical slice: aero initiates (connect route) \u2192 tack exchanges tokens (get-oauth-response-handler) \u2192 aero receives callback \u2192 tack finalizes (oauth-finalize-handle",
        "discovered_at": "2026-01-14T08:09:32.148175"
      },
      {
        "finding": "1) The timeslot-radio-group.tsx (line 113) already displays timezone using format 'EEE, MMM d, yyyy, h:mmaa (z)' which includes the timezone abbreviation. 2) The useTimezone hook correctly falls back ",
        "discovered_at": "2026-01-14T08:09:32.148796"
      },
      {
        "finding": "The OAuth flow is well-contained: aero initiates OAuth via TackOauthFactory, tack's get-oauth-response-handler.ts calls generateOauthTokensFromCode() to exchange authorization code for tokens, and oau",
        "discovered_at": "2026-01-14T08:17:48.596165"
      },
      {
        "finding": "The OAuth flow is well-contained: aero UI triggers connect via pinterestv5o-auth-button.tsx \u2192 callback route calls TailwindPinterestOauthCompleter \u2192 which calls tack's finalizeOauth endpoint \u2192 tack ha",
        "discovered_at": "2026-01-14T08:27:11.904923"
      }
    ],
    "aero": [
      {
        "finding": "chat.ts (line 21) is missing `.preprocess((input) => injectPersonalization(input))` that all 39 other generation files have. The injectPersonalization function and brand data flow (aero\u2192brandy2 via ge",
        "discovered_at": "2026-01-14T04:09:56.442916"
      },
      {
        "finding": "1) timeslot-radio-group.tsx:113 already displays timezone abbreviation in format 'EEE, MMM d, yyyy, h:mmaa (z)' - this is good existing behavior. 2) use-scheduler-toasts.ts:32 shows success toast WITH",
        "discovered_at": "2026-01-14T04:09:56.442936"
      },
      {
        "finding": "The OAuth flow is well-contained: (1) aero triggers reconnect via use-reconnect-pinterest-account.ts:16 which redirects to Pinterest, (2) tack's get-oauth-response-handler.ts:37 exchanges the authoriz",
        "discovered_at": "2026-01-14T04:18:29.349209"
      },
      {
        "finding": "The OAuth flow is a clean vertical slice: UI button (pinterestv5o-auth-button.tsx) triggers redirect to tack's /oauth/connect, tack handles Pinterest OAuth callback via get-oauth-response-handler.ts (",
        "discovered_at": "2026-01-14T04:27:16.417595"
      },
      {
        "finding": "chat.ts (lines 18-23) chains .preprocess() for moderation and credits but NOT personalization. Compare to instagram-caption.ts (line 30) and facebook-post.ts (line 22) which include `.preprocess((inpu",
        "discovered_at": "2026-01-14T04:27:16.417642"
      },
      {
        "finding": "Timezone infrastructure already exists: (1) DateTimePickerWithTimeslotsProvider accepts timezone prop (line 39, 46, 88), (2) TimeslotRadioGroup already formats times with timezone using format string ",
        "discovered_at": "2026-01-14T04:27:16.417656"
      },
      {
        "finding": "The OAuth flow follows a clear path: aero UI initiates \u2192 tack get-oauth-response-handler processes Pinterest callback \u2192 tack oauth-finalize-handler persists tokens \u2192 aero callback route completes the ",
        "discovered_at": "2026-01-14T04:35:18.615413"
      },
      {
        "finding": "1) timeslot-radio-group.tsx:113 already formats times with timezone abbreviation using format(sendAt, 'EEE, MMM d, yyyy, h:mmaa (z)'), showing partial timezone support exists. 2) date-time-field.tsx:8",
        "discovered_at": "2026-01-14T04:35:18.615468"
      },
      {
        "finding": "The OAuth flow is a single vertical slice: (1) aero triggers OAuth via use-reconnect-pinterest-account.ts, (2) tack's get-oauth-response-handler.ts exchanges code with Pinterest API via generateOauthT",
        "discovered_at": "2026-01-14T04:44:06.549622"
      },
      {
        "finding": "Verified the hypothesis: chat.ts (lines 18-23) has only 4 preprocessors/postprocessors while all other generation files (39 total) have 5, with the missing one being the injectPersonalization() call. ",
        "discovered_at": "2026-01-14T04:44:06.549641"
      },
      {
        "finding": "1. timeslot-radio-group.tsx (line 113) already includes timezone abbreviation in format 'EEE, MMM d, yyyy, h:mmaa (z)'. 2. use-scheduler-toasts.ts (line 32) displays scheduled time as 'MMM d, h:mmaa' ",
        "discovered_at": "2026-01-14T04:44:06.549660"
      },
      {
        "finding": "The OAuth flow is cleanly isolated: aero initiates via /connect, redirects to tack's /oauth/response which exchanges code for tokens with Pinterest API (oauth.ts:28-60), stores temp token, then aero's",
        "discovered_at": "2026-01-14T04:52:38.017176"
      },
      {
        "finding": "Verified that chat.ts (line 19-21) is missing .preprocess((input) => injectPersonalization(input)) between checkAvailableCredits and .prompt(). All 39 other generation files in the same directory have",
        "discovered_at": "2026-01-14T04:52:38.017203"
      },
      {
        "finding": "The code already handles timezone correctly - timeslot-radio-group.tsx line 113 shows timezone abbreviation via format() with '(z)' pattern. The timezone is passed through the component hierarchy from",
        "discovered_at": "2026-01-14T04:52:38.017249"
      },
      {
        "finding": "The OAuth flow is a clean vertical slice: aero UI (pinterestv5o-auth-button.tsx) \u2192 aero API routes (connect/route.ts, callback/route.ts) \u2192 tack service (get-oauth-response-handler.ts, oauth-finalize-h",
        "discovered_at": "2026-01-14T05:00:00.863317"
      },
      {
        "finding": "Verified the hypothesis: chat.ts (lines 18-23) has preprocessors for moderation and credits but is missing injectPersonalization(). All other 39 generation files in the same directory include `.prepro",
        "discovered_at": "2026-01-14T05:00:00.863345"
      },
      {
        "finding": "1. Timezone IS already displayed in timeslot selector (timeslot-radio-group.tsx:113-115 uses format 'EEE, MMM d, yyyy, h:mmaa (z)'). 2. Timezone is NOT shown in success toast (use-scheduler-toasts.ts:",
        "discovered_at": "2026-01-14T05:09:01.944199"
      },
      {
        "finding": "The OAuth flow is: aero (connect route) \u2192 tack (Pinterest OAuth) \u2192 Pinterest API \u2192 tack (get-oauth-response-handler) \u2192 aero (callback route) \u2192 tack (oauth-finalize-handler). The generic error handling",
        "discovered_at": "2026-01-14T05:17:38.881582"
      },
      {
        "finding": "Line 113 of timeslot-radio-group.tsx already displays timezone using format 'EEE, MMM d, yyyy, h:mmaa (z)' - the (z) shows timezone abbreviation. The core enhancement is about adding explicit timezone",
        "discovered_at": "2026-01-14T05:17:38.881646"
      },
      {
        "finding": "The OAuth flow is a clean vertical slice: (1) aero UI triggers reconnect via use-reconnect-pinterest-account.ts which redirects to Pinterest, (2) Pinterest callback hits tack's get-oauth-response-hand",
        "discovered_at": "2026-01-14T05:26:31.021340"
      },
      {
        "finding": "The codebase already has solid timezone infrastructure in place. The `timeslot-radio-group.tsx` formats times with timezone abbreviation (line 113: `format(sendAt, 'EEE, MMM d, yyyy, h:mmaa (z)', { ti",
        "discovered_at": "2026-01-14T05:26:31.021398"
      },
      {
        "finding": "The OAuth flow is well-contained: (1) tack handles all Pinterest OAuth via get-oauth-response-handler.ts and oauth-finalize-handler.ts, (2) aero provides the UI layer with use-reconnect-pinterest-acco",
        "discovered_at": "2026-01-14T05:35:36.929885"
      },
      {
        "finding": "Confirmed the hypothesis: chat.ts (lines 18-23) has only 2 preprocessors (performObjectModeration, checkAvailableCredits) while pinterest-title-and-description.ts and 37 other generation files have 3 ",
        "discovered_at": "2026-01-14T05:35:36.929921"
      },
      {
        "finding": "CONFIRMED: chat.ts (line 21) goes directly from checkAvailableCredits to .prompt(PromptRegistry.CHAT) without calling injectPersonalization. All 39 other generation files in the same directory include",
        "discovered_at": "2026-01-14T05:35:36.929937"
      },
      {
        "finding": "The OAuth flow is well-defined: aero UI \u2192 tack get-oauth-response-handler \u2192 Pinterest API \u2192 tack oauth-finalize-handler \u2192 aero callback. Error handling in oauth-finalize-handler.ts (lines 106-117) cat",
        "discovered_at": "2026-01-14T06:26:57.820381"
      },
      {
        "finding": "1) The timeslot-radio-group.tsx already displays timezone in format 'EEE, MMM d, yyyy, h:mmaa (z)' - so timeslots DO show timezone. 2) The use-scheduler-toasts.ts formats success messages as 'Schedule",
        "discovered_at": "2026-01-14T06:26:57.820443"
      },
      {
        "finding": "The OAuth flow is well-defined: aero initiates via /connect, redirects to tack's /oauth/response which calls Pinterest API via oauth.ts:generateOauthTokensFromCode(), stores temp token, then aero's /c",
        "discovered_at": "2026-01-14T06:36:41.543245"
      },
      {
        "finding": "Confirmed the hypothesis exactly: `chat.ts` (line 19-23) chains `.preprocess(performObjectModeration)` \u2192 `.preprocess(checkAvailableCredits)` \u2192 `.prompt(PromptRegistry.CHAT)` but SKIPS the `injectPers",
        "discovered_at": "2026-01-14T06:36:41.543294"
      },
      {
        "finding": "The OAuth flow is well-defined: aero UI triggers reconnection via use-reconnect-pinterest-account.ts \u2192 aero's /connect route initiates via TackOauthFactory \u2192 tack's get-oauth-response-handler.ts excha",
        "discovered_at": "2026-01-14T06:45:55.726843"
      },
      {
        "finding": "Confirmed the story's hypothesis: chat.ts (lines 18-23) has only 2 preprocess calls (moderation and credits check) while other generation files like pinterest-title-and-description.ts and facebook-pos",
        "discovered_at": "2026-01-14T06:45:55.726865"
      },
      {
        "finding": "The codebase already has timezone infrastructure in place: (1) select-time-zone-section.tsx allows users to select timezones and persists to user settings, (2) timeslot-radio-group.tsx already formats",
        "discovered_at": "2026-01-14T06:45:55.726893"
      },
      {
        "finding": "The OAuth flow is well-contained within tack service. The get-oauth-response-handler.ts (line 37-39) calls generateOauthTokensFromCode which exchanges auth codes for tokens via Pinterest API at api.pi",
        "discovered_at": "2026-01-14T06:55:56.580043"
      },
      {
        "finding": "The timezone infrastructure already exists - TimezoneDate class handles conversions, use-time-zone hook retrieves user/browser timezone, and time pickers use format strings like 'p (z)' and 'p zzz' th",
        "discovered_at": "2026-01-14T06:55:56.580098"
      },
      {
        "finding": "OAuth flow is properly isolated: tack handles Pinterest API communication (generateOauthTokensFromCode, refreshAccessToken) while aero handles UI/routing. The access-token-refresh-handler.ts shows tok",
        "discovered_at": "2026-01-14T07:04:22.452665"
      },
      {
        "finding": "1) The timeslot picker ALREADY shows timezone - timeslot-radio-group.tsx:113 uses format 'EEE, MMM d, yyyy, h:mmaa (z)' with timezone abbreviation. 2) The SUCCESS TOAST does NOT show timezone - use-sc",
        "discovered_at": "2026-01-14T07:04:22.452696"
      },
      {
        "finding": "The OAuth flow is well-contained: aero UI triggers OAuth via getPinterestV5OAuthRedirectUrl, tack's get-oauth-response-handler.ts processes Pinterest callback (lines 94-103 show generic error handling",
        "discovered_at": "2026-01-14T07:24:12.507072"
      },
      {
        "finding": "1) TimezoneDate class at timezone-date.ts:36-284 provides robust timezone handling infrastructure including DST-aware conversions via date-fns-tz. 2) TimeslotPicker at timeslot-picker.tsx:40 already i",
        "discovered_at": "2026-01-14T07:24:12.507126"
      },
      {
        "finding": "The OAuth flow is a clean vertical slice: aero initiates via /connect/route.ts \u2192 redirects to tack \u2192 tack's get-oauth-response-handler.ts calls Pinterest API via oauth.ts (generateOauthTokensFromCode)",
        "discovered_at": "2026-01-14T07:31:34.577341"
      },
      {
        "finding": "The OAuth flow is a clean vertical slice: aero UI routes call TailwindPinterestOauthCompleter which uses getTackServerClient() to call tack's /oauth/finalize endpoint. Tack handles all Pinterest OAuth",
        "discovered_at": "2026-01-14T07:39:59.911290"
      },
      {
        "finding": "TimeslotRadioGroup already displays timezone abbreviation via format string 'EEE, MMM d, yyyy, h:mmaa (z)'. The TimezoneDate class documents a deliberate design choice: 'We want to keep the user inter",
        "discovered_at": "2026-01-14T07:39:59.911340"
      },
      {
        "finding": "The OAuth flow is a clean vertical slice: aero/connect initiates \u2192 redirects to Pinterest \u2192 tack/get-oauth-response exchanges code for tokens \u2192 saves temp token \u2192 redirects to aero/callback \u2192 aero cal",
        "discovered_at": "2026-01-14T07:48:56.936220"
      },
      {
        "finding": "The story correctly identifies the root cause. In chat.ts (lines 18-23), the preprocessing chain is: performObjectModeration \u2192 checkAvailableCredits \u2192 prompt \u2192 postprocessors. Comparing to pinterest-t",
        "discovered_at": "2026-01-14T07:48:56.936248"
      },
      {
        "finding": "The timezone infrastructure is already in place. timeslot-radio-group.tsx:113 already displays timezone with format 'h:mmaa (z)' which includes timezone abbreviation. However, use-scheduler-toasts.ts:",
        "discovered_at": "2026-01-14T07:48:56.936272"
      },
      {
        "finding": "The Pinterest OAuth flow is entirely contained within tack (token exchange via generateOauthTokensFromCode at line 28 of oauth.ts, finalization at oauth-finalize-handler.ts) and aero (callback handlin",
        "discovered_at": "2026-01-14T07:57:17.232504"
      },
      {
        "finding": "The backend (tack) stores sendAt as Unix timestamps (timezone-agnostic), so no backend changes needed. All timezone conversion happens in aero frontend. Current toast messages (use-scheduler-toasts.ts",
        "discovered_at": "2026-01-14T07:57:17.232543"
      },
      {
        "finding": "The Pinterest OAuth flow is a clean vertical slice: aero initiates (connect route) \u2192 tack exchanges tokens (get-oauth-response-handler) \u2192 aero receives callback \u2192 tack finalizes (oauth-finalize-handle",
        "discovered_at": "2026-01-14T08:09:32.148746"
      },
      {
        "finding": "1) chat.ts at line 21 goes directly to `.prompt(PromptRegistry.CHAT)` without calling `injectPersonalization()` first. 2) All 39 other generation files follow the pattern: moderation \u2192 credits check \u2192",
        "discovered_at": "2026-01-14T08:09:32.148772"
      },
      {
        "finding": "1) The timeslot-radio-group.tsx (line 113) already displays timezone using format 'EEE, MMM d, yyyy, h:mmaa (z)' which includes the timezone abbreviation. 2) The useTimezone hook correctly falls back ",
        "discovered_at": "2026-01-14T08:09:32.148798"
      },
      {
        "finding": "The OAuth flow is well-contained: aero initiates OAuth via TackOauthFactory, tack's get-oauth-response-handler.ts calls generateOauthTokensFromCode() to exchange authorization code for tokens, and oau",
        "discovered_at": "2026-01-14T08:17:48.596815"
      },
      {
        "finding": "The OAuth flow is well-contained: aero UI triggers connect via pinterestv5o-auth-button.tsx \u2192 callback route calls TailwindPinterestOauthCompleter \u2192 which calls tack's finalizeOauth endpoint \u2192 tack ha",
        "discovered_at": "2026-01-14T08:27:11.905513"
      }
    ],
    "ghostwriter": [
      {
        "finding": "CHAT generation config at aero/packages/core/src/ghostwriter-labs/generations/chat.ts:8-23 is missing the .preprocess((input) => injectPersonalization(input)) call that other generators like PINTEREST",
        "discovered_at": "2026-01-13T21:33:54.438165"
      },
      {
        "finding": "1) CHAT generation in ghostwriter-labs (line 19-23) does NOT call injectPersonalization(), while instagram-caption.ts (line 30) DOES - confirming brand voice is simply missing. 2) ChatbotGenerator cla",
        "discovered_at": "2026-01-13T21:33:54.438180"
      },
      {
        "finding": "Confirmed: chat.ts is the ONLY generation file missing injectPersonalization() - 39 other generation files call it. Token limit handling (TOKEN_LIMIT = 4096) exists in BOTH aero and ghostwriter with i",
        "discovered_at": "2026-01-13T21:46:16.325934"
      },
      {
        "finding": "The story hypothesis is CONFIRMED by code analysis. chat.ts (lines 18-23) has preprocessors for moderation and credits but is MISSING injectPersonalization(). In contrast, pinterest-title-and-descript",
        "discovered_at": "2026-01-13T21:56:17.468152"
      },
      {
        "finding": "1) chat.ts (line 19-23) has preprocessors for moderation and credits but is missing injectPersonalization(). 2) Compare to text.ts (line 18) which includes `.preprocess((input) => injectPersonalizatio",
        "discovered_at": "2026-01-13T22:05:50.288541"
      },
      {
        "finding": "CONFIRMED: chat.ts (lines 18-23) is missing the `.preprocess((input) => injectPersonalization(input))` call that appears in 39 other generation files. Example comparison: instagram-caption.ts has the ",
        "discovered_at": "2026-01-13T22:34:48.998496"
      },
      {
        "finding": "Confirmed the hypothesis: chat.ts (lines 19-23) has only performObjectModeration and checkAvailableCredits as preprocessors, but is MISSING the injectPersonalization() call. Compare to facebook-post.t",
        "discovered_at": "2026-01-13T22:45:43.330232"
      },
      {
        "finding": "Confirmed the hypothesis in the story is accurate. chat.ts (lines 18-23) chains preprocessors for moderation and credit checks, then directly calls .prompt() without injectPersonalization. By contrast",
        "discovered_at": "2026-01-13T23:02:32.323763"
      },
      {
        "finding": "Verified that chat.ts is the ONLY file (1 of 40) in the generations folder missing the `injectPersonalization()` call. All other 39 generation files follow the pattern: performObjectModeration \u2192 check",
        "discovered_at": "2026-01-13T23:10:38.867550"
      },
      {
        "finding": "Confirmed: chat.ts (lines 18-23) has preprocessing pipeline with performObjectModeration and checkAvailableCredits but is MISSING injectPersonalization. All 36+ other generation files include `.prepro",
        "discovered_at": "2026-01-13T23:39:12.837970"
      },
      {
        "finding": "chat.ts is missing `.preprocess((input) => injectPersonalization(input))` at line 21. Compared to facebook-post.ts (line 22) and instagram-caption.ts (line 30) which both have this call. The injectPer",
        "discovered_at": "2026-01-14T00:09:31.724027"
      },
      {
        "finding": "chat.ts (lines 19-23) has preprocessors for moderation and credits but is MISSING the injectPersonalization() call. Compare to facebook-post.ts line 22 and instagram-caption.ts line 30 which both incl",
        "discovered_at": "2026-01-14T00:19:15.962572"
      },
      {
        "finding": "chat.ts at line 21 goes directly from checkAvailableCredits to .prompt(PromptRegistry.CHAT) without calling injectPersonalization. Comparing to pinterest-title-and-description.ts which has `.preproces",
        "discovered_at": "2026-01-14T02:20:08.501337"
      },
      {
        "finding": "chat.ts (lines 18-23) has preprocess chain: performObjectModeration \u2192 checkAvailableCredits \u2192 prompt. All 36 other generation files have: performObjectModeration \u2192 checkAvailableCredits \u2192 injectPerson",
        "discovered_at": "2026-01-14T02:29:21.501316"
      },
      {
        "finding": "Confirmed the story's hypothesis: chat.ts (lines 18-23) has preprocess calls for performObjectModeration and checkAvailableCredits, but is MISSING the injectPersonalization call that exists in all oth",
        "discovered_at": "2026-01-14T02:39:02.089102"
      },
      {
        "finding": "CONFIRMED: chat.ts (lines 18-23) has the preprocessing chain: performObjectModeration \u2192 checkAvailableCredits \u2192 prompt \u2192 saveGenerationToDatabase \u2192 recordCreditUsage. MISSING: `.preprocess((input) => ",
        "discovered_at": "2026-01-14T02:39:02.089128"
      },
      {
        "finding": "The story accurately identifies the root cause. chat.ts (line 21) goes directly to .prompt(PromptRegistry.CHAT) without calling injectPersonalization(), while pinterest-title-and-description.ts (line ",
        "discovered_at": "2026-01-14T03:14:05.753593"
      },
      {
        "finding": "Confirmed the hypothesis: chat.ts (lines 19-21) only has two preprocess calls (performObjectModeration and checkAvailableCredits) while 39 other generation files include the injectPersonalization call",
        "discovered_at": "2026-01-14T04:01:56.396587"
      },
      {
        "finding": "chat.ts (lines 18-23) chains .preprocess() for moderation and credits but NOT personalization. Compare to instagram-caption.ts (line 30) and facebook-post.ts (line 22) which include `.preprocess((inpu",
        "discovered_at": "2026-01-14T04:27:16.417636"
      },
      {
        "finding": "Verified the hypothesis: chat.ts (lines 18-23) has only 4 preprocessors/postprocessors while all other generation files (39 total) have 5, with the missing one being the injectPersonalization() call. ",
        "discovered_at": "2026-01-14T04:44:06.549635"
      },
      {
        "finding": "Verified that chat.ts (line 19-21) is missing .preprocess((input) => injectPersonalization(input)) between checkAvailableCredits and .prompt(). All 39 other generation files in the same directory have",
        "discovered_at": "2026-01-14T04:52:38.017197"
      },
      {
        "finding": "Verified chat.ts (lines 18-23) is missing `injectPersonalization` preprocessor that exists in all other 39 generation files. The pinterest-title-and-description.ts shows the correct pattern at line 30",
        "discovered_at": "2026-01-14T05:26:31.021357"
      },
      {
        "finding": "Confirmed the hypothesis: chat.ts (lines 18-23) has only 2 preprocessors (performObjectModeration, checkAvailableCredits) while pinterest-title-and-description.ts and 37 other generation files have 3 ",
        "discovered_at": "2026-01-14T05:35:36.929916"
      },
      {
        "finding": "CONFIRMED: chat.ts (line 21) goes directly from checkAvailableCredits to .prompt(PromptRegistry.CHAT) without calling injectPersonalization. All 39 other generation files in the same directory include",
        "discovered_at": "2026-01-14T05:35:36.929933"
      },
      {
        "finding": "Confirmed the story's hypothesis. chat.ts (lines 18-23) only has performObjectModeration and checkAvailableCredits preprocessors, while pinterest-title-and-description.ts (lines 28-30) includes inject",
        "discovered_at": "2026-01-14T06:26:57.820416"
      },
      {
        "finding": "Confirmed the hypothesis exactly: `chat.ts` (line 19-23) chains `.preprocess(performObjectModeration)` \u2192 `.preprocess(checkAvailableCredits)` \u2192 `.prompt(PromptRegistry.CHAT)` but SKIPS the `injectPers",
        "discovered_at": "2026-01-14T06:36:41.543289"
      },
      {
        "finding": "Confirmed the story's hypothesis: chat.ts (lines 18-23) has only 2 preprocess calls (moderation and credits check) while other generation files like pinterest-title-and-description.ts and facebook-pos",
        "discovered_at": "2026-01-14T06:45:55.726862"
      },
      {
        "finding": "The story correctly identifies the root cause. In chat.ts (lines 18-23), the preprocessing chain is: performObjectModeration \u2192 checkAvailableCredits \u2192 prompt \u2192 postprocessors. Comparing to pinterest-t",
        "discovered_at": "2026-01-14T07:48:56.936241"
      },
      {
        "finding": "1) chat.ts at line 21 goes directly to `.prompt(PromptRegistry.CHAT)` without calling `injectPersonalization()` first. 2) All 39 other generation files follow the pattern: moderation \u2192 credits check \u2192",
        "discovered_at": "2026-01-14T08:09:32.148767"
      }
    ],
    "gandalf": [
      {
        "finding": "The Pinterest OAuth flow is a cohesive vertical slice: (1) aero/connect/route.ts initiates OAuth with TackOauthFactory, (2) aero/callback/route.ts handles Pinterest callback and delegates to TailwindP",
        "discovered_at": "2026-01-13T21:46:16.325896"
      },
      {
        "finding": "The Pinterest OAuth flow is a clean vertical slice: aero UI (PinterestV5OAuthButton, error.tsx, use-reconnect-pinterest-account.ts) \u2192 aero routes (callback/route.ts, finisher/route.ts) \u2192 aero core (pi",
        "discovered_at": "2026-01-13T22:05:50.288516"
      },
      {
        "finding": "The Pinterest OAuth flow is well-contained: aero initiates via /dashboard/v3/api/oauth/pinterest/connect, redirects to Pinterest, receives callback via /dashboard/v3/api/oauth/pinterest/callback, whic",
        "discovered_at": "2026-01-13T22:14:47.274099"
      },
      {
        "finding": "The OAuth flow is a clean vertical slice: aero initiates (connect/route.ts) \u2192 tack handles token exchange (oauth.ts, oauth-finalize-handler.ts) \u2192 aero finalizes (callback/route.ts, pinterest-oauth-com",
        "discovered_at": "2026-01-13T22:24:44.252433"
      },
      {
        "finding": "The Pinterest OAuth flow is well-contained within tack and aero services, which is the correct boundary for Pinterest-specific functionality. The flow is: 1) Pinterest redirects to tack get-oauth-resp",
        "discovered_at": "2026-01-13T22:45:43.330205"
      },
      {
        "finding": "The OAuth flow is well-contained: 1) aero initiates OAuth via `/dashboard/v3/api/oauth/pinterest/connect` which redirects to tack, 2) tack handles the Pinterest OAuth token exchange via `oauth.ts` (ge",
        "discovered_at": "2026-01-13T22:54:21.072303"
      },
      {
        "finding": "1) Pinterest OAuth flow is entirely contained within tack for token management (oauth.ts:93-151 handles refresh tokens, base.ts:346-358 handles 401 unauthorized responses triggering deauthorizeToken).",
        "discovered_at": "2026-01-13T23:10:38.867522"
      },
      {
        "finding": "The Pinterest OAuth flow is cleanly contained within tack (Pinterest-specific service) and aero (UI layer). The flow is: 1) aero/connect/route.ts initiates OAuth with state validation, 2) Pinterest re",
        "discovered_at": "2026-01-13T23:18:17.393807"
      },
      {
        "finding": "The OAuth flow is cleanly architected: (1) aero UI initiates OAuth \u2192 (2) tack's get-oauth-response-handler.ts receives Pinterest callback and exchanges code for tokens via generateOauthTokensFromCode(",
        "discovered_at": "2026-01-14T00:19:15.962498"
      },
      {
        "finding": "Pinterest OAuth flow is correctly scoped to tack (token management) and aero (UI orchestration). gandalf is NOT involved in Pinterest OAuth - it only handles Google OAuth for internal auth. Found pote",
        "discovered_at": "2026-01-14T01:51:38.007262"
      },
      {
        "finding": "The OAuth flow is well-contained: (1) tack handles all Pinterest API interactions via get-oauth-response-handler.ts (initial token exchange) and oauth-finalize-handler.ts (permanent token storage), (2",
        "discovered_at": "2026-01-14T02:08:12.200853"
      },
      {
        "finding": "The OAuth flow is correctly scoped to tack for Pinterest-specific handling. The code path is: aero (connect/route.ts initiates) \u2192 tack (get-oauth-response-handler.ts receives Pinterest callback, calls",
        "discovered_at": "2026-01-14T02:55:19.284743"
      },
      {
        "finding": "The Pinterest OAuth flow is a clean vertical slice: aero UI (connect/callback/finisher routes) \u2192 tack handlers (get-oauth-response, oauth-finalize) \u2192 Pinterest API. Token handling (TempTokenV5Facet, T",
        "discovered_at": "2026-01-14T03:04:37.057559"
      },
      {
        "finding": "The OAuth flow is well-contained: (1) tack handles all Pinterest-specific OAuth logic via get-oauth-redirect \u2192 get-oauth-response \u2192 oauth-finalize handlers; (2) aero provides UI orchestration through ",
        "discovered_at": "2026-01-14T03:33:40.858504"
      },
      {
        "finding": "The code shows a clean vertical slice: (1) get-oauth-response-handler.ts processes Pinterest's OAuth response and creates temp tokens, (2) oauth-finalize-handler.ts converts temp tokens to permanent s",
        "discovered_at": "2026-01-14T03:41:43.152590"
      },
      {
        "finding": "The OAuth flow correctly routes through tack (Pinterest-specific) and not gandalf (Google OAuth only). Error handling in get-oauth-response-handler.ts line 102 returns generic '?error=true' redirect w",
        "discovered_at": "2026-01-14T03:50:41.218815"
      },
      {
        "finding": "The story correctly identifies the Pinterest OAuth flow as a single vertical slice. Code examination confirms: (1) oauth-finalize-handler.ts:42-48 shows temp token lookup returns 404 if not found; (2)",
        "discovered_at": "2026-01-14T04:01:56.396560"
      },
      {
        "finding": "The Pinterest OAuth flow is entirely contained within tack (backend) and aero (UI). The flow is: aero UI \u2192 tack /oauth/redirect \u2192 Pinterest \u2192 tack /oauth/response (creates temp token) \u2192 aero callback ",
        "discovered_at": "2026-01-14T04:09:56.442833"
      },
      {
        "finding": "The OAuth flow is cleanly isolated: aero initiates via /connect, redirects to tack's /oauth/response which exchanges code for tokens with Pinterest API (oauth.ts:28-60), stores temp token, then aero's",
        "discovered_at": "2026-01-14T04:52:38.017166"
      },
      {
        "finding": "The OAuth flow is a clean vertical slice: aero UI (pinterestv5o-auth-button.tsx) \u2192 aero API routes (connect/route.ts, callback/route.ts) \u2192 tack service (get-oauth-response-handler.ts, oauth-finalize-h",
        "discovered_at": "2026-01-14T05:00:00.863315"
      },
      {
        "finding": "The OAuth flow is: aero (connect route) \u2192 tack (Pinterest OAuth) \u2192 Pinterest API \u2192 tack (get-oauth-response-handler) \u2192 aero (callback route) \u2192 tack (oauth-finalize-handler). The generic error handling",
        "discovered_at": "2026-01-14T05:17:38.881568"
      },
      {
        "finding": "The OAuth flow is a clean vertical slice: (1) aero UI triggers reconnect via use-reconnect-pinterest-account.ts which redirects to Pinterest, (2) Pinterest callback hits tack's get-oauth-response-hand",
        "discovered_at": "2026-01-14T05:26:31.021334"
      },
      {
        "finding": "The OAuth flow is well-defined: aero UI \u2192 tack get-oauth-response-handler \u2192 Pinterest API \u2192 tack oauth-finalize-handler \u2192 aero callback. Error handling in oauth-finalize-handler.ts (lines 106-117) cat",
        "discovered_at": "2026-01-14T06:26:57.820364"
      },
      {
        "finding": "The OAuth flow is well-defined: aero initiates via /connect, redirects to tack's /oauth/response which calls Pinterest API via oauth.ts:generateOauthTokensFromCode(), stores temp token, then aero's /c",
        "discovered_at": "2026-01-14T06:36:41.543238"
      },
      {
        "finding": "OAuth flow is properly isolated: tack handles Pinterest API communication (generateOauthTokensFromCode, refreshAccessToken) while aero handles UI/routing. The access-token-refresh-handler.ts shows tok",
        "discovered_at": "2026-01-14T07:04:22.452656"
      },
      {
        "finding": "The OAuth flow is well-contained: aero UI triggers OAuth via getPinterestV5OAuthRedirectUrl, tack's get-oauth-response-handler.ts processes Pinterest callback (lines 94-103 show generic error handling",
        "discovered_at": "2026-01-14T07:24:12.507069"
      },
      {
        "finding": "The OAuth flow is a clean vertical slice: aero initiates via /connect/route.ts \u2192 redirects to tack \u2192 tack's get-oauth-response-handler.ts calls Pinterest API via oauth.ts (generateOauthTokensFromCode)",
        "discovered_at": "2026-01-14T07:31:34.577332"
      },
      {
        "finding": "The OAuth flow is a clean vertical slice: aero UI routes call TailwindPinterestOauthCompleter which uses getTackServerClient() to call tack's /oauth/finalize endpoint. Tack handles all Pinterest OAuth",
        "discovered_at": "2026-01-14T07:39:59.911288"
      },
      {
        "finding": "The OAuth flow is a clean vertical slice: aero/connect initiates \u2192 redirects to Pinterest \u2192 tack/get-oauth-response exchanges code for tokens \u2192 saves temp token \u2192 redirects to aero/callback \u2192 aero cal",
        "discovered_at": "2026-01-14T07:48:56.936218"
      },
      {
        "finding": "The Pinterest OAuth flow is entirely contained within tack (token exchange via generateOauthTokensFromCode at line 28 of oauth.ts, finalization at oauth-finalize-handler.ts) and aero (callback handlin",
        "discovered_at": "2026-01-14T07:57:17.232502"
      },
      {
        "finding": "The Pinterest OAuth flow is a clean vertical slice: aero initiates (connect route) \u2192 tack exchanges tokens (get-oauth-response-handler) \u2192 aero receives callback \u2192 tack finalizes (oauth-finalize-handle",
        "discovered_at": "2026-01-14T08:09:32.148739"
      },
      {
        "finding": "The OAuth flow is well-contained: aero initiates OAuth via TackOauthFactory, tack's get-oauth-response-handler.ts calls generateOauthTokensFromCode() to exchange authorization code for tokens, and oau",
        "discovered_at": "2026-01-14T08:17:48.596805"
      }
    ],
    "brandy2": [
      {
        "finding": "chat.ts (lines 19-21) has preprocess calls for moderation and credits but is missing injectPersonalization. Verified 39 other generation files ALL have `.preprocess((input) => injectPersonalization(in",
        "discovered_at": "2026-01-14T03:14:05.753570"
      },
      {
        "finding": "The story accurately identifies the root cause. chat.ts (line 21) goes directly to .prompt(PromptRegistry.CHAT) without calling injectPersonalization(), while pinterest-title-and-description.ts (line ",
        "discovered_at": "2026-01-14T03:14:05.753596"
      },
      {
        "finding": "Confirmed the hypothesis: chat.ts (lines 19-21) has `.preprocess((input, meta) => performObjectModeration(input, meta)).preprocess((input, meta) => checkAvailableCredits(input, meta)).prompt(PromptReg",
        "discovered_at": "2026-01-14T03:25:30.680765"
      },
      {
        "finding": "chat.ts is the ONLY generation file (1 of 40) missing injectPersonalization. All other 39 files follow the pattern: .preprocess(moderation) \u2192 .preprocess(credits) \u2192 .preprocess(injectPersonalization) ",
        "discovered_at": "2026-01-14T03:25:30.680782"
      },
      {
        "finding": "Confirmed the hypothesis is correct. chat.ts (lines 18-23) has the preprocessing chain: performObjectModeration \u2192 checkAvailableCredits \u2192 prompt \u2192 saveGenerationToDatabase \u2192 recordCreditUsage. It is M",
        "discovered_at": "2026-01-14T03:33:40.858527"
      },
      {
        "finding": "CONFIRMED: chat.ts (lines 18-23) has only 2 preprocessors (performObjectModeration, checkAvailableCredits) but is MISSING injectPersonalization(). Grep found 35 other generation files that DO include ",
        "discovered_at": "2026-01-14T03:33:40.858540"
      },
      {
        "finding": "Confirmed: chat.ts (lines 18-23) chains .preprocess(moderation) \u2192 .preprocess(checkCredits) \u2192 .prompt(CHAT) but SKIPS injectPersonalization. In contrast, pinterest-title-and-description.ts (line 30), ",
        "discovered_at": "2026-01-14T03:41:43.152609"
      },
      {
        "finding": "Confirmed the hypothesis: chat.ts (lines 18-23) is missing the injectPersonalization preprocessor. There are 40 generation files total using GenerationConfig; 39 of them have injectPersonalization, an",
        "discovered_at": "2026-01-14T03:50:41.218831"
      },
      {
        "finding": "The story hypothesis is CORRECT. chat.ts (line 21) chains: performObjectModeration \u2192 checkAvailableCredits \u2192 PromptRegistry.CHAT, but OMITS injectPersonalization(). Compare to instagram-caption.ts (li",
        "discovered_at": "2026-01-14T03:50:41.218855"
      },
      {
        "finding": "Confirmed the hypothesis: chat.ts (lines 19-21) only has two preprocess calls (performObjectModeration and checkAvailableCredits) while 39 other generation files include the injectPersonalization call",
        "discovered_at": "2026-01-14T04:01:56.396589"
      },
      {
        "finding": "Confirmed the hypothesis is correct. chat.ts (lines 18-23) has the pipeline: moderation \u2192 checkCredits \u2192 prompt \u2192 save \u2192 recordCredits. It is missing the `injectPersonalization` step that 39 other gen",
        "discovered_at": "2026-01-14T04:09:56.442902"
      },
      {
        "finding": "chat.ts (line 21) is missing `.preprocess((input) => injectPersonalization(input))` that all 39 other generation files have. The injectPersonalization function and brand data flow (aero\u2192brandy2 via ge",
        "discovered_at": "2026-01-14T04:09:56.442912"
      },
      {
        "finding": "VERIFIED: chat.ts (line 19-23) is missing `.preprocess((input) => injectPersonalization(input))` that exists in all other 39 generation files. Grep confirms 39/40 files have injectPersonalization - on",
        "discovered_at": "2026-01-14T04:18:29.349237"
      },
      {
        "finding": "chat.ts (lines 18-23) chains .preprocess() for moderation and credits but NOT personalization. Compare to instagram-caption.ts (line 30) and facebook-post.ts (line 22) which include `.preprocess((inpu",
        "discovered_at": "2026-01-14T04:27:16.417639"
      },
      {
        "finding": "The story hypothesis is correct. chat.ts (line 21) goes directly to .prompt(PromptRegistry.CHAT) after checkAvailableCredits, while pinterest-title-and-description.ts (line 30) includes .preprocess((i",
        "discovered_at": "2026-01-14T04:35:18.615433"
      },
      {
        "finding": "CONFIRMED: chat.ts at line 21 goes directly from checkAvailableCredits to .prompt(PromptRegistry.CHAT) without injectPersonalization(). Compare to facebook-post.ts line 22 which correctly chains .prep",
        "discovered_at": "2026-01-14T04:35:18.615443"
      },
      {
        "finding": "Verified the hypothesis: chat.ts (lines 18-23) has only 4 preprocessors/postprocessors while all other generation files (39 total) have 5, with the missing one being the injectPersonalization() call. ",
        "discovered_at": "2026-01-14T04:44:06.549638"
      },
      {
        "finding": "Verified that chat.ts (line 19-21) is missing .preprocess((input) => injectPersonalization(input)) between checkAvailableCredits and .prompt(). All 39 other generation files in the same directory have",
        "discovered_at": "2026-01-14T04:52:38.017199"
      },
      {
        "finding": "chat.ts at line 19-21 shows: .preprocess((input, meta) => performObjectModeration(input, meta)) .preprocess((input, meta) => checkAvailableCredits(input, meta)) .prompt(PromptRegistry.CHAT) \u2014 notably ",
        "discovered_at": "2026-01-14T04:52:38.017233"
      },
      {
        "finding": "Verified the hypothesis is correct. chat.ts:19-21 only has 2 preprocessors. All 39 other generation files in the directory include `.preprocess((input) => injectPersonalization(input))`. The injectPer",
        "discovered_at": "2026-01-14T05:00:00.863363"
      },
      {
        "finding": "CONFIRMED: chat.ts (lines 18-21) is the ONLY generation file out of 40 that does NOT call injectPersonalization(). All other 39 generation files have this preprocessor. The fix is surgical: add `.prep",
        "discovered_at": "2026-01-14T05:09:01.944151"
      },
      {
        "finding": "chat.ts (lines 19-23) only chains performObjectModeration, checkAvailableCredits, prompt, saveGenerationToDatabase, and recordCreditUsage. It is MISSING the injectPersonalization() preprocess call tha",
        "discovered_at": "2026-01-14T05:09:01.944181"
      },
      {
        "finding": "CONFIRMED: chat.ts (lines 18-23) has only 4 preprocessor/postprocessor calls: performObjectModeration, checkAvailableCredits, saveGenerationToDatabase, recordCreditUsage. It is MISSING the injectPerso",
        "discovered_at": "2026-01-14T05:17:38.881613"
      },
      {
        "finding": "Verified chat.ts (lines 18-23) is missing `injectPersonalization` preprocessor that exists in all other 39 generation files. The pinterest-title-and-description.ts shows the correct pattern at line 30",
        "discovered_at": "2026-01-14T05:26:31.021361"
      },
      {
        "finding": "Verified that chat.ts is the ONLY generation file (out of 40) missing injectPersonalization(). All other files like instagram-caption.ts, facebook-post.ts, etc. include `.preprocess((input) => injectP",
        "discovered_at": "2026-01-14T05:26:31.021376"
      },
      {
        "finding": "Confirmed the hypothesis: chat.ts (lines 18-23) has only 2 preprocessors (performObjectModeration, checkAvailableCredits) while pinterest-title-and-description.ts and 37 other generation files have 3 ",
        "discovered_at": "2026-01-14T05:35:36.929918"
      },
      {
        "finding": "CONFIRMED: chat.ts (line 21) goes directly from checkAvailableCredits to .prompt(PromptRegistry.CHAT) without calling injectPersonalization. All 39 other generation files in the same directory include",
        "discovered_at": "2026-01-14T05:35:36.929935"
      },
      {
        "finding": "chat.ts at line 21 goes directly to .prompt(PromptRegistry.CHAT) without calling injectPersonalization. All 39 other generation files (pinterest-title-and-description.ts, instagram-caption.ts, faceboo",
        "discovered_at": "2026-01-14T06:26:57.820399"
      },
      {
        "finding": "Confirmed the story's hypothesis. chat.ts (lines 18-23) only has performObjectModeration and checkAvailableCredits preprocessors, while pinterest-title-and-description.ts (lines 28-30) includes inject",
        "discovered_at": "2026-01-14T06:26:57.820421"
      },
      {
        "finding": "chat.ts (lines 18-23) has: .preprocess(performObjectModeration) \u2192 .preprocess(checkAvailableCredits) \u2192 .prompt(). All 37 other generation files have .preprocess(injectPersonalization) between checkAva",
        "discovered_at": "2026-01-14T06:36:41.543262"
      },
      {
        "finding": "Confirmed the hypothesis exactly: `chat.ts` (line 19-23) chains `.preprocess(performObjectModeration)` \u2192 `.preprocess(checkAvailableCredits)` \u2192 `.prompt(PromptRegistry.CHAT)` but SKIPS the `injectPers",
        "discovered_at": "2026-01-14T06:36:41.543291"
      },
      {
        "finding": "CONFIRMED: chat.ts (lines 18-23) has NO call to injectPersonalization(), while instagram-caption.ts (line 30) and facebook-post.ts (line 22) correctly include `.preprocess((input) => injectPersonaliza",
        "discovered_at": "2026-01-14T06:45:55.726874"
      },
      {
        "finding": "chat.ts (lines 19-23) chains only: performObjectModeration \u2192 checkAvailableCredits \u2192 PromptRegistry.CHAT \u2192 saveGenerationToDatabase \u2192 recordCreditUsage. Compare to instagram-caption.ts (line 30), face",
        "discovered_at": "2026-01-14T06:55:56.580081"
      },
      {
        "finding": "Confirmed chat.ts at line 21 goes directly from checkAvailableCredits to .prompt(PromptRegistry.CHAT) without calling injectPersonalization. All 39 other generation files include the .preprocess((inpu",
        "discovered_at": "2026-01-14T07:04:22.452675"
      },
      {
        "finding": "Confirmed: chat.ts (lines 19-23) does NOT call injectPersonalization(), while 39 other generation files DO. The pattern is: .preprocess((input, meta) => performObjectModeration(input, meta)).preproces",
        "discovered_at": "2026-01-14T07:04:22.452685"
      },
      {
        "finding": "Verified that chat.ts at line 21 goes directly from checkAvailableCredits to .prompt() without calling injectPersonalization. All 39 other generation files (pinterest-title-and-description.ts, faceboo",
        "discovered_at": "2026-01-14T07:24:12.507096"
      },
      {
        "finding": "CONFIRMED: chat.ts (line 19-23) does NOT call injectPersonalization(), while 35+ other generation configs DO include it. For example, instagram-caption.ts line 30 and facebook-post.ts line 22 both inc",
        "discovered_at": "2026-01-14T07:24:12.507113"
      },
      {
        "finding": "chat.ts (lines 8-23) is the ONLY generation file out of 40 that does NOT call injectPersonalization(). All other 39 generation files (pinterest-title-and-description.ts:30, facebook-post.ts:22, etc.) ",
        "discovered_at": "2026-01-14T07:31:34.577364"
      },
      {
        "finding": "Confirmed: chat.ts (lines 1-24) lacks the injectPersonalization() import and preprocessor call. All 39 other generation files follow the pattern: `.preprocess((input) => injectPersonalization(input))`",
        "discovered_at": "2026-01-14T07:31:34.577373"
      },
      {
        "finding": "chat.ts is the ONLY generation file (out of 40+) missing the injectPersonalization() preprocess call. Every other generation file follows the same pattern: `.preprocess((input) => injectPersonalizatio",
        "discovered_at": "2026-01-14T07:39:59.911300"
      },
      {
        "finding": "chat.ts (lines 19-23) chains: performObjectModeration \u2192 checkAvailableCredits \u2192 prompt \u2192 save \u2192 recordCredits. It is MISSING `.preprocess((input) => injectPersonalization(input))` which 39 other gener",
        "discovered_at": "2026-01-14T07:39:59.911311"
      },
      {
        "finding": "The story correctly identifies the root cause. In chat.ts (lines 18-23), the preprocessing chain is: performObjectModeration \u2192 checkAvailableCredits \u2192 prompt \u2192 postprocessors. Comparing to pinterest-t",
        "discovered_at": "2026-01-14T07:48:56.936243"
      },
      {
        "finding": "chat.ts (lines 19-23) chains: performObjectModeration \u2192 checkAvailableCredits \u2192 prompt \u2192 saveGenerationToDatabase \u2192 recordCreditUsage. It is MISSING the injectPersonalization() call that 39 other gene",
        "discovered_at": "2026-01-14T07:48:56.936260"
      },
      {
        "finding": "chat.ts (lines 19-23) is missing `.preprocess((input) => injectPersonalization(input))` that ALL 36 other generation files have. For example, facebook-post.ts:22, instagram-caption.ts:30, text.ts:18 a",
        "discovered_at": "2026-01-14T07:57:17.232531"
      },
      {
        "finding": "1) chat.ts at line 21 goes directly to `.prompt(PromptRegistry.CHAT)` without calling `injectPersonalization()` first. 2) All 39 other generation files follow the pattern: moderation \u2192 credits check \u2192",
        "discovered_at": "2026-01-14T08:09:32.148769"
      },
      {
        "finding": "chat.ts at lines 19-23 shows the preprocessing chain: performObjectModeration \u2192 checkAvailableCredits \u2192 prompt \u2192 saveGenerationToDatabase \u2192 recordCreditUsage. Compared to instagram-caption.ts (line 30",
        "discovered_at": "2026-01-14T08:09:32.148784"
      },
      {
        "finding": "chat.ts (lines 18-23) has 4 preprocessor/postprocessor calls but is missing `injectPersonalization`. Comparison with pinterest-title-and-description.ts (line 30) shows the exact pattern that should be",
        "discovered_at": "2026-01-14T08:17:48.596880"
      },
      {
        "finding": "Confirmed: chat.ts is the ONLY generation file (out of 40) missing the `injectPersonalization()` preprocessor. All other generation files (instagram-caption.ts, facebook-post.ts, twitter-post.ts, etc.",
        "discovered_at": "2026-01-14T08:17:48.596906"
      },
      {
        "finding": "Verified that chat.ts is the ONLY generation file (out of 40) missing the injectPersonalization() call. All 39 other generation files (pinterest-title-and-description.ts, facebook-post.ts, instagram-c",
        "discovered_at": "2026-01-14T08:27:11.905534"
      },
      {
        "finding": "chat.ts at lines 19-21 shows the pipeline: performObjectModeration \u2192 checkAvailableCredits \u2192 prompt(). Compare to facebook-post.ts lines 20-23 which shows: performObjectModeration \u2192 checkAvailableCred",
        "discovered_at": "2026-01-14T08:27:11.905557"
      }
    ],
    "zuck": [
      {
        "finding": "The Pinterest OAuth flow is a clean vertical slice: aero UI (PinterestV5OAuthButton) \u2192 aero API route (/dashboard/v3/api/oauth/pinterest/connect) \u2192 tack (get-oauth-response-handler.ts exchanges code f",
        "discovered_at": "2026-01-14T00:09:31.723984"
      },
      {
        "finding": "The OAuth flow is a clean vertical slice: aero/connect initiates \u2192 redirects to Pinterest \u2192 tack/get-oauth-response exchanges code for tokens \u2192 saves temp token \u2192 redirects to aero/callback \u2192 aero cal",
        "discovered_at": "2026-01-14T07:48:56.936215"
      },
      {
        "finding": "The Pinterest OAuth flow is entirely contained within tack (token exchange via generateOauthTokensFromCode at line 28 of oauth.ts, finalization at oauth-finalize-handler.ts) and aero (callback handlin",
        "discovered_at": "2026-01-14T07:57:17.232496"
      }
    ]
  },
  "scoping_rules": [
    {
      "action": "SPLIT",
      "detail": "Split into two stories: (1) 'Add brand voice personalization to Ghostwriter Chat' - add injectPersonalization() preprocessor to CHAT config in aero, modify ghostwriter's get-chat-result.ts to include personalizationInfo in system prompt. This is a simple fix following the pattern of other generators. (2) 'Improve Ghostwriter Chat context retention' - this is a separate enhancement to address the 4096 token limit in getMessagesWithinLimit(). Options include: increasing token budget, implementing summarization of older messages, or persistent session storage. These are architecturally different solutions that shouldn't be bundled.",
      "root_cause": "NONE - These are two distinct issues. Brand voice is missing because CHAT generation config lacks injectPersonalization() preprocessor. Context loss is due to token limit truncation in getMessagesWithinLimit() which is working as designed.",
      "discovered_at": "2026-01-13T21:33:54.439186"
    },
    {
      "action": "SPLIT",
      "detail": "Split into two stories: (1) 'Add Brand Voice to Ghostwriter Chat' - add injectPersonalization() call to ChatbotGenerator.getNextChatMessage() or the chat route, small well-scoped fix in aero only. (2) 'Improve Chat Context Retention' - requires design decision on approach (increase token limits, add summarization, use larger context model), needs separate technical spike and UX design for communicating context loss to users.",
      "root_cause": "NONE - Brand voice issue is a missing preprocessing step (injectPersonalization not called), while context retention is a token limit architectural decision in getMessagesWithinLimit(). These require different solutions.",
      "discovered_at": "2026-01-13T21:33:54.440114"
    },
    {
      "action": "SPLIT",
      "detail": "Split into TWO stories: (1) 'Fix Brand Voice in Ghostwriter Chat' - add missing injectPersonalization() call to aero/packages/core/src/ghostwriter-labs/generations/chat.ts (small, bug fix, single PR). (2) 'Implement Context Summarization for Long Chat Sessions' - replace naive message truncation with summarization strategy in both aero and ghostwriter (medium-large, new feature, requires design decisions about summarization algorithm and UX for forgotten messages).",
      "root_cause": "NONE - These are distinct issues: (1) Missing injectPersonalization() call is a bug, (2) Token truncation without summarization is an architectural limitation requiring new feature work",
      "discovered_at": "2026-01-13T21:46:16.326499"
    },
    {
      "action": "SPLIT",
      "detail": "Remove AC #6 (scheduling time conflict detection) into a separate story. AC #6 addresses a different problem (overlapping scheduled times) that requires fetching existing posts and comparing times - completely different from timezone display. The remaining story (AC #1-5) is properly scoped around a single root cause: adding timezone to confirmation messages. The fix is localized to use-scheduler-toasts.ts:32 where the format string needs to include timezone. Also update Investigation Subtask #1 to reference the actual component path: aero/packages/tailwindapp/client/domains/scheduler/hooks/use-scheduler-toasts.ts instead of the non-existent timezone-selector.tsx",
      "root_cause": "AC #1-5 share a common root cause: timezone is not displayed in confirmation messages after scheduling. The fix requires updating the toast/confirmation format string to include timezone. However, AC #6 (time conflict detection) is UNRELATED - it addresses scheduling overlap validation, not timezone confusion.",
      "discovered_at": "2026-01-13T21:56:17.468188"
    },
    {
      "action": "SPLIT",
      "detail": "Split AC#5 into a separate story. Keep ACs 1-4 as 'Enhance Pinterest Scheduler Timezone Clarity' (aero-only, single PR). Create new story 'Handle Pinterest Scheduling Errors Gracefully' for AC#5, which should also include similar error handling for other platform APIs (Facebook, Instagram) if consistency is desired. The timezone clarity story score would be 5/5 after removing AC#5.",
      "root_cause": "ACs 1-4 share root cause: 'Lack of explicit timezone visibility in scheduler UI touchpoints'. AC#5 has SEPARATE root cause: 'Missing graceful error handling for external API failures'",
      "discovered_at": "2026-01-13T23:28:49.607452"
    },
    {
      "action": "SPLIT",
      "detail": "Split into 3 stories: (1) 'Timezone Display Clarity' - aero-only story covering acceptance criteria #1, #2, #4, #6 focusing on adding timezone labels to custom date picker, success toasts, and confirmation popovers; (2) 'Scheduling Conflict Detection' - new feature story for acceptance criteria #5, requires own problem statement and investigation; (3) 'DST Handling for Scheduled Pins' - backend story for acceptance criteria #3, primarily tack service with aero integration, requires investigation of current Unix timestamp behavior in scheduling flow.",
      "root_cause": "Themes 1-2 share a root cause (timezone display not explicit in UI components). Theme 3 (DST) is backend-related. Theme 4 (conflict detection) is a completely unrelated feature. Theme 5 (visual feedback) is generic UX.",
      "discovered_at": "2026-01-13T23:49:36.980562"
    },
    {
      "action": "SPLIT",
      "detail": "Split into 4 stories: (1) UI Clarity Enhancement - AC1 + AC6 only, focused on making existing timezone displays more prominent in aero, single vertical slice; (2) Design Discussion - AC2 requires product/design decision since it contradicts documented behavior in timezone-date.ts - should be a spike or design ticket, not implementation; (3) DST Handling - AC3 should be separate backend-focused story in tack if investigation proves it's needed; (4) Error Handling - AC4 + AC5 are defensive coding improvements that should be their own story or part of a broader error handling initiative.",
      "root_cause": "NONE - These are 4+ distinct concerns bundled together. AC2 actually contradicts documented design intent in timezone-date.ts which explicitly states users should see profile timezone even when traveling.",
      "discovered_at": "2026-01-14T01:42:55.862549"
    },
    {
      "action": "SPLIT",
      "detail": "Split into 3 stories: (1) KEEP: Timezone Display Clarity - AC #1, #3, #4, #6 - enhance confirmation messages to explicitly show timezone, verify DST handling. (2) REMOVE to separate story: Time Slot Conflict Detection - AC #5 - completely unrelated feature about scheduling conflicts. (3) REMOVE pending product decision: Browser Timezone Auto-Update - AC #2 - contradicts existing intentional design documented in timezone-date.ts; needs product approval before implementing as it changes core behavior.",
      "root_cause": "NONE - Themes 1,3,4 share a root cause (timezone display/handling in aero UI), but Theme 5 (time slot conflicts) is completely unrelated. Theme 2 (browser timezone) contradicts existing intentional design.",
      "discovered_at": "2026-01-14T02:08:12.200917"
    },
    {
      "action": "SPLIT",
      "detail": "Split into 3 stories: (1) 'Enhance Pinterest Scheduler Timezone Clarity' - keep themes 1-3 (timezone display, DST handling, browser timezone detection) with acceptance criteria for confirmation messaging and timezone context. (2) 'Add Pinterest Scheduling Conflict Detection' - extract the time slot conflict acceptance criterion into its own story focused on validation logic. (3) 'Improve Pinterest API Error Handling' - extract the Pinterest 503 error handling into a separate story focused on API resilience. The core timezone story (themes 1-3) is well-scoped and can be delivered in a single PR modifying aero UI components.",
      "root_cause": "Themes 1-3 share a root cause: the scheduler UI components in aero need enhanced timezone context display. However, themes 4 (conflict detection) and 5 (API error handling) are UNRELATED issues - they address validation logic and external API resilience, not timezone clarity.",
      "discovered_at": "2026-01-14T02:29:21.501345"
    },
    {
      "action": "SPLIT",
      "detail": "Split into 3 stories: (1) 'Pinterest Scheduler Timezone Display' - Keep AC#1, AC#2, AC#6 focused on UI confirmation messages showing timezone. (2) 'Pinterest API Error Resilience' - Move AC#5 (503 handling) to a separate reliability story. (3) 'Timezone Edge Case Handling' - Move AC#3 (DST) and AC#4 (invalid timezone) to a story focused on timezone validation and conversion logic. The current bundling makes it unclear whether success means 'users see timezone' or 'DST works correctly' or 'API errors are handled' - these are three different definitions of done.",
      "root_cause": "NONE - The core issue (timezone display clarity) is bundled with unrelated concerns (Pinterest API errors, DST backend logic)",
      "discovered_at": "2026-01-14T05:17:38.881670"
    },
    {
      "action": "SPLIT",
      "detail": "Split into two stories: (1) 'Timezone Display Clarity' covering AC1, AC2, AC3 - add timezone label to DateTimePicker, enhance confirmation message, handle DST correctly. (2) 'Schedule Conflict Detection' covering AC5 - this is a separate feature for detecting when a user tries to schedule in an already-taken timeslot. Remove AC4 (investigate if users can ever have no timezone - code suggests this cannot happen). AC6 (generic feedback) is too vague - either remove or verify existing feedback mechanisms are sufficient.",
      "root_cause": "Themes 1-3 share a common root cause: timezone information is not prominently displayed in the scheduling flow. However, themes 4-6 are unrelated - theme 5 (conflicting timeslots) is schedule conflict detection, not timezone clarity.",
      "discovered_at": "2026-01-14T05:35:36.930487"
    }
  ]
}